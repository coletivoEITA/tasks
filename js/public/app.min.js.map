{"version":3,"sources":["app.js","controllers/appcontroller.js","controllers/detailscontroller.js","controllers/listcontroller.js","controllers/settingscontroller.js","controllers/taskscontroller.js","directives/appnavigationentryutils.js","directives/autofocusoninsert.js","directives/avatar.js","directives/colorpickerDirective.js","directives/confirmation.js","directives/datepicker.js","directives/occlickfocus.js","directives/timepicker.js","directives/watchtop.js","filters/counterFormatter.js","filters/dateDetails.js","filters/dateDetailsShort.js","filters/dateFromNow.js","filters/dateTaskList.js","filters/day.js","filters/dayTaskList.js","filters/percentDetails.js","filters/priorityDetails.js","filters/reminderDetails.js","filters/startDetails.js","filters/timeTaskList.js","services/calendarservice.js","services/davclient.js","services/icalfactory.js","services/loading.js","services/model.js","services/persistence.js","services/publisher.js","services/randomstringservice.js","services/request.js","services/status.js","services/vtodoservice.js","services/businesslayer/listsbusinesslayer.js","services/businesslayer/searchbusinesslayer.js","services/businesslayer/settingsbusinesslayer.js","services/businesslayer/tasksbusinesslayer.js","services/models/calendar.js","services/models/collectionsmodel.js","services/models/listsmodel.js","services/models/settingsmodel.js","services/models/tasksmodel.js","services/models/vtodo.js"],"names":["angular","module","config","$provide","$routeProvider","$interpolateProvider","$httpProvider","value","markReadTimeout","taskUpdateInterval","defaults","headers","common","requesttoken","oc_requesttoken","when","otherwise","redirectTo","run","$document","$rootScope","Config","$timeout","TasksBusinessLayer","ListsBusinessLayer","SearchBusinessLayer","_update","init","update","timeOutUpdate","call","OCA","Search","tasks","click","event","$broadcast","moment","locale","calendar","lastDay","t","sameDay","nextDay","lastWeek","nextWeek","sameElse","diff","relativeTime","future","past","s","m","mm","h","hh","d","dd","M","MM","y","yy","controller","$scope","$route","status","$location","$routeParams","Loading","SettingsModel","Persistence","AppController","_$scope","_$listsbusinesslayer","_$route","_$status","_$timeout","_$location","_$routeparams","_Loading","_$settingsmodel","_persistence","getStatus","route","newListName","settingsmodel","currentUser","OC","getCurrentUser","then","results","Promise","all","$apply","closeAll","$event","$","target","closest","length","currentTarget","is","isUndefined","calendarID","listparameter","path","collectionID","addingList","focusTaskInput","addSubtaskTo","focusSubtaskInput","isLoading","$window","TasksModel","ListsModel","DetailsController","_$window","_$tasksmodel","_tasksbusinesslayer","_$listsmodel","task","getById","taskID","found","$on","getByUri","cats","categories","add","newComment","newCommentTitle","timers","durations","name","names","id","loadTask","TaskState","params","invert","related","filterParams","due","start","slice","deleteTask","triggerUpdate","editName","writable","setEditRoute","editDueDate","initDueDate","editStart","initStartDate","editReminder","initReminder","editNote","editPriority","editPercent","endEdit","resetRoute","endName","keyCode","preventDefault","type","deletePercent","setPercentComplete","deleteReminder","deleteReminderDate","toggleCompleted","completed","complete","toggleStarred","priority","setPriority","deletePriority","isDue","date","isOverDue","overdue","setstartday","setStart","setstarttime","deleteStartDate","setdueday","setDue","setduetime","deleteDueDate","isAllDayPossible","toggleAllDay","setAllDay","allDay","setreminderday","setReminderDate","setremindertime","reminderType","reminder","isValid","changeReminderType","checkReminderDate","setReminder","setReminderDuration","addComment","nc","Date","now","toString","comment","time","format","userID","uid","comms","comments","push","doUpdate","deleteComment","i","splice","commentStrings","button","input","addCategory","category","model","default_categories","indexOf","removeCategory","CollectionsModel","CalendarService","ListController","_$routeParams","_$tasksbusinesslayer","_$collectionsmodel","_$searchbusinesslayer","_$calendarservice","collections","getAll","calendars","draggedTasks","nameError","color","deleteMessage","replace","displayname","getStandardList","uri","startCreate","tooltip","focus","create","check","isNameAllowed","allowed","isAddingList","cancelCreate","startEdit","prepareUpdate","showCalDAVUrl","hideCalDAVUrl","download","url","open","checkNew","checkName","checkEdit","cancelEdit","$input","attr","msg","placement","trigger","calendarUri","resetToPreviousState","saveEdit","rename","isNameAlreadyTaken","getCollectionCount","filter","getFilter","getCount","hideCollection","collection","show","getCollectionString","getListCount","listID","dragoverList","index","dropList","item","dataTransfer","dropEffect","changeCalendar","dragoverCollection","effectAllowed","ctrlKey","dropCollection","changeCollection","Status","SettingsBusinessLayer","SettingsController","_$settingsbusinesslayer","_this","collectionOptions","startOfWeekOptions","setVisibility","setStartOfWeek","set","startOfWeek","__indexOf","l","VTodo","TasksController","_settingsbusinesslayer","_searchbusinesslayer","vtodo","_vtodo","days","isAddingTask","focusInputField","addTask","taskName","parent","_ref","summary","note","startOf","openDetails","setHideSubtasks","subtaskName","getAddString","isDefined","getSubAddString","taskname","showSubtaskInput","hideSubtasks","descendantIDs","getDescendantIDs","showInput","loadedCompleted","toggleHidden","toggle","filterTasks","getSubTasks","ret","_i","_len","hideCompletedSubtasks","hasNoParent","hasSubtasks","hasCompletedSubtasks","toggleSubtasks","toggleCompletedSubtasks","setHideCompletedSubtasks","filterTasksByString","filteredTasks","dayHasEntry","taskAtDay","day","filterLists","getCountString","n","checkTaskInput","blur","getCompletedTasks","setLoadedCompleted","sortDue","sortStart","getSortOrder","sortOrder","getSortOrderIcon","setSortOrder","order","sortDirection","dropAsSubtask","parentID","changeParent","removeClass","dropAsRootTask","newCalendar","queries","makeRootTask","dragover","children","addClass","allow","dragStart","dragEnd","undefined","directive","restrict","link","scope","elm","menu","siblings","find","toggleClass","$observe","userid","avatar","size","hslToRgb","hue","saturation","lightness","Array","isArray","chroma","Math","abs","huePrime","secondComponent","floor","red","green","blue","lightnessAdjustment","round","rgbToHex","r","g","b","parseInt","listofcolours","randColour","String","prototype","toHsl","random","hsl","hslcolour","forEach","hash","selected","customizedColors","templateUrl","filePath","element","colors","randomizeColour","pick","generateUrl","confirmationFunction","confirmationMessage","$element","$attrs","$compile","ConfirmationController","countdown","bind","e","message","hasClass","stopPropagation","activate","title","container","documentClick","html","unbind","datepicker","onSelect","inst","beforeShow","dp","marginLeft","outerWidth","css","beforeShowDay","minDate","options","$eval","ocClickFocus","selector","timeout","timepicker","myPosition","atPosition","hourText","minuteText","$watch","divTop","prev","outerHeight","count","isDate","fromNow","percent","string","before","after","tokenName","token","duration","ds","service","DavClient","Calendar","_CALENDAR_HOME","_currentUserPrincipal","_takenUrls","_PROPERTIES","NS_DAV","NS_IETF","NS_APPLE","NS_OWNCLOUD","discoverHome","callback","propFind","buildUrl","linkToRemoteBase","requestToken","response","wasRequestSuccessful","body","propStat","props","properties","textContent","getResponseCodeFromHTTPResponse","split","prom","href","responseCode","doesSupportVTodo","components","j","attributes","getNamedItem","toLowerCase","_getACLFromResponse","substr","get","xmlDoc","document","implementation","createDocument","cMkcalendar","createElement","setAttribute","appendChild","dSet","dProp","_createXMLForProperty","outerHTML","_suggestUri","request","enabled","dPropUpdate","updatedProperties","resetUpdatedProperties","share","shareType","shareWith","existingShare","oShare","oSet","dHref","Share","SHARE_TYPE_USER","SHARE_TYPE_GROUP","oSummary","owner","oRW","sharedWith","users","groups","unshare","oRemove","user","propName","oEnabled","dDisplayname","aOrder","aColor","cComponents","cComp","toUpperCase","canWrite","acl","k","getElementsByTagNameNS","writeNode","_isUriAlreadyTaken","positionLastDash","lastIndexOf","firstPart","lastPart","match","client","dav","Client","baseUrl","linkToRemote","xmlNamespaces","extend","NS_NEXTCLOUD","NS_CALENDARSERVER","window","location","protocol","host","_new","root","ICAL","Component","version","updatePropertyWithValue","factory","increase","decrease","Model","_data","_dataMap","_filterCache","handle","data","_results","clearCache","_invalidateCache","entry","key","removeById","counter","clear","query","hashCode","exec","Request","$q","_request","_$rootScope","_CalendarService","successCallback","deferred","defer","resolve","getCollections","getSettings","promise","onSuccess","showLoading","failureCallbackWrapper","successCallbackWrapper","onFailure","visibility","routeParams","post","setting","Publisher","_subscriptions","subscribeObjectTo","object","base","publishDataTo","ref","subscriber","generate","$http","publisher","initialized","shelvedRequests","_executeShelvedRequests","defaultConfig","defaultData","_shelveRequest","method","put","RandomStringService","cCalQuery","dGetEtag","cCalendarData","cFilter","cCompFilterVCal","cCompFilterVTodo","cPropFilterCompleted","cIsNotDefined","cPropFilterRelated","cTextMatch","cTextMatchValue","createTextNode","vTodos","vTodo","xhr","getResponseHeader","returnTodo","_generateRandomUri","console","log","etag","cancel","dropPreviousState","__bind","fn","me","apply","arguments","setFilter","attach","initialize","_$searchString","search","setRenderer","renderTaskResult","setHandler","handleTaskClick","$row","result","calendarid","$template","isLoaded","clone","append","text","starred","getColor","Plugins","register","updateModel","success","VTodoService","_$vtodoservice","_$vtodo","ad","getTask","percentComplete","uncompleteParents","completeChildren","child","getChildren","getByUid","hide","momentToICALTime","asDate","Time","fromDateString","fromDateTimeString","reference","isAfter","olddue","year","month","hour","minute","isBefore","isSame","subtract","oldstart","p","action","week","second","newreminder","reminderdate","rel","seg","w","secondsToSegments","newTask","copy","newVTodo","requests","commentID","$filter","_propertiesBackup","_properties","vevent","vjournal","shareable","_updatedProperties","hasOwnProperty","shares","access","readWrite","startsWith","caldav","origin","exportUrl","_setUpdated","textColor","fallbackColor","c","_generateTextColor","charAt","regex","RegExp","toggleSharesEditor","list","editingShares","brightness","__hasProp","__extends","Ctor","constructor","__super__","_Model","_super","_nameCache","_tmpUriCache","updateByUri","tmplist","_tmpIdCache","tmpID","calendarcolor","getName","removeByList","taskIDs","_j","_len1","duediff","startdiff","getIdByUid","concat","current","today","needle","ancestors","objectExists","getAncestor","re","keys","searchComments","searchCategories","updateComment","com","icalfactory","loaded","jCal","parse","loadComments","vtodos","getAllSubcomponents","getFirstPropertyValue","updateLastModified","comp","removeProperty","completed_date","toJSDate","getFirstProperty","getValues","setValues","prop","Property","addProperty","_comments","removeAllProperties","addPropertyWithValue","JSON","stringify","commentRaw","getAllProperties","commentObject","val","addSubcomponent"],"mappings":"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","file":"app.min.js","sourcesContent":["'use strict';\n\nangular.module('Tasks', ['ngRoute', 'ngAnimate', 'ui.select', 'ngSanitize', 'dndLists']).config(['$provide', '$routeProvider', '$interpolateProvider', '$httpProvider', function ($provide, $routeProvider, $interpolateProvider, $httpProvider) {\n\t'use strict';\n\n\tvar config;\n\t$provide.value('Config', config = {\n\t\tmarkReadTimeout: 500,\n\t\ttaskUpdateInterval: 1000 * 600\n\t});\n\t$httpProvider.defaults.headers.common.requesttoken = oc_requesttoken;\n\t$routeProvider.when('/calendars/:calendarID', {}).when('/calendars/:calendarID/edit/:listparameter', {}).when('/calendars/:calendarID/tasks/:taskID', {}).when('/calendars/:calendarID/tasks/:taskID/settings', {}).when('/calendars/:calendarID/tasks/:taskID/edit/:parameter', {}).when('/collections/:collectionID/tasks/:taskID', {}).when('/collections/:collectionID/tasks/:taskID/settings', {}).when('/collections/:collectionID/tasks/:taskID/edit/:parameter', {}).when('/collections/:collectionID', {}).when('/search/:searchString', {}).when('/search/:searchString/tasks/:taskID', {}).when('/search/:searchString/tasks/:taskID/edit/:parameter', {}).otherwise({\n\t\tredirectTo: '/collections/all'\n\t});\n}]);\n\nangular.module('Tasks').run(['$document', '$rootScope', 'Config', '$timeout', 'ListsBusinessLayer', 'TasksBusinessLayer', 'SearchBusinessLayer', function ($document, $rootScope, Config, $timeout, TasksBusinessLayer, ListsBusinessLayer, SearchBusinessLayer) {\n\t'use strict';\n\n\tvar _update;\n\tvar init = false;\n\t(_update = function update() {\n\t\tvar timeOutUpdate;\n\t\ttimeOutUpdate = function timeOutUpdate() {\n\t\t\treturn $timeout(_update, Config.taskUpdateInterval);\n\t\t};\n\t\tinit = true;\n\t\treturn timeOutUpdate();\n\t}).call();\n\tOCA.Search.tasks = SearchBusinessLayer;\n\t$document.click(function (event) {\n\t\t$rootScope.$broadcast('documentClicked', event);\n\t});\n\tmoment.locale('details', {\n\t\tcalendar: {\n\t\t\tlastDay: '[' + t('tasks', 'Due yesterday') + '], HH:mm',\n\t\t\tsameDay: '[' + t('tasks', 'Due today') + '], HH:mm',\n\t\t\tnextDay: '[' + t('tasks', 'Due tomorrow') + '], HH:mm',\n\t\t\tlastWeek: '[' + t('tasks', 'Due on') + '] MMM DD, YYYY, HH:mm',\n\t\t\tnextWeek: '[' + t('tasks', 'Due on') + '] MMM DD, YYYY, HH:mm',\n\t\t\tsameElse: '[' + t('tasks', 'Due on') + '] MMM DD, YYYY, HH:mm'\n\t\t}\n\t});\n\tmoment.locale('details_allday', {\n\t\tcalendar: {\n\t\t\tlastDay: '[' + t('tasks', 'Due yesterday') + ']',\n\t\t\tsameDay: '[' + t('tasks', 'Due today') + ']',\n\t\t\tnextDay: '[' + t('tasks', 'Due tomorrow') + ']',\n\t\t\tlastWeek: '[' + t('tasks', 'Due on') + '] MMM DD, YYYY',\n\t\t\tnextWeek: '[' + t('tasks', 'Due on') + '] MMM DD, YYYY',\n\t\t\tsameElse: '[' + t('tasks', 'Due on') + '] MMM DD, YYYY'\n\t\t}\n\t});\n\tmoment.locale('start', {\n\t\tcalendar: {\n\t\t\tlastDay: '[' + t('tasks', 'Started yesterday') + '], HH:mm',\n\t\t\tsameDay: '[' + t('tasks', 'Starts today') + '], HH:mm',\n\t\t\tnextDay: '[' + t('tasks', 'Starts tomorrow') + '], HH:mm',\n\t\t\tlastWeek: '[' + t('tasks', 'Started on') + '] MMM DD, YYYY, HH:mm',\n\t\t\tnextWeek: '[' + t('tasks', 'Starts on') + '] MMM DD, YYYY, HH:mm',\n\t\t\tsameElse: function sameElse() {\n\t\t\t\tif (this.diff(moment()) > 0) {\n\t\t\t\t\treturn '[' + t('tasks', 'Starts on') + '] MMM DD, YYYY, HH:mm';\n\t\t\t\t} else {\n\t\t\t\t\treturn '[' + t('tasks', 'Started on') + '] MMM DD, YYYY, HH:mm';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tmoment.locale('start_allday', {\n\t\tcalendar: {\n\t\t\tlastDay: '[' + t('tasks', 'Started yesterday') + ']',\n\t\t\tsameDay: '[' + t('tasks', 'Starts today') + ']',\n\t\t\tnextDay: '[' + t('tasks', 'Starts tomorrow') + ']',\n\t\t\tlastWeek: '[' + t('tasks', 'Started on') + '] MMM DD, YYYY',\n\t\t\tnextWeek: '[' + t('tasks', 'Starts on') + '] MMM DD, YYYY',\n\t\t\tsameElse: function sameElse() {\n\t\t\t\tif (this.diff(moment()) > 0) {\n\t\t\t\t\treturn '[' + t('tasks', 'Starts on') + '] MMM DD, YYYY';\n\t\t\t\t} else {\n\t\t\t\t\treturn '[' + t('tasks', 'Started on') + '] MMM DD, YYYY';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tmoment.locale('reminder', {\n\t\tcalendar: {\n\t\t\tlastDay: t('tasks', '[Remind me yesterday at ]HH:mm'),\n\t\t\tsameDay: t('tasks', '[Remind me today at ]HH:mm'),\n\t\t\tnextDay: t('tasks', '[Remind me tomorrow at ]HH:mm'),\n\t\t\tlastWeek: t('tasks', '[Remind me on ]MMM DD, YYYY,[ at ]HH:mm'),\n\t\t\tnextWeek: t('tasks', '[Remind me on ]MMM DD, YYYY,[ at ]HH:mm'),\n\t\t\tsameElse: t('tasks', '[Remind me on ]MMM DD, YYYY,[ at ]HH:mm')\n\t\t}\n\t});\n\tmoment.locale('tasks', {\n\t\tcalendar: {\n\t\t\tlastDay: '[' + t('tasks', 'Yesterday') + ']',\n\t\t\tsameDay: '[' + t('tasks', 'Today') + ']',\n\t\t\tnextDay: '[' + t('tasks', 'Tomorrow') + ']',\n\t\t\tlastWeek: 'DD.MM.YYYY',\n\t\t\tnextWeek: 'DD.MM.YYYY',\n\t\t\tsameElse: 'DD.MM.YYYY'\n\t\t}\n\t});\n\tmoment.locale('details_short', {\n\t\tcalendar: {\n\t\t\tlastDay: '[' + t('tasks', 'Yesterday') + ']',\n\t\t\tsameDay: '[' + t('tasks', 'Today') + ']',\n\t\t\tnextDay: '[' + t('tasks', 'Tomorrow') + ']',\n\t\t\tlastWeek: 'MMM DD, YYYY',\n\t\t\tnextWeek: 'MMM DD, YYYY',\n\t\t\tsameElse: 'MMM DD, YYYY'\n\t\t}\n\t});\n\tmoment.locale('list_week', {\n\t\tcalendar: {\n\t\t\tlastDay: '[' + t('tasks', 'Yesterday') + ']',\n\t\t\tsameDay: '[' + t('tasks', 'Today') + '], MMM. DD',\n\t\t\tnextDay: '[' + t('tasks', 'Tomorrow') + '], MMM. DD',\n\t\t\tlastWeek: 'ddd, MMM. DD',\n\t\t\tnextWeek: 'ddd, MMM. DD',\n\t\t\tsameElse: 'ddd, MMM. DD'\n\t\t}\n\t});\n\treturn moment.locale('en', {\n\t\trelativeTime: {\n\t\t\tfuture: t('tasks', \"in %s\"),\n\t\t\tpast: t('tasks', \"%s ago\"),\n\t\t\ts: t('tasks', \"seconds\"),\n\t\t\tm: t('tasks', \"a minute\"),\n\t\t\tmm: t('tasks', \"%d minutes\"),\n\t\t\th: t('tasks', \"an hour\"),\n\t\t\thh: t('tasks', \"%d hours\"),\n\t\t\td: t('tasks', \"a day\"),\n\t\t\tdd: t('tasks', \"%d days\"),\n\t\t\tM: t('tasks', \"a month\"),\n\t\t\tMM: t('tasks', \"%d months\"),\n\t\t\ty: t('tasks', \"a year\"),\n\t\t\tyy: t('tasks', \"%d years\")\n\t\t}\n\t});\n}]);","'use strict';\n\nangular.module('Tasks').controller('AppController', ['$scope', '$rootScope', 'ListsBusinessLayer', '$route', 'Status', '$timeout', '$location', '$routeParams', 'Loading', 'SettingsModel', 'Persistence', function ($scope, $rootScope, ListsBusinessLayer, $route, status, $timeout, $location, $routeParams, Loading, SettingsModel, Persistence) {\n\t'use strict';\n\n\tvar AppController = function () {\n\t\tfunction AppController(_$scope, $rootScope, _$listsbusinesslayer, _$route, _$status, _$timeout, _$location, _$routeparams, _Loading, _$settingsmodel, _persistence) {\n\t\t\tthis._$scope = _$scope;\n\t\t\tthis._$listsbusinesslayer = _$listsbusinesslayer;\n\t\t\tthis._$route = _$route;\n\t\t\tthis._$status = _$status;\n\t\t\tthis._$timeout = _$timeout;\n\t\t\tthis._$location = _$location;\n\t\t\tthis._$routeparams = _$routeparams;\n\t\t\tthis._Loading = _Loading;\n\t\t\tthis._$settingsmodel = _$settingsmodel;\n\t\t\tthis._persistence = _persistence;\n\t\t\tthis._$scope.status = this._$status.getStatus();\n\t\t\tthis._$scope.route = this._$routeparams;\n\t\t\tthis._$scope.status.newListName = \"\";\n\t\t\tthis._$scope.settingsmodel = this._$settingsmodel;\n\t\t\tthis._$scope.currentUser = OC.getCurrentUser();\n\n\t\t\tthis._$listsbusinesslayer.init().then(function (results) {\n\t\t\t\tPromise.all(results).then(function () {\n\t\t\t\t\t$scope.$apply();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis._persistence.init();\n\n\t\t\tthis._$scope.closeAll = function ($event) {\n\t\t\t\tif ($($event.target).closest('.close-all').length || $($event.currentTarget).is($($event.target).closest('.handler'))) {\n\t\t\t\t\tif (!angular.isUndefined(_$scope.route.calendarID)) {\n\t\t\t\t\t\tif (_$scope.route.listparameter === 'name') {\n\t\t\t\t\t\t\t$rootScope.$broadcast('cancelEditCalendar', _$scope.route.calendarID);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_$location.path('/calendars/' + _$scope.route.calendarID);\n\t\t\t\t\t} else if (!angular.isUndefined(_$scope.route.collectionID)) {\n\t\t\t\t\t\t_$location.path('/collections/' + _$scope.route.collectionID);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_$location.path('/collections/all');\n\t\t\t\t\t}\n\t\t\t\t\t_$scope.status.addingList = false;\n\t\t\t\t\t_$scope.status.focusTaskInput = false;\n\t\t\t\t\t_$scope.status.newListName = \"\";\n\t\t\t\t}\n\t\t\t\tif (!$($event.target).closest('.newList').length) {\n\t\t\t\t\t_$scope.status.addingList = false;\n\t\t\t\t\t_$scope.status.newListName = \"\";\n\t\t\t\t}\n\t\t\t\tif (!$($event.target).closest('.add-subtask').length) {\n\t\t\t\t\t_$scope.status.addSubtaskTo = null;\n\t\t\t\t\t_$scope.status.focusSubtaskInput = false;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.isLoading = function () {\n\t\t\t\treturn _Loading.isLoading();\n\t\t\t};\n\t\t}\n\t\treturn AppController;\n\t}();\n\treturn new AppController($scope, $rootScope, ListsBusinessLayer, $route, status, $timeout, $location, $routeParams, Loading, SettingsModel, Persistence);\n}]);","'use strict';\n\nangular.module('Tasks').controller('DetailsController', ['$scope', '$window', 'TasksModel', 'TasksBusinessLayer', '$route', '$location', '$timeout', '$routeParams', 'SettingsModel', 'Loading', 'ListsModel', function ($scope, $window, TasksModel, TasksBusinessLayer, $route, $location, $timeout, $routeParams, SettingsModel, Loading, ListsModel) {\n\t'use strict';\n\n\tvar DetailsController = function () {\n\t\tfunction DetailsController(_$scope, _$window, _$tasksmodel, _tasksbusinesslayer, _$route, _$location, _$timeout, _$routeparams, _$settingsmodel, _Loading, _$listsmodel) {\n\t\t\tthis._$scope = _$scope;\n\t\t\tthis._$window = _$window;\n\t\t\tthis._$tasksmodel = _$tasksmodel;\n\t\t\tthis._$listsmodel = _$listsmodel;\n\t\t\tthis._tasksbusinesslayer = _tasksbusinesslayer;\n\t\t\tthis._$route = _$route;\n\t\t\tthis._$location = _$location;\n\t\t\tthis._$timeout = _$timeout;\n\t\t\tthis._$routeparams = _$routeparams;\n\t\t\tthis._$settingsmodel = _$settingsmodel;\n\t\t\tthis._Loading = _Loading;\n\t\t\tthis._$scope.task = _$tasksmodel.getById(_$scope.route.taskID);\n\t\t\tthis._$scope.found = true;\n\t\t\tthis._$scope.$on('$routeChangeSuccess', function () {\n\t\t\t\tvar task = _$tasksmodel.getByUri(_$scope.route.taskID);\n\n\t\t\t\tif (!(angular.isUndefined(task) || task === null)) {\n\t\t\t\t\t_$scope.task = task;\n\t\t\t\t\t// Bind categories to task.cats as angular.ui/ui-select seems to have problems with Getter/Setter\n\t\t\t\t\t_$scope.task.cats = task.categories;\n\t\t\t\t\t_$scope.found = true;\n\t\t\t\t} else if (_$scope.route.taskID !== void 0) {\n\t\t\t\t\t_$scope.found = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._$scope.settingsmodel = this._$settingsmodel;\n\t\t\tthis._$scope.settingsmodel.add({\n\t\t\t\t'id': 'various',\n\t\t\t\t'categories': []\n\t\t\t});\n\t\t\tthis._$scope.newComment = \"\";\n\t\t\tthis._$scope.newCommentTitle = \"\";\n\t\t\tthis._$scope.timers = [];\n\t\t\tthis._$scope.durations = [{\n\t\t\t\tname: t('tasks', 'week'),\n\t\t\t\tnames: t('tasks', 'weeks'),\n\t\t\t\tid: 'week'\n\t\t\t}, {\n\t\t\t\tname: t('tasks', 'day'),\n\t\t\t\tnames: t('tasks', 'days'),\n\t\t\t\tid: 'day'\n\t\t\t}, {\n\t\t\t\tname: t('tasks', 'hour'),\n\t\t\t\tnames: t('tasks', 'hours'),\n\t\t\t\tid: 'hour'\n\t\t\t}, {\n\t\t\t\tname: t('tasks', 'minute'),\n\t\t\t\tnames: t('tasks', 'minutes'),\n\t\t\t\tid: 'minute'\n\t\t\t}, {\n\t\t\t\tname: t('tasks', 'second'),\n\t\t\t\tnames: t('tasks', 'seconds'),\n\t\t\t\tid: 'second'\n\t\t\t}];\n\t\t\tthis._$scope.loadTask = function (taskID) {\n\t\t\t\tvar task = _$tasksmodel.getByUri(_$scope.route.taskID);\n\t\t\t\tif (!(angular.isUndefined(task) || task === null)) {\n\t\t\t\t\t_$scope.task = task;\n\t\t\t\t\t_$scope.found = true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.TaskState = function () {\n\t\t\t\tif (_$scope.found) {\n\t\t\t\t\treturn 'found';\n\t\t\t\t} else {\n\t\t\t\t\tif (_Loading.isLoading()) {\n\t\t\t\t\t\treturn 'loading';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.params = [{\n\t\t\t\tname: t('tasks', 'before beginning'),\n\t\t\t\tinvert: true,\n\t\t\t\trelated: 'START',\n\t\t\t\tid: \"10\"\n\t\t\t}, {\n\t\t\t\tname: t('tasks', 'after beginning'),\n\t\t\t\tinvert: false,\n\t\t\t\trelated: 'START',\n\t\t\t\tid: \"00\"\n\t\t\t}, {\n\t\t\t\tname: t('tasks', 'before end'),\n\t\t\t\tinvert: true,\n\t\t\t\trelated: 'END',\n\t\t\t\tid: \"11\"\n\t\t\t}, {\n\t\t\t\tname: t('tasks', 'after end'),\n\t\t\t\tinvert: false,\n\t\t\t\trelated: 'END',\n\t\t\t\tid: \"01\"\n\t\t\t}];\n\t\t\tthis._$scope.filterParams = function (params) {\n\t\t\t\tvar task;\n\t\t\t\ttask = _$tasksmodel.getById(_$scope.route.taskID);\n\t\t\t\tif (!(angular.isUndefined(task) || task === null)) {\n\t\t\t\t\tif (task.due && task.start) {\n\t\t\t\t\t\treturn params;\n\t\t\t\t\t} else if (task.start) {\n\t\t\t\t\t\treturn params.slice(0, 2);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn params.slice(2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.deleteTask = function (task) {\n\t\t\t\treturn _$timeout(function () {\n\t\t\t\t\treturn _tasksbusinesslayer.deleteTask(task).then(function () {\n\t\t\t\t\t\treturn $scope.$apply();\n\t\t\t\t\t});\n\t\t\t\t}, 500);\n\t\t\t};\n\t\t\tthis._$scope.triggerUpdate = function (task) {\n\t\t\t\t_tasksbusinesslayer.triggerUpdate(task);\n\t\t\t};\n\t\t\tthis._$scope.editName = function ($event, task) {\n\t\t\t\tif (task.calendar.writable) {\n\t\t\t\t\tif (!$($event.target).is('a')) {\n\t\t\t\t\t\t_$scope.setEditRoute('name');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.editDueDate = function ($event, task) {\n\t\t\t\tif (task.calendar.writable) {\n\t\t\t\t\tif ($($event.currentTarget).is($($event.target).closest('.handler'))) {\n\t\t\t\t\t\t_$scope.setEditRoute('duedate');\n\t\t\t\t\t\t_tasksbusinesslayer.initDueDate(task);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.editStart = function ($event, task) {\n\t\t\t\tif (task.calendar.writable) {\n\t\t\t\t\tif ($($event.currentTarget).is($($event.target).closest('.handler'))) {\n\t\t\t\t\t\t_$scope.setEditRoute('startdate');\n\t\t\t\t\t\t_tasksbusinesslayer.initStartDate(task);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.editReminder = function ($event, task) {\n\t\t\t\tif (task.calendar.writable) {\n\t\t\t\t\tif ($($event.currentTarget).is($($event.target).closest('.handler'))) {\n\t\t\t\t\t\t_$scope.setEditRoute('reminer');\n\t\t\t\t\t\treturn _tasksbusinesslayer.initReminder(_$scope.route.taskID);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.editNote = function ($event, task) {\n\t\t\t\tif (task.calendar.writable) {\n\t\t\t\t\tif ($($event.currentTarget).is($($event.target).closest('.handler'))) {\n\t\t\t\t\t\tif (!$($event.target).is('a')) {\n\t\t\t\t\t\t\t_$scope.setEditRoute('note');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.editPriority = function ($event, task) {\n\t\t\t\tif (task.calendar.writable) {\n\t\t\t\t\tif ($($event.currentTarget).is($($event.target).closest('.handler'))) {\n\t\t\t\t\t\t_$scope.setEditRoute('priority');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.editPercent = function ($event, task) {\n\t\t\t\tif (task.calendar.writable) {\n\t\t\t\t\tif ($($event.currentTarget).is($($event.target).closest('.handler'))) {\n\t\t\t\t\t\t_$scope.setEditRoute('percent');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.endEdit = function ($event) {\n\t\t\t\tif ($($event.target).closest('.end-edit').length || $($event.currentTarget).is($($event.target).closest('.handler'))) {\n\t\t\t\t\t_$scope.resetRoute();\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.endName = function ($event) {\n\t\t\t\tif ($event.keyCode === 13) {\n\t\t\t\t\t$event.preventDefault();\n\t\t\t\t\t_$scope.resetRoute();\n\t\t\t\t}\n\t\t\t\tif ($event.keyCode === 27) {\n\t\t\t\t\treturn _$scope.resetRoute();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._$scope.setEditRoute = function (type) {\n\t\t\t\tvar calendarID = _$scope.route.calendarID;\n\t\t\t\tvar collectionID = _$scope.route.collectionID;\n\t\t\t\tif (calendarID) {\n\t\t\t\t\t$location.path('/calendars/' + calendarID + '/tasks/' + _$scope.route.taskID + '/edit/' + type);\n\t\t\t\t} else if (collectionID) {\n\t\t\t\t\t$location.path('/collections/' + collectionID + '/tasks/' + _$scope.route.taskID + '/edit/' + type);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._$scope.resetRoute = function () {\n\t\t\t\tvar calendarID = _$scope.route.calendarID;\n\t\t\t\tvar collectionID = _$scope.route.collectionID;\n\t\t\t\tif (calendarID) {\n\t\t\t\t\t$location.path('/calendars/' + calendarID + '/tasks/' + _$scope.route.taskID);\n\t\t\t\t} else if (collectionID) {\n\t\t\t\t\t$location.path('/collections/' + collectionID + '/tasks/' + _$scope.route.taskID);\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.deletePercent = function (task) {\n\t\t\t\treturn _tasksbusinesslayer.setPercentComplete(task, 0);\n\t\t\t};\n\t\t\tthis._$scope.deleteReminder = function () {\n\t\t\t\treturn _tasksbusinesslayer.deleteReminderDate(_$scope.route.taskID);\n\t\t\t};\n\n\t\t\tthis._$scope.toggleCompleted = function (task) {\n\t\t\t\tif (task.completed) {\n\t\t\t\t\t_tasksbusinesslayer.setPercentComplete(task, 0);\n\t\t\t\t} else {\n\t\t\t\t\t_tasksbusinesslayer.setPercentComplete(task, 100);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._$scope.setPercentComplete = function (task, complete) {\n\t\t\t\t_tasksbusinesslayer.setPercentComplete(task, complete);\n\t\t\t};\n\n\t\t\tthis._$scope.toggleStarred = function (task) {\n\t\t\t\tif (task.priority > 5) {\n\t\t\t\t\t_tasksbusinesslayer.setPriority(task, 0);\n\t\t\t\t} else {\n\t\t\t\t\t_tasksbusinesslayer.setPriority(task, 9);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._$scope.deletePriority = function (task) {\n\t\t\t\treturn _tasksbusinesslayer.setPriority(task, 0);\n\t\t\t};\n\t\t\tthis._$scope.isDue = function (date) {\n\t\t\t\treturn _$tasksmodel.due(date);\n\t\t\t};\n\t\t\tthis._$scope.isOverDue = function (date) {\n\t\t\t\treturn _$tasksmodel.overdue(date);\n\t\t\t};\n\n\t\t\tthis._$scope.setstartday = function (date) {\n\t\t\t\treturn _tasksbusinesslayer.setStart(_$scope.task, moment(date, 'MM/DD/YYYY'), 'day');\n\t\t\t};\n\t\t\tthis._$scope.setstarttime = function (date) {\n\t\t\t\treturn _tasksbusinesslayer.setStart(_$scope.task, moment(date, 'HH:mm'), 'time');\n\t\t\t};\n\t\t\tthis._$scope.deleteStartDate = function (task) {\n\t\t\t\t_tasksbusinesslayer.deleteStartDate(task);\n\t\t\t};\n\n\t\t\tthis._$scope.setdueday = function (date) {\n\t\t\t\treturn _tasksbusinesslayer.setDue(_$scope.task, moment(date, 'MM/DD/YYYY'), 'day');\n\t\t\t};\n\t\t\tthis._$scope.setduetime = function (date) {\n\t\t\t\treturn _tasksbusinesslayer.setDue(_$scope.task, moment(date, 'HH:mm'), 'time');\n\t\t\t};\n\t\t\tthis._$scope.deleteDueDate = function (task) {\n\t\t\t\t_tasksbusinesslayer.deleteDueDate(task);\n\t\t\t};\n\n\t\t\tthis._$scope.isAllDayPossible = function (task) {\n\t\t\t\treturn !angular.isUndefined(task) && task.calendar.writable && (task.due || task.start);\n\t\t\t};\n\t\t\tthis._$scope.toggleAllDay = function (task) {\n\t\t\t\t_tasksbusinesslayer.setAllDay(task, !task.allDay);\n\t\t\t};\n\n\t\t\tthis._$scope.setreminderday = function (date) {\n\t\t\t\treturn _tasksbusinesslayer.setReminderDate(_$scope.route.taskID, moment(date, 'MM/DD/YYYY'), 'day');\n\t\t\t};\n\t\t\tthis._$scope.setremindertime = function (date) {\n\t\t\t\treturn _tasksbusinesslayer.setReminderDate(_$scope.route.taskID, moment(date, 'HH:mm'), 'time');\n\t\t\t};\n\t\t\tthis._$scope.reminderType = function (task) {\n\t\t\t\tif (!angular.isUndefined(task)) {\n\t\t\t\t\tif (task.reminder === null) {\n\t\t\t\t\t\tif (moment(task.start, \"YYYYMMDDTHHmmss\").isValid() || moment(task.due, \"YYYYMMDDTHHmmss\").isValid()) {\n\t\t\t\t\t\t\treturn 'DURATION';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn 'DATE-TIME';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn task.reminder.type;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._$scope.changeReminderType = function (task) {\n\t\t\t\t_tasksbusinesslayer.checkReminderDate(task.id);\n\t\t\t\tif (this.reminderType(task) === 'DURATION') {\n\t\t\t\t\tif (task.reminder) {\n\t\t\t\t\t\ttask.reminder.type = 'DATE-TIME';\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttask.reminder = {\n\t\t\t\t\t\t\ttype: 'DATE-TIME'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (task.reminder) {\n\t\t\t\t\t\ttask.reminder.type = 'DURATION';\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttask.reminder = {\n\t\t\t\t\t\t\ttype: 'DURATION'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _tasksbusinesslayer.setReminder(task.id);\n\t\t\t};\n\t\t\tthis._$scope.setReminderDuration = function (taskID) {\n\t\t\t\treturn _tasksbusinesslayer.setReminder(_$scope.route.taskID);\n\t\t\t};\n\t\t\tthis._$scope.addComment = function (task, newCommentTitle, newComment) {\n\t\t\t\tvar nc = {\n\t\t\t\t\tid: Date.now().toString(),\n\t\t\t\t\tname: newCommentTitle,\n\t\t\t\t\tcomment: newComment,\n\t\t\t\t\ttime: moment().format('YYYYMMDDTHHmmss'),\n\t\t\t\t\tuserID: OC.getCurrentUser().uid\n\t\t\t\t};\n\t\t\t\tvar comms = task.comments;\n\t\t\t\tcomms.push(nc);\n\t\t\t\ttask.comments = comms;\n\t\t\t\t_tasksbusinesslayer.doUpdate(task);\n\t\t\t};\n\t\t\tthis._$scope.deleteComment = function (comment) {\n\t\t\t\tvar comments = _$scope.task.comments;\n\t\t\t\tfor (var i = 0; i < comments.length; i++) {\n\t\t\t\t\tif (comments[i] === comment) {\n\t\t\t\t\t\tcomments.splice(1, i);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_tasksbusinesslayer.doUpdate(_$scope.task);\n\t\t\t};\n\t\t\tthis._$scope.commentStrings = function () {\n\t\t\t\treturn {\n\t\t\t\t\tbutton: t('tasks', 'Comment'),\n\t\t\t\t\tinput: t('tasks', 'Add a comment')\n\t\t\t\t};\n\t\t\t};\n\t\t\tthis._$scope.addCategory = function (category, model) {\n\t\t\t\t_$scope.task.categories = _$scope.task.cats;\n\t\t\t\tvar default_categories = _$scope.settingsmodel.getById('various').categories;\n\t\t\t\tif (default_categories.indexOf(category) < 0) {\n\t\t\t\t\tdefault_categories.push(category);\n\t\t\t\t}\n\t\t\t\t_tasksbusinesslayer.doUpdate(_$scope.task);\n\t\t\t};\n\t\t\tthis._$scope.removeCategory = function (category, model) {\n\t\t\t\t_$scope.task.categories = _$scope.task.cats;\n\t\t\t\t_tasksbusinesslayer.doUpdate(_$scope.task);\n\t\t\t};\n\t\t}\n\n\t\treturn DetailsController;\n\t}();\n\treturn new DetailsController($scope, $window, TasksModel, TasksBusinessLayer, $route, $location, $timeout, $routeParams, SettingsModel, Loading, ListsModel);\n}]);","'use strict';\n\nangular.module('Tasks').controller('ListController', ['$scope', '$rootScope', '$window', '$routeParams', 'ListsModel', 'TasksBusinessLayer', 'CollectionsModel', 'ListsBusinessLayer', '$location', 'SearchBusinessLayer', 'CalendarService', 'TasksModel', '$timeout', function ($scope, $rootScope, $window, $routeParams, ListsModel, TasksBusinessLayer, CollectionsModel, ListsBusinessLayer, $location, SearchBusinessLayer, CalendarService, TasksModel, $timeout) {\n\t'use strict';\n\n\tvar ListController;\n\tListController = function () {\n\t\tfunction ListController(_$scope, $rootScope, _$window, _$routeParams, _$listsmodel, _$tasksbusinesslayer, _$collectionsmodel, _$listsbusinesslayer, $location, _$searchbusinesslayer, _$calendarservice, _$tasksmodel, _$timeout) {\n\n\t\t\tthis._$scope = _$scope;\n\t\t\tthis._$window = _$window;\n\t\t\tthis._$routeParams = _$routeParams;\n\t\t\tthis._$listsmodel = _$listsmodel;\n\t\t\tthis._$tasksmodel = _$tasksmodel;\n\t\t\tthis._$tasksbusinesslayer = _$tasksbusinesslayer;\n\t\t\tthis._$collectionsmodel = _$collectionsmodel;\n\t\t\tthis._$listsbusinesslayer = _$listsbusinesslayer;\n\t\t\tthis.$location = $location;\n\t\t\tthis._$timeout = _$timeout;\n\t\t\tthis._$searchbusinesslayer = _$searchbusinesslayer;\n\t\t\tthis._$calendarservice = _$calendarservice;\n\t\t\tthis._$scope.collections = this._$collectionsmodel.getAll();\n\t\t\tthis._$scope.calendars = this._$listsmodel.getAll();\n\t\t\tthis._$scope.draggedTasks = [];\n\t\t\tthis._$scope.TasksBusinessLayer = this._$tasksbusinesslayer;\n\t\t\tthis._$scope.nameError = false;\n\t\t\tthis._$scope.color = '#31CC7C';\n\n\t\t\tthis._$scope.deleteMessage = function (calendar) {\n\t\t\t\treturn t('tasks', 'This will delete the Calendar \"%s\" and all of its entries.').replace('%s', calendar.displayname);\n\t\t\t};\n\n\t\t\tthis._$scope[\"delete\"] = function (calendar) {\n\t\t\t\treturn _$listsbusinesslayer[\"delete\"](calendar).then(function () {\n\t\t\t\t\t$location.path('/calendars/' + _$listsmodel.getStandardList().uri);\n\t\t\t\t\treturn $scope.$apply();\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tthis._$scope.startCreate = function () {\n\t\t\t\t_$scope.status.addingList = true;\n\t\t\t\t_$scope.nameError = false;\n\t\t\t\t$('.hasTooltip').tooltip('hide');\n\t\t\t\t_$timeout(function () {\n\t\t\t\t\t$('#newList').focus();\n\t\t\t\t}, 50);\n\t\t\t};\n\n\t\t\tthis._$scope.create = function () {\n\t\t\t\tvar check = _$scope.isNameAllowed(_$scope.status.newListName);\n\t\t\t\tif (check.allowed) {\n\t\t\t\t\t_$scope.status.addingList = false;\n\t\t\t\t\t_$scope.isAddingList = true;\n\t\t\t\t\t_$listsbusinesslayer.add(_$scope.status.newListName, _$scope.color).then(function (calendar) {\n\t\t\t\t\t\t$location.path('/calendars/' + calendar.uri);\n\t\t\t\t\t\treturn $scope.$apply();\n\t\t\t\t\t});\n\t\t\t\t\t_$scope.status.newListName = '';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._$scope.cancelCreate = function () {\n\t\t\t\t$('.hasTooltip').tooltip('hide');\n\t\t\t\t_$scope.nameError = false;\n\t\t\t\t_$scope.status.addingList = false;\n\t\t\t\t_$scope.status.newListName = \"\";\n\t\t\t};\n\n\t\t\tthis._$scope.startEdit = function (calendar) {\n\t\t\t\t_$scope.status.addingList = false;\n\t\t\t\t_$scope.nameError = false;\n\t\t\t\t$('.hasTooltip').tooltip('hide');\n\t\t\t\tcalendar.prepareUpdate();\n\t\t\t\t$location.path('/calendars/' + _$scope.route.calendarID + '/edit/name');\n\t\t\t\t_$timeout(function () {\n\t\t\t\t\t$('#list_' + calendar.uri + ' input.edit').focus();\n\t\t\t\t}, 50);\n\t\t\t};\n\n\t\t\tthis._$scope.showCalDAVUrl = function (calendar) {\n\t\t\t\t_$scope.status.addingList = false;\n\t\t\t\t_$scope.nameError = false;\n\t\t\t\t$location.path('/calendars/' + _$scope.route.calendarID + '/edit/caldav');\n\t\t\t\t_$timeout(function () {\n\t\t\t\t\t$('#list_' + calendar.uri + ' input.caldav').focus();\n\t\t\t\t}, 50);\n\t\t\t};\n\n\t\t\tthis._$scope.hideCalDAVUrl = function () {\n\t\t\t\t$location.path('/calendars/' + _$scope.route.calendarID);\n\t\t\t};\n\n\t\t\tthis._$scope.download = function (calendar) {\n\t\t\t\tvar url = calendar.url;\n\t\t\t\t// cut off last slash to have a fancy name for the ics\n\t\t\t\tif (url.slice(url.length - 1) === '/') {\n\t\t\t\t\turl = url.slice(0, url.length - 1);\n\t\t\t\t}\n\t\t\t\turl += '?export';\n\t\t\t\t$window.open(url);\n\t\t\t};\n\n\t\t\tthis._$scope.checkNew = function (event, name) {\n\t\t\t\t_$scope.checkName(event, name);\n\t\t\t};\n\n\t\t\tthis._$scope.checkEdit = function (event, calendar) {\n\t\t\t\t_$scope.checkName(event, calendar.displayname, calendar.uri);\n\t\t\t\tif (event.keyCode === 27) {\n\t\t\t\t\t_$scope.cancelEdit(calendar);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._$scope.checkName = function (event, name, uri) {\n\t\t\t\tvar check = _$scope.isNameAllowed(name, uri);\n\t\t\t\tvar $input = $(event.currentTarget);\n\t\t\t\tif (!check.allowed) {\n\t\t\t\t\t$input.attr('title', check.msg).tooltip({ placement: 'bottom', trigger: 'manual' }).tooltip('fixTitle').tooltip('show');\n\t\t\t\t\t_$scope.nameError = true;\n\t\t\t\t} else {\n\t\t\t\t\t$input.tooltip('hide');\n\t\t\t\t\t_$scope.nameError = false;\n\t\t\t\t}\n\t\t\t\tif (event.keyCode === 27) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t$input.tooltip('hide');\n\t\t\t\t\t_$scope.status.addingList = false;\n\t\t\t\t\t_$scope.status.newListName = \"\";\n\t\t\t\t\t_$scope.nameError = false;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t$rootScope.$on('cancelEditCalendar', function (s, calendarUri) {\n\t\t\t\tvar calendar = _$listsmodel.getByUri(calendarUri);\n\t\t\t\t_$scope.cancelEdit(calendar);\n\t\t\t});\n\n\t\t\tthis._$scope.cancelEdit = function (calendar) {\n\t\t\t\tcalendar.resetToPreviousState();\n\t\t\t\t$('.hasTooltip').tooltip('hide');\n\t\t\t\t_$scope.nameError = false;\n\t\t\t\t$location.path('/calendars/' + _$scope.route.calendarID);\n\t\t\t};\n\n\t\t\tthis._$scope.saveEdit = function (calendar) {\n\t\t\t\tvar check = _$scope.isNameAllowed(calendar.displayname, calendar.uri);\n\t\t\t\tif (check.allowed) {\n\t\t\t\t\t_$listsbusinesslayer.rename(calendar);\n\t\t\t\t\t$location.path('/calendars/' + _$scope.route.calendarID);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._$scope.isNameAllowed = function (name, uri) {\n\t\t\t\tvar check = {\n\t\t\t\t\tallowed: false,\n\t\t\t\t\tmsg: ''\n\t\t\t\t};\n\t\t\t\tif (_$listsmodel.isNameAlreadyTaken(name, uri)) {\n\t\t\t\t\tcheck.msg = t('tasks', 'The name \"%s\" is already used.').replace('%s', name);\n\t\t\t\t} else if (!name) {\n\t\t\t\t\tcheck.msg = t('tasks', 'An empty name is not allowed.');\n\t\t\t\t} else {\n\t\t\t\t\tcheck.allowed = true;\n\t\t\t\t}\n\t\t\t\treturn check;\n\t\t\t};\n\n\t\t\tthis._$scope.getCollectionCount = function (collectionID) {\n\t\t\t\tvar filter;\n\t\t\t\tfilter = _$searchbusinesslayer.getFilter();\n\t\t\t\treturn _$collectionsmodel.getCount(collectionID, filter);\n\t\t\t};\n\n\t\t\tthis._$scope.hideCollection = function (collectionID) {\n\t\t\t\tvar collection;\n\t\t\t\tcollection = _$collectionsmodel.getById(collectionID);\n\t\t\t\tswitch (collection.show) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn this.getCollectionCount(collectionID) < 1;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._$scope.getCollectionString = function (collectionID) {\n\t\t\t\tvar filter;\n\t\t\t\tif (collectionID !== 'completed') {\n\t\t\t\t\tfilter = _$searchbusinesslayer.getFilter();\n\t\t\t\t\treturn _$collectionsmodel.getCount(collectionID, filter);\n\t\t\t\t} else {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._$scope.getListCount = function (listID, type) {\n\t\t\t\tvar filter;\n\t\t\t\tfilter = _$searchbusinesslayer.getFilter();\n\t\t\t\treturn _$listsmodel.getCount(listID, type, filter);\n\t\t\t};\n\n\t\t\tthis._$scope.dragoverList = function ($event, index) {\n\t\t\t\tvar calendarID = $($event.target).closest('li.list').attr('calendarID');\n\t\t\t\tvar calendar = _$listsmodel.getByUri(calendarID);\n\t\t\t\treturn calendar.writable;\n\t\t\t};\n\n\t\t\tthis._$scope.dropList = function ($event, index, item) {\n\t\t\t\tif ($event.dataTransfer.dropEffect === 'move') {\n\t\t\t\t\t// we can't simply use item as task, since the directive seems to not copy all properties --> task.calendar.uri == undefined\n\t\t\t\t\tvar task = _$tasksmodel.getByUri(item.uri);\n\t\t\t\t\tvar calendarID = $($event.target).closest('li.list').attr('calendarID');\n\t\t\t\t\tvar calendar = _$listsmodel.getByUri(calendarID);\n\t\t\t\t\t_$tasksbusinesslayer.changeCalendar(task, calendar).then(function () {\n\t\t\t\t\t\t_$scope.$apply();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\tthis._$scope.dragoverCollection = function ($event, index) {\n\t\t\t\tif ($event.dataTransfer.effectAllowed === 'copy' || $event.dataTransfer.effectAllowed === 'copyMove' && $event.ctrlKey) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar collectionID;\n\t\t\t\tcollectionID = $($event.target).closest('li.collection').attr('collectionID');\n\t\t\t\treturn collectionID === 'starred' || collectionID === 'completed' || collectionID === 'today';\n\t\t\t};\n\n\t\t\tthis._$scope.dropCollection = function ($event, index, item) {\n\t\t\t\tif ($event.dataTransfer.dropEffect === 'move') {\n\t\t\t\t\tvar collectionID = $($event.target).closest('li.collection').attr('collectionID');\n\t\t\t\t\t_$tasksbusinesslayer.changeCollection(item.uri, collectionID);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t};\n\t\t}\n\t\treturn ListController;\n\t}();\n\treturn new ListController($scope, $rootScope, $window, $routeParams, ListsModel, TasksBusinessLayer, CollectionsModel, ListsBusinessLayer, $location, SearchBusinessLayer, CalendarService, TasksModel, $timeout);\n}]);","'use strict';\n\nangular.module('Tasks').controller('SettingsController', ['$scope', '$window', 'Status', '$location', 'CollectionsModel', 'SettingsBusinessLayer', 'SettingsModel', function ($scope, $window, Status, $location, CollectionsModel, SettingsBusinessLayer, SettingsModel) {\n\t'use strict';\n\n\tvar SettingsController;\n\tSettingsController = function () {\n\t\tfunction SettingsController(_$scope, _$window, _$status, _$location, _$collectionsmodel, _$settingsbusinesslayer, _$settingsmodel) {\n\t\t\tvar _this = this;\n\t\t\tthis._$scope = _$scope;\n\t\t\tthis._$window = _$window;\n\t\t\tthis._$status = _$status;\n\t\t\tthis._$location = _$location;\n\t\t\tthis._$collectionsmodel = _$collectionsmodel;\n\t\t\tthis._$settingsbusinesslayer = _$settingsbusinesslayer;\n\t\t\tthis._$settingsmodel = _$settingsmodel;\n\t\t\tthis._$scope.status = this._$status.getStatus();\n\t\t\tthis._$scope.collections = this._$collectionsmodel.getAll();\n\t\t\tthis._$scope.settingsmodel = this._$settingsmodel;\n\t\t\tthis._$scope.collectionOptions = [{\n\t\t\t\tid: 0,\n\t\t\t\tname: t('tasks', 'Hidden')\n\t\t\t}, {\n\t\t\t\tid: 1,\n\t\t\t\tname: t('tasks', 'Visible')\n\t\t\t}, {\n\t\t\t\tid: 2,\n\t\t\t\tname: t('tasks', 'Automatic')\n\t\t\t}];\n\t\t\tthis._$scope.startOfWeekOptions = [{\n\t\t\t\tid: 0,\n\t\t\t\tname: t('tasks', 'Sunday')\n\t\t\t}, {\n\t\t\t\tid: 1,\n\t\t\t\tname: t('tasks', 'Monday')\n\t\t\t}, {\n\t\t\t\tid: 2,\n\t\t\t\tname: t('tasks', 'Tuesday')\n\t\t\t}, {\n\t\t\t\tid: 3,\n\t\t\t\tname: t('tasks', 'Wednesday')\n\t\t\t}, {\n\t\t\t\tid: 4,\n\t\t\t\tname: t('tasks', 'Thursday')\n\t\t\t}, {\n\t\t\t\tid: 5,\n\t\t\t\tname: t('tasks', 'Friday')\n\t\t\t}, {\n\t\t\t\tid: 6,\n\t\t\t\tname: t('tasks', 'Saturday')\n\t\t\t}];\n\t\t\tthis._$scope.setVisibility = function (collectionID) {\n\t\t\t\tvar collection;\n\t\t\t\tcollection = _$collectionsmodel.getById(collectionID);\n\t\t\t\treturn _$settingsbusinesslayer.setVisibility(collectionID, collection.show);\n\t\t\t};\n\t\t\tthis._$scope.setStartOfWeek = function () {\n\t\t\t\treturn _$settingsbusinesslayer.set('various', 'startOfWeek', _$settingsmodel.getById('various').startOfWeek);\n\t\t\t};\n\t\t}\n\n\t\treturn SettingsController;\n\t}();\n\treturn new SettingsController($scope, $window, Status, $location, CollectionsModel, SettingsBusinessLayer, SettingsModel);\n}]);","'use strict';\n\n(function () {\n\t'use strict';\n\n\tvar __indexOf = [].indexOf || function (item) {\n\t\tfor (var i = 0, l = this.length; i < l; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\tangular.module('Tasks').controller('TasksController', ['$scope', '$window', '$routeParams', 'TasksModel', 'ListsModel', 'CollectionsModel', 'TasksBusinessLayer', '$location', 'SettingsBusinessLayer', 'SearchBusinessLayer', 'VTodo', 'SettingsModel', function ($scope, $window, $routeParams, TasksModel, ListsModel, CollectionsModel, TasksBusinessLayer, $location, SettingsBusinessLayer, SearchBusinessLayer, VTodo, SettingsModel) {\n\t\tvar TasksController;\n\t\tTasksController = function () {\n\t\t\tfunction TasksController(_$scope, _$window, _$routeParams, _$tasksmodel, _$listsmodel, _$collectionsmodel, _tasksbusinesslayer, $location, _settingsbusinesslayer, _searchbusinesslayer, vtodo, _$settingsmodel) {\n\t\t\t\tvar _this = this;\n\t\t\t\tthis._$scope = _$scope;\n\t\t\t\tthis._$window = _$window;\n\t\t\t\tthis._$routeParams = _$routeParams;\n\t\t\t\tthis._$tasksmodel = _$tasksmodel;\n\t\t\t\tthis._$listsmodel = _$listsmodel;\n\t\t\t\tthis._$collectionsmodel = _$collectionsmodel;\n\t\t\t\tthis._tasksbusinesslayer = _tasksbusinesslayer;\n\t\t\t\tthis.$location = $location;\n\t\t\t\tthis._settingsbusinesslayer = _settingsbusinesslayer;\n\t\t\t\tthis._searchbusinesslayer = _searchbusinesslayer;\n\t\t\t\tthis._vtodo = vtodo;\n\t\t\t\tthis._$scope.tasks = this._$tasksmodel.getAll();\n\t\t\t\tthis._$scope.draggedTasks = [];\n\t\t\t\tthis._$scope.calendars = this._$listsmodel.getAll();\n\t\t\t\tthis._$scope.days = [0, 1, 2, 3, 4, 5, 6];\n\t\t\t\tthis._$scope.isAddingTask = false;\n\t\t\t\tthis._$scope.focusInputField = false;\n\t\t\t\tthis._$scope.TasksModel = this._$tasksmodel;\n\t\t\t\tthis._$scope.TasksBusinessLayer = this._tasksbusinesslayer;\n\t\t\t\tthis._$settingsmodel = _$settingsmodel;\n\n\t\t\t\tthis._$scope.addTask = function (taskName, related, calendar, parent) {\n\t\t\t\t\tvar _ref,\n\t\t\t\t\t    _this = this;\n\t\t\t\t\tif (calendar === null) {\n\t\t\t\t\t\tcalendar = '';\n\t\t\t\t\t}\n\t\t\t\t\t_$scope.isAddingTask = true;\n\t\t\t\t\tvar task = {\n\t\t\t\t\t\tcalendar: null,\n\t\t\t\t\t\trelated: related,\n\t\t\t\t\t\tsummary: taskName,\n\t\t\t\t\t\tpriority: '0',\n\t\t\t\t\t\tdue: false,\n\t\t\t\t\t\tstart: false,\n\t\t\t\t\t\treminder: null,\n\t\t\t\t\t\tcompleted: false,\n\t\t\t\t\t\tcomplete: '0',\n\t\t\t\t\t\tnote: ''\n\t\t\t\t\t};\n\t\t\t\t\tif ((_ref = _$scope.route.collectionID) === 'starred' || _ref === 'today' || _ref === 'week' || _ref === 'all' || _ref === 'completed' || _ref === 'current') {\n\t\t\t\t\t\tif (related) {\n\t\t\t\t\t\t\ttask.calendar = calendar;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttask.calendar = _$listsmodel.getStandardList();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (_$scope.route.collectionID === 'starred') {\n\t\t\t\t\t\t\ttask.priority = '1';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (_$scope.route.collectionID === 'today') {\n\t\t\t\t\t\t\ttask.due = moment().startOf('day').format(\"YYYY-MM-DDTHH:mm:ss\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (_$scope.route.collectionID === 'current') {\n\t\t\t\t\t\t\ttask.start = moment().format(\"YYYY-MM-DDTHH:mm:ss\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttask.calendar = _$listsmodel.getByUri(_$scope.route.calendarID);\n\t\t\t\t\t}\n\t\t\t\t\ttask = VTodo.create(task);\n\t\t\t\t\t_tasksbusinesslayer.add(task).then(function (task) {\n\t\t\t\t\t\t_$scope.isAddingTask = false;\n\t\t\t\t\t\t_$scope.openDetails(task.uri, null);\n\t\t\t\t\t\treturn $scope.$apply();\n\t\t\t\t\t});\n\t\t\t\t\tif (parent) {\n\t\t\t\t\t\t_tasksbusinesslayer.setHideSubtasks(parent, 0);\n\t\t\t\t\t}\n\t\t\t\t\t_$scope.status.focusTaskInput = false;\n\t\t\t\t\t_$scope.status.focusSubtaskInput = false;\n\t\t\t\t\t_$scope.status.addSubtaskTo = null;\n\t\t\t\t\t_$scope.status.taskName = '';\n\t\t\t\t\t_$scope.status.subtaskName = '';\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.getAddString = function () {\n\t\t\t\t\tvar calendar = _$listsmodel.getStandardList();\n\t\t\t\t\tif (angular.isDefined(calendar)) {\n\t\t\t\t\t\tif (angular.isDefined(_$scope.route.collectionID)) {\n\t\t\t\t\t\t\tswitch (_$scope.route.collectionID) {\n\t\t\t\t\t\t\t\tcase 'starred':\n\t\t\t\t\t\t\t\t\treturn t('tasks', 'Add an important item in \"%s\"...').replace('%s', calendar.displayname);\n\t\t\t\t\t\t\t\tcase 'today':\n\t\t\t\t\t\t\t\t\treturn t('tasks', 'Add an item due today in \"%s\"...').replace('%s', calendar.displayname);\n\t\t\t\t\t\t\t\tcase 'all':\n\t\t\t\t\t\t\t\t\treturn t('tasks', 'Add an item in \"%s\"...').replace('%s', calendar.displayname);\n\t\t\t\t\t\t\t\tcase 'current':\n\t\t\t\t\t\t\t\t\treturn t('tasks', 'Add a current item in \"%s\"...').replace('%s', calendar.displayname);\n\t\t\t\t\t\t\t\tcase 'completed':\n\t\t\t\t\t\t\t\tcase 'week':\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (angular.isDefined(_$listsmodel.getByUri(_$scope.route.calendarID))) {\n\t\t\t\t\t\t\t\treturn t('tasks', 'Add an item in \"%s\"...').replace('%s', _$listsmodel.getByUri(_$scope.route.calendarID).displayname);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.getSubAddString = function (taskname) {\n\t\t\t\t\treturn t('tasks', 'Add a subtask to \"%s\"...').replace('%s', taskname);\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.showSubtaskInput = function (uid) {\n\t\t\t\t\t_$scope.status.addSubtaskTo = uid;\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.hideSubtasks = function (task) {\n\t\t\t\t\tvar taskID = _$scope.route.taskID;\n\t\t\t\t\tvar descendantIDs = _$tasksmodel.getDescendantIDs(task);\n\t\t\t\t\tif (task.uri === taskID) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (__indexOf.call(descendantIDs, taskID) >= 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn task.hideSubtasks;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.showInput = function () {\n\t\t\t\t\tvar collectionID = _$scope.route.collectionID;\n\t\t\t\t\tvar calendar = _$listsmodel.getByUri(_$scope.route.calendarID);\n\t\t\t\t\tif (collectionID === 'completed' || collectionID === 'week') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (angular.isDefined(calendar)) {\n\t\t\t\t\t\treturn calendar.writable;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.focusTaskInput = function () {\n\t\t\t\t\t_$scope.status.focusTaskInput = true;\n\t\t\t\t};\n\t\t\t\tthis._$scope.focusSubtaskInput = function () {\n\t\t\t\t\t_$scope.status.focusSubtaskInput = true;\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.openDetails = function (id, $event) {\n\t\t\t\t\tvar calendarID = _$scope.route.calendarID;\n\t\t\t\t\tvar collectionID = _$scope.route.collectionID;\n\t\t\t\t\tif ($event === null || $($event.currentTarget).is($($event.target).closest('.handler'))) {\n\t\t\t\t\t\tvar parent = _$tasksmodel.getByUri(id);\n\t\t\t\t\t\tif (!parent.loadedCompleted) {\n\t\t\t\t\t\t\t_tasksbusinesslayer.getAll(parent.calendar, true, parent).then(function () {\n\t\t\t\t\t\t\t\tparent.loadedCompleted = true;\n\t\t\t\t\t\t\t\t$scope.$apply();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (calendarID) {\n\t\t\t\t\t\t\t$location.path('/calendars/' + calendarID + '/tasks/' + id);\n\t\t\t\t\t\t} else if (collectionID) {\n\t\t\t\t\t\t\t$location.path('/collections/' + collectionID + '/tasks/' + id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.toggleCompleted = function (task) {\n\t\t\t\t\tif (task.completed) {\n\t\t\t\t\t\t_tasksbusinesslayer.setPercentComplete(task, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_tasksbusinesslayer.setPercentComplete(task, 100);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.toggleStarred = function (task) {\n\t\t\t\t\tif (task.priority > 5) {\n\t\t\t\t\t\t_tasksbusinesslayer.setPriority(task, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_tasksbusinesslayer.setPriority(task, 9);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.toggleHidden = function () {\n\t\t\t\t\treturn _settingsbusinesslayer.toggle('various', 'showHidden');\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.filterTasks = function (task, filter) {\n\t\t\t\t\treturn function (task) {\n\t\t\t\t\t\treturn _$tasksmodel.filterTasks(task, filter);\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.getSubTasks = function (tasks, parent) {\n\t\t\t\t\tvar ret, task, _i, _len;\n\t\t\t\t\tret = [];\n\t\t\t\t\tfor (_i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\t\ttask = tasks[_i];\n\t\t\t\t\t\tif (task.related === parent.uid && task !== parent && !(parent.hideCompletedSubtasks && task.completed)) {\n\t\t\t\t\t\t\tret.push(task);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn ret;\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.hasNoParent = function (task) {\n\t\t\t\t\treturn function (task) {\n\t\t\t\t\t\treturn _$tasksmodel.hasNoParent(task);\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.hasSubtasks = function (task) {\n\t\t\t\t\treturn _$tasksmodel.hasSubtasks(task.uid);\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.hasCompletedSubtasks = function (task) {\n\t\t\t\t\treturn _$tasksmodel.hasCompletedSubtasks(task.uid);\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.toggleSubtasks = function (task) {\n\t\t\t\t\t_tasksbusinesslayer.setHideSubtasks(task, !task.hideSubtasks);\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.toggleCompletedSubtasks = function (task) {\n\t\t\t\t\t_tasksbusinesslayer.setHideCompletedSubtasks(task, !task.hideCompletedSubtasks);\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.filterTasksByString = function (task) {\n\t\t\t\t\treturn function (task) {\n\t\t\t\t\t\tvar filter = _searchbusinesslayer.getFilter();\n\t\t\t\t\t\treturn _$tasksmodel.filterTasksByString(task, filter);\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.filteredTasks = function () {\n\t\t\t\t\tvar filter;\n\t\t\t\t\tfilter = _searchbusinesslayer.getFilter();\n\t\t\t\t\treturn _$tasksmodel.filteredTasks(filter);\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.dayHasEntry = function () {\n\t\t\t\t\treturn function (date) {\n\t\t\t\t\t\tvar filter, task, tasks, _i, _len;\n\t\t\t\t\t\tfilter = _searchbusinesslayer.getFilter();\n\t\t\t\t\t\ttasks = _$tasksmodel.filteredTasks(filter);\n\t\t\t\t\t\tfor (_i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\t\t\ttask = tasks[_i];\n\t\t\t\t\t\t\tif (task.completed || !_$tasksmodel.hasNoParent(task)) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (_$tasksmodel.taskAtDay(task, date)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t\tthis._$scope.taskAtDay = function (task, day) {\n\t\t\t\t\treturn function (task) {\n\t\t\t\t\t\treturn _$tasksmodel.taskAtDay(task, day);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t\tthis._$scope.filterLists = function () {\n\t\t\t\t\treturn function (calendar) {\n\t\t\t\t\t\treturn _$scope.getCount(calendar.uri, _$scope.route.collectionID);\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.getCount = function (calendarID, type) {\n\t\t\t\t\tvar filter = _searchbusinesslayer.getFilter();\n\t\t\t\t\treturn _$listsmodel.getCount(calendarID, type, filter);\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.getCountString = function (calendarID, type) {\n\t\t\t\t\tvar filter = _searchbusinesslayer.getFilter();\n\t\t\t\t\treturn n('tasks', '%n Completed Task', '%n Completed Tasks', _$listsmodel.getCount(calendarID, type, filter));\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.checkTaskInput = function ($event) {\n\t\t\t\t\tif ($event.keyCode === 27) {\n\t\t\t\t\t\t$($event.currentTarget).blur();\n\t\t\t\t\t\t_$scope.status.taskName = '';\n\t\t\t\t\t\t_$scope.status.subtaskName = '';\n\t\t\t\t\t\t_$scope.status.addSubtaskTo = null;\n\t\t\t\t\t\t_$scope.status.focusTaskInput = false;\n\t\t\t\t\t\t_$scope.status.focusSubtaskInput = false;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.getCompletedTasks = function (calendarID) {\n\t\t\t\t\tvar calendar = _$listsmodel.getById(calendarID);\n\t\t\t\t\t_tasksbusinesslayer.getAll(calendar, true).then(function () {\n\t\t\t\t\t\t_$listsmodel.setLoadedCompleted(calendarID);\n\t\t\t\t\t\t$scope.$apply();\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.loadedCompleted = function (calendarID) {\n\t\t\t\t\treturn _$listsmodel.loadedCompleted(calendarID);\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.sortDue = function (task) {\n\t\t\t\t\tif (task.due === null) {\n\t\t\t\t\t\treturn 'last';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn task.due;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.sortStart = function (task) {\n\t\t\t\t\tif (task.start === null) {\n\t\t\t\t\t\treturn 'last';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn task.start;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.getSortOrder = function () {\n\t\t\t\t\tswitch (_$scope.settingsmodel.getById('various').sortOrder) {\n\t\t\t\t\t\tcase 'due':\n\t\t\t\t\t\t\treturn _$scope.sortDue;\n\t\t\t\t\t\tcase 'start':\n\t\t\t\t\t\t\treturn _$scope.sortStart;\n\t\t\t\t\t\tcase 'priority':\n\t\t\t\t\t\t\treturn '-priority';\n\t\t\t\t\t\tcase 'alphabetically':\n\t\t\t\t\t\t\treturn 'summary';\n\t\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t\treturn 'manual';\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn ['completed', _$scope.sortDue, '-priority', _$scope.sortStart, 'summary'];\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.getSortOrderIcon = function () {\n\t\t\t\t\tswitch (_$scope.settingsmodel.getById('various').sortOrder) {\n\t\t\t\t\t\tcase 'due':\n\t\t\t\t\t\tcase 'start':\n\t\t\t\t\t\t\treturn 'ico-calendar';\n\t\t\t\t\t\tcase 'priority':\n\t\t\t\t\t\t\treturn 'ico-star';\n\t\t\t\t\t\tcase 'alphabetically':\n\t\t\t\t\t\t\treturn 'ico-alphabetically';\n\t\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t\treturn 'ico-manual';\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn 'ico-menu';\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.setSortOrder = function ($event, order) {\n\t\t\t\t\t_$scope.settingsmodel.getById('various').sortDirection = _$scope.settingsmodel.getById('various').sortOrder === order ? +!_$scope.settingsmodel.getById('various').sortDirection : 0;\n\t\t\t\t\t_$scope.settingsmodel.getById('various').sortOrder = order;\n\t\t\t\t\t_settingsbusinesslayer.set('various', 'sortOrder', order);\n\t\t\t\t\t_settingsbusinesslayer.set('various', 'sortDirection', _$scope.settingsmodel.getById('various').sortDirection);\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.dropAsSubtask = function ($event, item, index) {\n\t\t\t\t\tif ($event.dataTransfer.dropEffect === 'move') {\n\t\t\t\t\t\tvar parentID = $($event.target).closest('.task-item').attr('taskID');\n\t\t\t\t\t\tvar task = _$tasksmodel.getByUri(item.uri);\n\t\t\t\t\t\tvar parent = _$tasksmodel.getByUri(parentID);\n\t\t\t\t\t\t_tasksbusinesslayer.changeParent(task, parent);\n\t\t\t\t\t}\n\t\t\t\t\t$('.subtasks-container').removeClass('dropzone-visible');\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.dropAsRootTask = function ($event, item, index) {\n\t\t\t\t\tif ($event.dataTransfer.dropEffect === 'move') {\n\t\t\t\t\t\tvar task = _$tasksmodel.getByUri(item.uri);\n\t\t\t\t\t\tvar collectionID = $($event.target).closest('ol[dnd-list]').attr('collectionID');\n\t\t\t\t\t\tvar calendarID = $($event.target).closest('ol[dnd-list]').attr('calendarID');\n\t\t\t\t\t\tvar newCalendar = _$listsmodel.getByUri(calendarID);\n\t\t\t\t\t\tvar queries = _tasksbusinesslayer.makeRootTask(task, newCalendar, collectionID);\n\t\t\t\t\t\tPromise.all(queries).then(function () {\n\t\t\t\t\t\t\t$scope.$apply();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t$('.subtasks-container').removeClass('dropzone-visible');\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.dragover = function ($event, item, index) {\n\t\t\t\t\t$('.subtasks-container').removeClass('dropzone-visible');\n\t\t\t\t\tvar calendarID = $($event.target).closest('ol[dnd-list]').attr('calendarID');\n\t\t\t\t\tvar calendar = _$listsmodel.getByUri(calendarID);\n\t\t\t\t\tif (calendar.writable) {\n\t\t\t\t\t\t$($event.target).closest('.task-item').children('.subtasks-container').addClass('dropzone-visible');\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.allow = function (task) {\n\t\t\t\t\tif (task.calendar.writable) {\n\t\t\t\t\t\treturn \"copyMove\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn \"copy\";\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.dragStart = function ($event) {\n\t\t\t\t\tif ($event.dataTransfer.effectAllowed === 'copy' || $event.dataTransfer.effectAllowed === 'copyMove' && $event.ctrlKey) {\n\t\t\t\t\t\t$($event.target).addClass('copy');\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis._$scope.dragEnd = function ($event) {\n\t\t\t\t\t$($event.target).removeClass('copy');\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn TasksController;\n\t\t}();\n\t\treturn new TasksController($scope, $window, $routeParams, TasksModel, ListsModel, CollectionsModel, TasksBusinessLayer, $location, SettingsBusinessLayer, SearchBusinessLayer, VTodo, SettingsModel);\n\t}]);\n}).call(undefined);","'use strict';\n\nangular.module('Tasks').directive('appNavigationEntryUtils', function () {\n  'use strict';\n\n  return {\n    restrict: 'C',\n    link: function link(scope, elm) {\n      var button, menu;\n      menu = elm.siblings('.app-navigation-entry-menu');\n      button = $(elm).find('.app-navigation-entry-utils-menu-button button');\n      button.click(function () {\n        menu.toggleClass('open');\n      });\n      scope.$on('documentClicked', function (scope, event) {\n        if (event.target !== button[0]) {\n          menu.removeClass('open');\n        }\n      });\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').directive('autofocusOnInsert', function () {\n  'use strict';\n\n  return function (scope, elm) {\n    return elm.focus();\n  };\n});","'use strict';\n\nangular.module('Tasks').directive('avatar', function () {\n  'use strict';\n\n  return {\n    restrict: 'A',\n    scope: false,\n    link: function link(scope, elm, attr) {\n      return attr.$observe('userid', function () {\n        if (attr.userid) {\n          return elm.avatar(attr.userid, attr.size);\n        }\n      });\n    }\n  };\n});","'use strict';\n\nvar hslToRgb = function hslToRgb(hue, saturation, lightness) {\n\t'use strict';\n\t// based on algorithm from http://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\n\n\tif (Array.isArray(hue)) {\n\t\tsaturation = hue[1];\n\t\tlightness = hue[2];\n\t\thue = hue[0];\n\t}\n\tif (hue === undefined) {\n\t\treturn [0, 0, 0];\n\t}\n\tsaturation /= 100;\n\tlightness /= 100;\n\n\tvar chroma = (1 - Math.abs(2 * lightness - 1)) * saturation;\n\tvar huePrime = hue / 60;\n\tvar secondComponent = chroma * (1 - Math.abs(huePrime % 2 - 1));\n\n\thuePrime = Math.floor(huePrime);\n\tvar red;\n\tvar green;\n\tvar blue;\n\n\tif (huePrime === 0) {\n\t\tred = chroma;\n\t\tgreen = secondComponent;\n\t\tblue = 0;\n\t} else if (huePrime === 1) {\n\t\tred = secondComponent;\n\t\tgreen = chroma;\n\t\tblue = 0;\n\t} else if (huePrime === 2) {\n\t\tred = 0;\n\t\tgreen = chroma;\n\t\tblue = secondComponent;\n\t} else if (huePrime === 3) {\n\t\tred = 0;\n\t\tgreen = secondComponent;\n\t\tblue = chroma;\n\t} else if (huePrime === 4) {\n\t\tred = secondComponent;\n\t\tgreen = 0;\n\t\tblue = chroma;\n\t} else if (huePrime === 5) {\n\t\tred = chroma;\n\t\tgreen = 0;\n\t\tblue = secondComponent;\n\t}\n\n\tvar lightnessAdjustment = lightness - chroma / 2;\n\tred += lightnessAdjustment;\n\tgreen += lightnessAdjustment;\n\tblue += lightnessAdjustment;\n\n\treturn [Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255)];\n};\n\nvar rgbToHex = function rgbToHex(r, g, b) {\n\t'use strict';\n\n\tif (Array.isArray(r)) {\n\t\tg = r[1];\n\t\tb = r[2];\n\t\tr = r[0];\n\t}\n\treturn '#' + parseInt(r, 10).toString(16) + parseInt(g, 10).toString(16) + parseInt(b, 10).toString(16);\n};\n\nvar listofcolours = ['#31CC7C', '#317CCC', '#FF7A66', '#F1DB50', '#7C31CC', '#CC317C', '#3A3B3D', '#CACBCD'];\n\nvar randColour = function randColour() {\n\t'use strict';\n\n\tif (typeof String.prototype.toHsl === 'function') {\n\t\treturn rgbToHex(hslToRgb(Math.random().toString().toHsl()));\n\t} else {\n\t\treturn listofcolours[Math.floor(Math.random() * listofcolours.length)];\n\t}\n};\n\nangular.module('Tasks').directive('colorpicker', function () {\n\t'use strict';\n\n\tif (typeof String.prototype.toHsl === 'function') {\n\t\tvar hsl = \"\";\n\t\tvar hslcolour = \"\";\n\t\t//\t\t  0    40   80   120  160  200   240  280  320\n\t\tlistofcolours = [\"15\", \"9\", \"4\", \"b\", \"6\", \"11\", \"74\", \"f\", \"57\"];\n\t\tlistofcolours.forEach(function (hash, index) {\n\t\t\thsl = hash.toHsl();\n\t\t\thslcolour = hslToRgb(hsl);\n\t\t\tlistofcolours[index] = rgbToHex(hslcolour);\n\t\t});\n\t}\n\treturn {\n\t\tscope: {\n\t\t\tselected: '=',\n\t\t\tcustomizedColors: '=colors'\n\t\t},\n\t\trestrict: 'AE',\n\t\ttemplateUrl: OC.filePath('tasks', 'templates', 'colorpicker.html'),\n\t\tlink: function link(scope, element, attr) {\n\t\t\tscope.colors = scope.customizedColors || listofcolours;\n\t\t\tscope.selected = scope.selected || scope.colors[0];\n\t\t\tscope.random = \"#000000\";\n\n\t\t\tscope.randomizeColour = function () {\n\t\t\t\tscope.random = randColour();\n\t\t\t\tscope.pick(scope.random);\n\t\t\t};\n\n\t\t\tscope.pick = function (color) {\n\t\t\t\tscope.selected = color;\n\t\t\t};\n\t\t}\n\t};\n});","'use strict';\n\nangular.module('Tasks').directive('confirmation', function () {\n\t'use strict';\n\n\treturn {\n\t\tpriority: -1,\n\t\trestrict: 'A',\n\t\ttemplateUrl: OC.generateUrl('/apps/tasks/templates/confirmation', {}),\n\t\tscope: {\n\t\t\tconfirmationFunction: \"&confirmation\",\n\t\t\tconfirmationMessage: \"&confirmationMessage\"\n\n\t\t},\n\t\tcontroller: 'ConfirmationController'\n\t};\n});\n\nangular.module('Tasks').controller('ConfirmationController', ['$scope', '$rootScope', '$element', '$attrs', '$compile', '$document', '$window', '$timeout', function ($scope, $rootScope, $element, $attrs, $compile, $document, $window, $timeout) {\n\t'use strict';\n\n\tvar ConfirmationController = function () {\n\t\tfunction ConfirmationController(_$scope, $rootScope, $element, $attrs, $compile, $document, $window, $timeout) {\n\t\t\tthis._$scope = _$scope;\n\t\t\tthis._$scope.countdown = 3;\n\n\t\t\t$element.bind('click', function (e) {\n\t\t\t\t_$scope.countdown = 3;\n\t\t\t\t$element.removeClass('active');\n\t\t\t\tvar message = _$scope.confirmationMessage() ? _$scope.confirmationMessage() : \"Are you sure?\";\n\t\t\t\tif ($element.hasClass('confirmed')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t\t_$scope.activate();\n\t\t\t\t$element.children('.confirmation-confirm').tooltip({ title: message, container: 'body', placement: 'right' });\n\t\t\t\t$element.addClass(\"confirmed\");\n\t\t\t});\n\n\t\t\t$element.children('.confirmation-confirm').bind('click', function (e) {\n\t\t\t\tif ($element.hasClass('confirmed active')) {\n\t\t\t\t\t_$scope.confirmationFunction();\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._$scope.documentClick = function () {\n\t\t\t\t$element.removeClass(\"confirmed\");\n\t\t\t};\n\n\t\t\tthis._$scope.activate = function () {\n\t\t\t\tif (_$scope.countdown) {\n\t\t\t\t\t$element.find('.countdown').html(_$scope.countdown + ' s');\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t_$scope.activate();\n\t\t\t\t\t}, 1000);\n\t\t\t\t\t_$scope.countdown--;\n\t\t\t\t} else {\n\t\t\t\t\t$element.addClass('active');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t$document.bind('click', _$scope.documentClick);\n\t\t\t$document.bind('touchend', _$scope.documentClick);\n\n\t\t\t$scope.$on('$destroy', function () {\n\t\t\t\t$document.unbind('click', _$scope.documentClick);\n\t\t\t\t$document.unbind('touchend', _$scope.documentClick);\n\t\t\t});\n\t\t}\n\t\treturn ConfirmationController;\n\t}();\n\treturn new ConfirmationController($scope, $rootScope, $element, $attrs, $compile, $document, $window, $timeout);\n}]);","'use strict';\n\nangular.module('Tasks').directive('datepicker', function () {\n\t'use strict';\n\n\treturn {\n\t\trestrict: 'A',\n\t\tscope: false,\n\t\tlink: function link(scope, elm, attr) {\n\t\t\treturn elm.datepicker({\n\t\t\t\tonSelect: function onSelect(date, inst) {\n\t\t\t\t\tscope['set' + attr.datepicker + 'day'](date);\n\t\t\t\t\treturn scope.$apply();\n\t\t\t\t},\n\t\t\t\tbeforeShow: function beforeShow(input, inst) {\n\t\t\t\t\tvar dp, marginLeft;\n\t\t\t\t\tdp = $(inst).datepicker('widget');\n\t\t\t\t\tmarginLeft = -Math.abs($(input).outerWidth() - dp.outerWidth()) / 2 + 'px';\n\t\t\t\t\tdp.css({\n\t\t\t\t\t\t'margin-left': marginLeft\n\t\t\t\t\t});\n\t\t\t\t\t$(\"div.ui-datepicker:before\").css({\n\t\t\t\t\t\t'left': 100 + 'px'\n\t\t\t\t\t});\n\t\t\t\t\treturn $('.hasDatepicker').datepicker(\"option\", \"firstDay\", scope.settingsmodel.getById('various').startOfWeek);\n\t\t\t\t},\n\t\t\t\tbeforeShowDay: function beforeShowDay(date) {\n\t\t\t\t\tif (moment(date).startOf('day').diff(moment(scope.task[attr.datepicker], \"YYYYMMDDTHHmmss\").startOf('day'), 'days') === 0) {\n\t\t\t\t\t\treturn [1, \"selected\"];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn [1, \"\"];\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tminDate: null\n\t\t\t});\n\t\t}\n\t};\n});","'use strict';\n\nangular.module('Tasks').directive('ocClickFocus', ['$timeout', function ($timeout) {\n  'use strict';\n\n  return function (scope, elm, attr) {\n    var options;\n    options = scope.$eval(attr.ocClickFocus);\n    if (angular.isDefined(options) && angular.isDefined(options.selector)) {\n      return elm.click(function () {\n        if (angular.isDefined(options.timeout)) {\n          return $timeout(function () {\n            return $(options.selector).focus();\n          }, options.timeout);\n        } else {\n          return $(options.selector).focus();\n        }\n      });\n    }\n  };\n}]);","'use strict';\n\nangular.module('Tasks').directive('timepicker', function () {\n  'use strict';\n\n  return {\n    restrict: 'A',\n    link: function link(scope, elm, attr) {\n      return elm.timepicker({\n        onSelect: function onSelect(date, inst) {\n          scope['set' + attr.timepicker + 'time'](date);\n          return scope.$apply();\n        },\n        myPosition: 'center top',\n        atPosition: 'center bottom',\n        hourText: t('tasks', 'Hours'),\n        minuteText: t('tasks', 'Minutes')\n      });\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').directive('watchTop', function () {\n  'use strict';\n\n  return {\n    restrict: 'A',\n    link: function link(scope, element, attr) {\n      return scope.$watch(function () {\n        scope.divTop = element.prev().outerHeight(true);\n      });\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('counterFormatter', function () {\n  'use strict';\n\n  return function (count) {\n    switch (false) {\n      case count !== 0:\n        return '';\n      case count < 999:\n        return '999+';\n      default:\n        return count;\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('dateDetails', function () {\n  'use strict';\n\n  return function (due) {\n    if (moment(due, \"YYYYMMDDTHHmmss\").isValid()) {\n      return moment(due, \"YYYYMMDDTHHmmss\").locale(due.isDate ? 'details_allday' : 'details').calendar();\n    } else {\n      return t('tasks', 'Set due date');\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('dateDetailsShort', function () {\n  'use strict';\n\n  return function (reminder) {\n    if (moment(reminder, \"YYYYMMDDTHHmmss\").isValid()) {\n      return moment(reminder, \"YYYYMMDDTHHmmss\").locale('details_short').calendar();\n    } else {\n      return '';\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('dateFromNow', function () {\n  'use strict';\n\n  return function (due) {\n    if (moment(due, \"YYYYMMDDTHHmmss\").isValid()) {\n      return moment(due, \"YYYYMMDDTHHmmss\").fromNow();\n    } else {\n      return '';\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('dateTaskList', function () {\n  'use strict';\n\n  return function (due) {\n    if (moment(due, \"YYYYMMDDTHHmmss\").isValid()) {\n      return moment(due, \"YYYYMMDDTHHmmss\").locale('tasks').calendar();\n    } else {\n      return '';\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('day', function () {\n  'use strict';\n\n  return function (i) {\n    return moment().add('days', i).locale('list_week').calendar();\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('dayTaskList', function () {\n  'use strict';\n\n  return function (due) {\n    if (moment(due, \"YYYYMMDDTHHmmss\").isValid()) {\n      return moment(due, \"YYYYMMDDTHHmmss\").locale('tasks').calendar();\n    } else {\n      return '';\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('percentDetails', function () {\n  'use strict';\n\n  return function (percent) {\n    return t('tasks', '%s %% completed').replace('%s', percent).replace('%%', '%');\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('priorityDetails', function () {\n  'use strict';\n\n  return function (priority) {\n    var string;\n    string = t('tasks', 'priority %s: ').replace('%s', priority);\n    if (+priority === 6 || +priority === 7 || +priority === 8 || +priority === 9) {\n      return string + ' ' + t('tasks', 'high');\n    } else if (+priority === 5) {\n      return string + ' ' + t('tasks', 'medium');\n    } else if (+priority === 1 || +priority === 2 || +priority === 3 || +priority === 4) {\n      return string + ' ' + t('tasks', 'low');\n    } else {\n      return t('tasks', 'no priority assigned');\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('reminderDetails', function () {\n\t'use strict';\n\n\treturn function (reminder, scope) {\n\t\tfunction before(related) {\n\t\t\tif (related === 'END') {\n\t\t\t\treturn ' ' + t('tasks', 'before end');\n\t\t\t} else {\n\t\t\t\treturn ' ' + t('tasks', 'before beginning');\n\t\t\t}\n\t\t}\n\t\tfunction after(related) {\n\t\t\tif (related === 'END') {\n\t\t\t\treturn ' ' + t('tasks', 'after end');\n\t\t\t} else {\n\t\t\t\treturn ' ' + t('tasks', 'after beginning');\n\t\t\t}\n\t\t}\n\t\tfunction tokenName(reminder, token) {\n\t\t\tif (+reminder.duration[token.id] === 1) {\n\t\t\t\treturn token.name;\n\t\t\t} else {\n\t\t\t\treturn token.names;\n\t\t\t}\n\t\t}\n\t\tvar ds, time, token, _ref;\n\t\tif (!(angular.isUndefined(reminder) || reminder === null)) {\n\t\t\tif (reminder.type === 'DATE-TIME' && moment(reminder.date, \"YYYYMMDDTHHmmss\").isValid()) {\n\t\t\t\treturn moment(reminder.date, \"YYYYMMDDTHHmmss\").locale('reminder').calendar();\n\t\t\t} else if (reminder.type === 'DURATION' && reminder.duration) {\n\t\t\t\tds = t('tasks', 'Remind me');\n\t\t\t\t_ref = scope.durations;\n\t\t\t\tfor (var _i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\ttoken = _ref[_i];\n\t\t\t\t\tif (+reminder.duration[token.id]) {\n\t\t\t\t\t\ttime = 1;\n\t\t\t\t\t\tds += ' ' + reminder.duration[token.id] + ' ';\n\t\t\t\t\t\tds += tokenName(reminder, token);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!time) {\n\t\t\t\t\tif (reminder.duration.params.related === 'END') {\n\t\t\t\t\t\tds += ' ' + t('tasks', 'at the end');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tds += ' ' + t('tasks', 'at the beginning');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (reminder.duration.params.invert) {\n\t\t\t\t\t\tds += before(reminder.duration.params.related);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tds += after(reminder.duration.params.related);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ds;\n\t\t\t} else {\n\t\t\t\treturn t('tasks', 'Remind me');\n\t\t\t}\n\t\t} else {\n\t\t\treturn t('tasks', 'Remind me');\n\t\t}\n\t};\n});","'use strict';\n\nangular.module('Tasks').filter('startDetails', function () {\n  'use strict';\n\n  return function (due) {\n    if (moment(due, \"YYYYMMDDTHHmmss\").isValid()) {\n      return moment(due, \"YYYYMMDDTHHmmss\").locale(due.isDate ? 'start_allday' : 'start').calendar();\n    } else {\n      return t('tasks', 'Set start date');\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').filter('timeTaskList', function () {\n  'use strict';\n\n  return function (due) {\n    if (moment(due, \"YYYYMMDDTHHmmss\").isValid()) {\n      return moment(due, \"YYYYMMDDTHHmmss\").format('HH:mm');\n    } else {\n      return '';\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').service('CalendarService', ['DavClient', 'Calendar', function (DavClient, Calendar) {\n\t'use strict';\n\n\tvar _this = this;\n\n\tthis._CALENDAR_HOME = null;\n\n\tthis._currentUserPrincipal = null;\n\n\tthis._takenUrls = [];\n\n\tthis._PROPERTIES = ['{' + DavClient.NS_DAV + '}displayname', '{' + DavClient.NS_IETF + '}calendar-description', '{' + DavClient.NS_IETF + '}calendar-timezone', '{' + DavClient.NS_APPLE + '}calendar-order', '{' + DavClient.NS_APPLE + '}calendar-color', '{' + DavClient.NS_IETF + '}supported-calendar-component-set', '{' + DavClient.NS_OWNCLOUD + '}calendar-enabled', '{' + DavClient.NS_DAV + '}acl', '{' + DavClient.NS_DAV + '}owner', '{' + DavClient.NS_OWNCLOUD + '}invite'];\n\n\tfunction discoverHome(callback) {\n\t\treturn DavClient.propFind(DavClient.buildUrl(OC.linkToRemoteBase('dav')), ['{' + DavClient.NS_DAV + '}current-user-principal'], 0, { 'requesttoken': OC.requestToken }).then(function (response) {\n\t\t\tif (!DavClient.wasRequestSuccessful(response.status)) {\n\t\t\t\tthrow \"CalDAV client could not be initialized - Querying current-user-principal failed\";\n\t\t\t}\n\n\t\t\tif (response.body.propStat.length < 1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar props = response.body.propStat[0].properties;\n\t\t\t_this._currentUserPrincipal = props['{' + DavClient.NS_DAV + '}current-user-principal'][0].textContent;\n\n\t\t\treturn DavClient.propFind(DavClient.buildUrl(_this._currentUserPrincipal), ['{' + DavClient.NS_IETF + '}calendar-home-set'], 0, { 'requesttoken': OC.requestToken }).then(function (response) {\n\t\t\t\tif (!DavClient.wasRequestSuccessful(response.status)) {\n\t\t\t\t\tthrow \"CalDAV client could not be initialized - Querying calendar-home-set failed\";\n\t\t\t\t}\n\n\t\t\t\tif (response.body.propStat.length < 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar props = response.body.propStat[0].properties;\n\t\t\t\t_this._CALENDAR_HOME = props['{' + DavClient.NS_IETF + '}calendar-home-set'][0].textContent;\n\n\t\t\t\treturn callback();\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction getResponseCodeFromHTTPResponse(t) {\n\t\treturn parseInt(t.split(' ')[1]);\n\t}\n\n\tthis.getAll = function () {\n\t\tif (this._CALENDAR_HOME === null) {\n\t\t\treturn discoverHome(function () {\n\t\t\t\treturn _this.getAll();\n\t\t\t});\n\t\t}\n\n\t\tvar prom = DavClient.propFind(DavClient.buildUrl(this._CALENDAR_HOME), this._PROPERTIES, 1, { 'requesttoken': OC.requestToken }).then(function (response) {\n\t\t\tvar calendars = [];\n\n\t\t\tif (!DavClient.wasRequestSuccessful(response.status)) {\n\t\t\t\tthrow \"CalDAV client could not be initialized - Querying calendars failed\";\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < response.body.length; i++) {\n\t\t\t\tvar body = response.body[i];\n\t\t\t\tif (body.propStat.length < 1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t_this._takenUrls.push(body.href);\n\n\t\t\t\tvar responseCode = getResponseCodeFromHTTPResponse(body.propStat[0].status);\n\t\t\t\tif (!DavClient.wasRequestSuccessful(responseCode)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar doesSupportVTodo = false;\n\t\t\t\tvar components = body.propStat[0].properties['{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set'];\n\t\t\t\tif (components) {\n\t\t\t\t\tfor (var j = 0; j < components.length; j++) {\n\t\t\t\t\t\tvar name = components[j].attributes.getNamedItem('name').textContent.toLowerCase();\n\t\t\t\t\t\tif (name === 'vtodo') {\n\t\t\t\t\t\t\tdoesSupportVTodo = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!doesSupportVTodo) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t_this._getACLFromResponse(body);\n\n\t\t\t\tvar uri = body.href.substr(_this._CALENDAR_HOME.length).replace(/[^\\w\\-]+/g, '');\n\n\t\t\t\tvar calendar = new Calendar(body.href, body.propStat[0].properties, uri);\n\t\t\t\tcalendars.push(calendar);\n\t\t\t}\n\n\t\t\treturn calendars;\n\t\t});\n\t\treturn prom;\n\t};\n\n\tthis.get = function (url) {\n\t\tif (this._CALENDAR_HOME === null) {\n\t\t\treturn discoverHome(function () {\n\t\t\t\treturn _this.get(url);\n\t\t\t});\n\t\t}\n\n\t\treturn DavClient.propFind(DavClient.buildUrl(url), this._PROPERTIES, 0, { 'requesttoken': OC.requestToken }).then(function (response) {\n\t\t\tvar body = response.body;\n\t\t\tif (body.propStat.length < 1) {\n\t\t\t\t//TODO - something went wrong\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar responseCode = getResponseCodeFromHTTPResponse(body.propStat[0].status);\n\t\t\tif (!DavClient.wasRequestSuccessful(responseCode)) {\n\t\t\t\t//TODO - something went wrong\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_this._getACLFromResponse(body);\n\n\t\t\tvar uri = body.href.substr(_this._CALENDAR_HOME.length).replace(/[^\\w\\-]+/g, '');\n\n\t\t\treturn new Calendar(body.href, body.propStat[0].properties, uri);\n\t\t});\n\t};\n\n\tthis.create = function (name, color, components) {\n\t\tif (this._CALENDAR_HOME === null) {\n\t\t\treturn discoverHome(function () {\n\t\t\t\treturn _this.create(name, color);\n\t\t\t});\n\t\t}\n\n\t\tif (typeof components === 'undefined') {\n\t\t\tcomponents = ['vtodo'];\n\t\t}\n\n\t\tvar xmlDoc = document.implementation.createDocument('', '', null);\n\t\tvar cMkcalendar = xmlDoc.createElement('c:mkcalendar');\n\t\tcMkcalendar.setAttribute('xmlns:c', 'urn:ietf:params:xml:ns:caldav');\n\t\tcMkcalendar.setAttribute('xmlns:d', 'DAV:');\n\t\tcMkcalendar.setAttribute('xmlns:a', 'http://apple.com/ns/ical/');\n\t\tcMkcalendar.setAttribute('xmlns:o', 'http://owncloud.org/ns');\n\t\txmlDoc.appendChild(cMkcalendar);\n\n\t\tvar dSet = xmlDoc.createElement('d:set');\n\t\tcMkcalendar.appendChild(dSet);\n\n\t\tvar dProp = xmlDoc.createElement('d:prop');\n\t\tdSet.appendChild(dProp);\n\n\t\tdProp.appendChild(this._createXMLForProperty(xmlDoc, 'displayname', name));\n\t\tdProp.appendChild(this._createXMLForProperty(xmlDoc, 'enabled', true));\n\t\tdProp.appendChild(this._createXMLForProperty(xmlDoc, 'color', color));\n\t\tdProp.appendChild(this._createXMLForProperty(xmlDoc, 'components', components));\n\n\t\tvar body = cMkcalendar.outerHTML;\n\n\t\tvar uri = this._suggestUri(name);\n\t\tvar url = this._CALENDAR_HOME + uri + '/';\n\t\tvar headers = {\n\t\t\t'Content-Type': 'application/xml; charset=utf-8',\n\t\t\t'requesttoken': OC.requestToken\n\t\t};\n\n\t\treturn DavClient.request('MKCALENDAR', url, headers, body).then(function (response) {\n\t\t\tif (response.status === 201) {\n\t\t\t\t_this._takenUrls.push(url);\n\t\t\t\treturn _this.get(url).then(function (calendar) {\n\t\t\t\t\tcalendar.enabled = true;\n\t\t\t\t\treturn _this.update(calendar);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.update = function (calendar) {\n\t\tvar xmlDoc = document.implementation.createDocument('', '', null);\n\t\tvar dPropUpdate = xmlDoc.createElement('d:propertyupdate');\n\t\tdPropUpdate.setAttribute('xmlns:c', 'urn:ietf:params:xml:ns:caldav');\n\t\tdPropUpdate.setAttribute('xmlns:d', 'DAV:');\n\t\tdPropUpdate.setAttribute('xmlns:a', 'http://apple.com/ns/ical/');\n\t\tdPropUpdate.setAttribute('xmlns:o', 'http://owncloud.org/ns');\n\t\txmlDoc.appendChild(dPropUpdate);\n\n\t\tvar dSet = xmlDoc.createElement('d:set');\n\t\tdPropUpdate.appendChild(dSet);\n\n\t\tvar dProp = xmlDoc.createElement('d:prop');\n\t\tdSet.appendChild(dProp);\n\n\t\tvar updatedProperties = calendar.updatedProperties;\n\t\tcalendar.resetUpdatedProperties();\n\t\tfor (var i = 0; i < updatedProperties.length; i++) {\n\t\t\tdProp.appendChild(this._createXMLForProperty(xmlDoc, updatedProperties[i], calendar[updatedProperties[i]]));\n\t\t}\n\n\t\tvar url = calendar.url;\n\t\tvar body = dPropUpdate.outerHTML;\n\t\tvar headers = {\n\t\t\t'Content-Type': 'application/xml; charset=utf-8',\n\t\t\t'requesttoken': OC.requestToken\n\t\t};\n\n\t\treturn DavClient.request('PROPPATCH', url, headers, body).then(function (response) {\n\t\t\treturn calendar;\n\t\t});\n\t};\n\n\tthis.delete = function (calendar) {\n\t\treturn DavClient.request('DELETE', calendar.url, { 'requesttoken': OC.requestToken }, '').then(function (response) {\n\t\t\tif (response.status === 204) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\t// TODO - handle error case\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.share = function (calendar, shareType, shareWith, writable, existingShare) {\n\t\tvar xmlDoc = document.implementation.createDocument('', '', null);\n\t\tvar oShare = xmlDoc.createElement('o:share');\n\t\toShare.setAttribute('xmlns:d', 'DAV:');\n\t\toShare.setAttribute('xmlns:o', 'http://owncloud.org/ns');\n\t\txmlDoc.appendChild(oShare);\n\n\t\tvar oSet = xmlDoc.createElement('o:set');\n\t\toShare.appendChild(oSet);\n\n\t\tvar dHref = xmlDoc.createElement('d:href');\n\t\tif (shareType === OC.Share.SHARE_TYPE_USER) {\n\t\t\tdHref.textContent = 'principal:principals/users/';\n\t\t} else if (shareType === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\tdHref.textContent = 'principal:principals/groups/';\n\t\t}\n\t\tdHref.textContent += shareWith;\n\t\toSet.appendChild(dHref);\n\n\t\tvar oSummary = xmlDoc.createElement('o:summary');\n\t\toSummary.textContent = t('calendar', '{calendar} shared by {owner}', {\n\t\t\tcalendar: calendar.displayname,\n\t\t\towner: calendar.owner\n\t\t});\n\t\toSet.appendChild(oSummary);\n\n\t\tif (writable) {\n\t\t\tvar oRW = xmlDoc.createElement('o:read-write');\n\t\t\toSet.appendChild(oRW);\n\t\t}\n\n\t\tvar headers = {\n\t\t\t'Content-Type': 'application/xml; charset=utf-8',\n\t\t\trequesttoken: oc_requesttoken\n\t\t};\n\t\tvar body = oShare.outerHTML;\n\t\treturn DavClient.request('POST', calendar.url, headers, body).then(function (response) {\n\t\t\tif (response.status === 200) {\n\t\t\t\tif (!existingShare) {\n\t\t\t\t\tif (shareType === OC.Share.SHARE_TYPE_USER) {\n\t\t\t\t\t\tcalendar.sharedWith.users.push({\n\t\t\t\t\t\t\tid: shareWith,\n\t\t\t\t\t\t\tdisplayname: shareWith,\n\t\t\t\t\t\t\twritable: writable\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\t\t\t\tcalendar.sharedWith.groups.push({\n\t\t\t\t\t\t\tid: shareWith,\n\t\t\t\t\t\t\tdisplayname: shareWith,\n\t\t\t\t\t\t\twritable: writable\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.unshare = function (calendar, shareType, shareWith) {\n\t\tvar xmlDoc = document.implementation.createDocument('', '', null);\n\t\tvar oShare = xmlDoc.createElement('o:share');\n\t\toShare.setAttribute('xmlns:d', 'DAV:');\n\t\toShare.setAttribute('xmlns:o', 'http://owncloud.org/ns');\n\t\txmlDoc.appendChild(oShare);\n\n\t\tvar oRemove = xmlDoc.createElement('o:remove');\n\t\toShare.appendChild(oRemove);\n\n\t\tvar dHref = xmlDoc.createElement('d:href');\n\t\tif (shareType === OC.Share.SHARE_TYPE_USER) {\n\t\t\tdHref.textContent = 'principal:principals/users/';\n\t\t} else if (shareType === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\tdHref.textContent = 'principal:principals/groups/';\n\t\t}\n\t\tdHref.textContent += shareWith;\n\t\toRemove.appendChild(dHref);\n\n\t\tvar headers = {\n\t\t\t'Content-Type': 'application/xml; charset=utf-8',\n\t\t\trequesttoken: oc_requesttoken\n\t\t};\n\t\tvar body = oShare.outerHTML;\n\t\treturn DavClient.request('POST', calendar.url, headers, body).then(function (response) {\n\t\t\tif (response.status === 200) {\n\t\t\t\tif (shareType === OC.Share.SHARE_TYPE_USER) {\n\t\t\t\t\tcalendar.sharedWith.users = calendar.sharedWith.users.filter(function (user) {\n\t\t\t\t\t\treturn user.id !== shareWith;\n\t\t\t\t\t});\n\t\t\t\t} else if (shareType === OC.Share.SHARE_TYPE_GROUP) {\n\t\t\t\t\tcalendar.sharedWith.groups = calendar.sharedWith.groups.filter(function (groups) {\n\t\t\t\t\t\treturn groups.id !== shareWith;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t//todo - remove entry from calendar object\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t};\n\n\tthis._createXMLForProperty = function (xmlDoc, propName, value) {\n\t\tswitch (propName) {\n\t\t\tcase 'enabled':\n\t\t\t\tvar oEnabled = xmlDoc.createElement('o:calendar-enabled');\n\t\t\t\toEnabled.textContent = value ? '1' : '0';\n\t\t\t\treturn oEnabled;\n\n\t\t\tcase 'displayname':\n\t\t\t\tvar dDisplayname = xmlDoc.createElement('d:displayname');\n\t\t\t\tdDisplayname.textContent = value;\n\t\t\t\treturn dDisplayname;\n\n\t\t\tcase 'order':\n\t\t\t\tvar aOrder = xmlDoc.createElement('a:calendar-color');\n\t\t\t\taOrder.textContent = value;\n\t\t\t\treturn aOrder;\n\n\t\t\tcase 'color':\n\t\t\t\tvar aColor = xmlDoc.createElement('a:calendar-color');\n\t\t\t\taColor.textContent = value;\n\t\t\t\treturn aColor;\n\n\t\t\tcase 'components':\n\t\t\t\tvar cComponents = xmlDoc.createElement('c:supported-calendar-component-set');\n\t\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\t\tvar cComp = xmlDoc.createElement('c:comp');\n\t\t\t\t\tcComp.setAttribute('name', value[i].toUpperCase());\n\t\t\t\t\tcComponents.appendChild(cComp);\n\t\t\t\t}\n\t\t\t\treturn cComponents;\n\t\t}\n\t};\n\n\tthis._getACLFromResponse = function (body) {\n\t\tvar canWrite = false;\n\t\tvar acl = body.propStat[0].properties['{' + DavClient.NS_DAV + '}acl'];\n\t\tif (acl) {\n\t\t\tfor (var k = 0; k < acl.length; k++) {\n\t\t\t\tvar href = acl[k].getElementsByTagNameNS('DAV:', 'href');\n\t\t\t\tif (href.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\thref = href[0].textContent;\n\t\t\t\tif (href !== _this._currentUserPrincipal) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar writeNode = acl[k].getElementsByTagNameNS('DAV:', 'write');\n\t\t\t\tif (writeNode.length > 0) {\n\t\t\t\t\tcanWrite = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tbody.propStat[0].properties.canWrite = canWrite;\n\t};\n\n\tthis._isUriAlreadyTaken = function (uri) {\n\t\treturn this._takenUrls.indexOf(this._CALENDAR_HOME + uri + '/') !== -1;\n\t};\n\n\tthis._suggestUri = function (displayname) {\n\t\tvar uri = displayname.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n\t\t.replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n\t\t.replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n\t\t.replace(/^-+/, '') // Trim - from start of text\n\t\t.replace(/-+$/, ''); // Trim - from end of text\n\n\t\tif (!this._isUriAlreadyTaken(uri)) {\n\t\t\treturn uri;\n\t\t}\n\n\t\tif (uri.indexOf('-') === -1) {\n\t\t\turi = uri + '-1';\n\t\t\tif (!this._isUriAlreadyTaken(uri)) {\n\t\t\t\treturn uri;\n\t\t\t}\n\t\t}\n\n\t\twhile (this._isUriAlreadyTaken(uri)) {\n\t\t\tvar positionLastDash = uri.lastIndexOf('-');\n\t\t\tvar firstPart = uri.substr(0, positionLastDash);\n\t\t\tvar lastPart = uri.substr(positionLastDash + 1);\n\n\t\t\tif (lastPart.match(/^\\d+$/)) {\n\t\t\t\tlastPart = parseInt(lastPart);\n\t\t\t\tlastPart++;\n\n\t\t\t\turi = firstPart + '-' + lastPart;\n\t\t\t} else if (lastPart === '') {\n\t\t\t\turi = uri + '1';\n\t\t\t} else {\n\t\t\t\turi = uri = '-1';\n\t\t\t}\n\t\t}\n\n\t\treturn uri;\n\t};\n}]);","'use strict';\n\nangular.module('Tasks').service('DavClient', [function () {\n\t'use strict';\n\n\tvar client;\n\tclient = new dav.Client({\n\t\tbaseUrl: OC.linkToRemote('dav/calendars'),\n\t\txmlNamespaces: {\n\t\t\t'DAV:': 'd',\n\t\t\t'urn:ietf:params:xml:ns:caldav': 'c',\n\t\t\t'http://apple.com/ns/ical/': 'aapl',\n\t\t\t'http://owncloud.org/ns': 'oc',\n\t\t\t'http://nextcloud.com/ns': 'nc',\n\t\t\t'http://calendarserver.org/ns/': 'cs'\n\t\t}\n\t});\n\tangular.extend(client, {\n\t\tNS_DAV: 'DAV:',\n\t\tNS_IETF: 'urn:ietf:params:xml:ns:caldav',\n\t\tNS_APPLE: 'http://apple.com/ns/ical/',\n\t\tNS_OWNCLOUD: 'http://owncloud.org/ns',\n\t\tNS_NEXTCLOUD: 'http://nextcloud.com/ns',\n\t\tNS_CALENDARSERVER: 'http://calendarserver.org/ns/',\n\t\tbuildUrl: function buildUrl(path) {\n\t\t\treturn window.location.protocol + '//' + window.location.host + path;\n\t\t},\n\t\twasRequestSuccessful: function wasRequestSuccessful(status) {\n\t\t\treturn status >= 200 && status <= 299;\n\t\t}\n\t});\n\treturn client;\n}]);","'use strict';\n\nangular.module('Tasks').service('ICalFactory', [function () {\n  'use strict';\n\n  // creates a new ICAL root element with a product id property\n\n  return {\n    new: function _new() {\n      var root = new ICAL.Component(['vcalendar', [], []]);\n\n      var version = angular.element('#app').attr('data-appVersion');\n      root.updatePropertyWithValue('prodid', '-//Nextcloud Tasks v' + version);\n\n      return root;\n    }\n  };\n}]);","'use strict';\n\nangular.module('Tasks').factory('Loading', [function () {\n\t'use strict';\n\n\tvar Loading = function () {\n\t\tfunction Loading() {\n\t\t\tthis.count = 0;\n\t\t}\n\n\t\tLoading.prototype.increase = function () {\n\t\t\treturn this.count += 1;\n\t\t};\n\n\t\tLoading.prototype.decrease = function () {\n\t\t\treturn this.count -= 1;\n\t\t};\n\n\t\tLoading.prototype.getCount = function () {\n\t\t\treturn this.count;\n\t\t};\n\n\t\tLoading.prototype.isLoading = function () {\n\t\t\treturn this.count > 0;\n\t\t};\n\n\t\treturn Loading;\n\t}();\n\treturn new Loading();\n}]);","'use strict';\n\n(function () {\n\t'use strict';\n\n\tangular.module('Tasks').factory('_Model', [function () {\n\t\tvar Model;\n\t\tModel = function () {\n\t\t\tfunction Model() {\n\t\t\t\tthis._data = [];\n\t\t\t\tthis._dataMap = {};\n\t\t\t\tthis._filterCache = {};\n\t\t\t}\n\n\t\t\tModel.prototype.handle = function (data) {\n\t\t\t\tvar item, _i, _len, _results;\n\t\t\t\t_results = [];\n\t\t\t\tfor (_i = 0, _len = data.length; _i < _len; _i++) {\n\t\t\t\t\titem = data[_i];\n\t\t\t\t\t_results.push(this.add(item));\n\t\t\t\t}\n\t\t\t\treturn _results;\n\t\t\t};\n\n\t\t\tModel.prototype.add = function (data, clearCache) {\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\tif (clearCache) {\n\t\t\t\t\tthis._invalidateCache();\n\t\t\t\t}\n\t\t\t\tif (angular.isDefined(this._dataMap[data.id])) {\n\t\t\t\t\treturn this.update(data, clearCache);\n\t\t\t\t} else {\n\t\t\t\t\tthis._data.push(data);\n\t\t\t\t\tthis._dataMap[data.id] = data;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tModel.prototype.update = function (data, clearCache) {\n\t\t\t\tvar entry, key, value, _results;\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\tif (clearCache) {\n\t\t\t\t\tthis._invalidateCache();\n\t\t\t\t}\n\t\t\t\tentry = this.getById(data.id);\n\t\t\t\t_results = [];\n\t\t\t\tfor (key in data) {\n\t\t\t\t\tvalue = data[key];\n\t\t\t\t\tif (key === 'id') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_results.push(entry[key] = value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _results;\n\t\t\t};\n\n\t\t\tModel.prototype.getById = function (id) {\n\t\t\t\treturn this._dataMap[id];\n\t\t\t};\n\n\t\t\tModel.prototype.getAll = function () {\n\t\t\t\treturn this._data;\n\t\t\t};\n\n\t\t\tModel.prototype.removeById = function (id, clearCache) {\n\t\t\t\tvar counter, data, entry, _i, _len, _ref;\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\t_ref = this._data;\n\t\t\t\tfor (counter = _i = 0, _len = _ref.length; _i < _len; counter = ++_i) {\n\t\t\t\t\tentry = _ref[counter];\n\t\t\t\t\tif (entry.id === id) {\n\t\t\t\t\t\tthis._data.splice(counter, 1);\n\t\t\t\t\t\tdata = this._dataMap[id];\n\t\t\t\t\t\tdelete this._dataMap[id];\n\t\t\t\t\t\tif (clearCache) {\n\t\t\t\t\t\t\tthis._invalidateCache();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tModel.prototype.clear = function () {\n\t\t\t\tthis._data.length = 0;\n\t\t\t\tthis._dataMap = {};\n\t\t\t\treturn this._invalidateCache();\n\t\t\t};\n\n\t\t\tModel.prototype._invalidateCache = function () {\n\t\t\t\tthis._filterCache = {};\n\t\t\t};\n\n\t\t\tModel.prototype.get = function (query) {\n\t\t\t\tvar hash;\n\t\t\t\thash = query.hashCode();\n\t\t\t\tif (!angular.isDefined(this._filterCache[hash])) {\n\t\t\t\t\tthis._filterCache[hash] = query.exec(this._data);\n\t\t\t\t}\n\t\t\t\treturn this._filterCache[hash];\n\t\t\t};\n\n\t\t\tModel.prototype.size = function () {\n\t\t\t\treturn this._data.length;\n\t\t\t};\n\n\t\t\treturn Model;\n\t\t}();\n\t\treturn Model;\n\t}]);\n}).call(undefined);","'use strict';\n\nangular.module('Tasks').factory('Persistence', ['Request', 'Loading', '$rootScope', '$q', 'CalendarService', function (Request, Loading, $rootScope, $q, CalendarService) {\n\t'use strict';\n\n\tvar Persistence = function () {\n\t\tfunction Persistence(_request, _Loading, _$rootScope, _CalendarService) {\n\t\t\tthis._request = _request;\n\t\t\tthis._Loading = _Loading;\n\t\t\tthis._$rootScope = _$rootScope;\n\t\t\tthis._CalendarService = _CalendarService;\n\t\t}\n\n\t\tPersistence.prototype.init = function () {\n\t\t\tvar successCallback,\n\t\t\t    _this = this;\n\t\t\tthis.deferred = $q.defer();\n\t\t\tsuccessCallback = function successCallback() {\n\t\t\t\treturn _this.deferred.resolve();\n\t\t\t};\n\t\t\tthis.getCollections();\n\t\t\tthis.getSettings();\n\t\t\treturn this.deferred.promise;\n\t\t};\n\n\t\tPersistence.prototype.getCollections = function (onSuccess, showLoading) {\n\t\t\tvar failureCallbackWrapper,\n\t\t\t    params,\n\t\t\t    successCallbackWrapper,\n\t\t\t    _this = this;\n\t\t\tif (showLoading === null) {\n\t\t\t\tshowLoading = true;\n\t\t\t}\n\t\t\tif (!onSuccess) {\n\t\t\t\tonSuccess = function onSuccess() {};\n\t\t\t}\n\t\t\tif (showLoading) {\n\t\t\t\tthis._Loading.increase();\n\t\t\t\tsuccessCallbackWrapper = function successCallbackWrapper(data) {\n\t\t\t\t\tonSuccess();\n\t\t\t\t\treturn _this._Loading.decrease();\n\t\t\t\t};\n\t\t\t\tfailureCallbackWrapper = function failureCallbackWrapper(data) {\n\t\t\t\t\treturn _this._Loading.decrease();\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tsuccessCallbackWrapper = function successCallbackWrapper(data) {\n\t\t\t\t\treturn onSuccess();\n\t\t\t\t};\n\t\t\t\tfailureCallbackWrapper = function failureCallbackWrapper(data) {};\n\t\t\t}\n\t\t\tparams = {\n\t\t\t\tonSuccess: successCallbackWrapper,\n\t\t\t\tonFailure: failureCallbackWrapper\n\t\t\t};\n\t\t\treturn this._request.get('/apps/tasks/collections', params);\n\t\t};\n\n\t\tPersistence.prototype.getSettings = function (onSuccess, showLoading) {\n\t\t\tvar failureCallbackWrapper,\n\t\t\t    params,\n\t\t\t    successCallbackWrapper,\n\t\t\t    _this = this;\n\t\t\tif (showLoading === null) {\n\t\t\t\tshowLoading = true;\n\t\t\t}\n\t\t\tif (!onSuccess) {\n\t\t\t\tonSuccess = function onSuccess() {};\n\t\t\t}\n\t\t\tif (showLoading) {\n\t\t\t\tthis._Loading.increase();\n\t\t\t\tsuccessCallbackWrapper = function successCallbackWrapper(data) {\n\t\t\t\t\tonSuccess();\n\t\t\t\t\treturn _this._Loading.decrease();\n\t\t\t\t};\n\t\t\t\tfailureCallbackWrapper = function failureCallbackWrapper(data) {\n\t\t\t\t\treturn _this._Loading.decrease();\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tsuccessCallbackWrapper = function successCallbackWrapper(data) {\n\t\t\t\t\treturn onSuccess();\n\t\t\t\t};\n\t\t\t\tfailureCallbackWrapper = function failureCallbackWrapper(data) {};\n\t\t\t}\n\t\t\tparams = {\n\t\t\t\tonSuccess: successCallbackWrapper,\n\t\t\t\tonFailure: failureCallbackWrapper\n\t\t\t};\n\t\t\treturn this._request.get('/apps/tasks/settings', params);\n\t\t};\n\n\t\tPersistence.prototype.setVisibility = function (collectionID, visibility) {\n\t\t\tvar params = {\n\t\t\t\trouteParams: {\n\t\t\t\t\tcollectionID: collectionID,\n\t\t\t\t\tvisibility: visibility\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn this._request.post('/apps/tasks/collection/{collectionID}/visibility/{visibility}', params);\n\t\t};\n\n\t\tPersistence.prototype.setting = function (type, setting, value) {\n\t\t\tvar params = {\n\t\t\t\trouteParams: {\n\t\t\t\t\ttype: type,\n\t\t\t\t\tsetting: setting,\n\t\t\t\t\tvalue: value\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn this._request.post('/apps/tasks/settings/{type}/{setting}/{value}', params);\n\t\t};\n\t\treturn Persistence;\n\t}();\n\treturn new Persistence(Request, Loading, $rootScope, CalendarService);\n}]);","'use strict';\n\nangular.module('Tasks').factory('Publisher', ['CollectionsModel', 'SettingsModel', function (CollectionsModel, SettingsModel) {\n\t'use strict';\n\n\tvar Publisher = function () {\n\t\tfunction Publisher(_$collectionsmodel, _$settingsmodel) {\n\t\t\tthis._$collectionsmodel = _$collectionsmodel;\n\t\t\tthis._$settingsmodel = _$settingsmodel;\n\t\t\tthis._subscriptions = {};\n\t\t\tthis.subscribeObjectTo(this._$collectionsmodel, 'collections');\n\t\t\tthis.subscribeObjectTo(this._$settingsmodel, 'settings');\n\t\t}\n\n\t\tPublisher.prototype.subscribeObjectTo = function (object, name) {\n\t\t\tvar base = this._subscriptions;\n\t\t\tif (!base[name]) {\n\t\t\t\tbase[name] = [];\n\t\t\t}\n\t\t\treturn this._subscriptions[name].push(object);\n\t\t};\n\n\t\tPublisher.prototype.publishDataTo = function (data, name) {\n\t\t\tvar ref, results, subscriber, _i, _len;\n\t\t\tref = this._subscriptions[name] || [];\n\t\t\tresults = [];\n\t\t\tfor (_i = 0, _len = ref.length; _i < _len; _i++) {\n\t\t\t\tsubscriber = ref[_i];\n\t\t\t\tresults.push(subscriber.handle(data));\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\t\treturn Publisher;\n\t}();\n\treturn new Publisher(CollectionsModel, SettingsModel);\n}]);","'use strict';\n\nangular.module('Tasks').factory('RandomStringService', function () {\n  'use strict';\n\n  return {\n    generate: function generate() {\n      return Math.random().toString(36).substr(2);\n    }\n  };\n});","'use strict';\n\nangular.module('Tasks').factory('Request', ['$http', 'Publisher', function ($http, Publisher) {\n\t'use strict';\n\n\tvar Request = function () {\n\t\tfunction Request($http, publisher) {\n\t\t\tthis.$http = $http;\n\t\t\tthis.publisher = publisher;\n\t\t\tthis.count = 0;\n\t\t\tthis.initialized = false;\n\t\t\tthis.shelvedRequests = [];\n\t\t\tthis.initialized = true;\n\t\t\tthis._executeShelvedRequests();\n\t\t}\n\n\t\tRequest.prototype.request = function (route, data) {\n\t\t\tvar defaultConfig, defaultData, url;\n\t\t\tif (data === null) {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tdefaultData = {\n\t\t\t\trouteParams: {},\n\t\t\t\tdata: {},\n\t\t\t\tonSuccess: function onSuccess() {\n\t\t\t\t\treturn {};\n\t\t\t\t},\n\t\t\t\tonFailure: function onFailure() {\n\t\t\t\t\treturn {};\n\t\t\t\t},\n\t\t\t\tconfig: {}\n\t\t\t};\n\t\t\tangular.extend(defaultData, data);\n\t\t\tif (!this.initialized) {\n\t\t\t\tthis._shelveRequest(route, defaultData);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\turl = OC.generateUrl(route, defaultData.routeParams);\n\t\t\tdefaultConfig = {\n\t\t\t\turl: url,\n\t\t\t\tdata: defaultData.data\n\t\t\t};\n\t\t\tangular.extend(defaultConfig, defaultData.config);\n\t\t\tif (defaultConfig.method === 'GET') {\n\t\t\t\tdefaultConfig.params = defaultConfig.data;\n\t\t\t}\n\t\t\treturn this.$http(defaultConfig).then(function (_this) {\n\t\t\t\treturn function (response) {\n\t\t\t\t\tvar name, ref, value;\n\t\t\t\t\tref = response.data.data;\n\t\t\t\t\tfor (name in ref) {\n\t\t\t\t\t\tvalue = ref[name];\n\t\t\t\t\t\t_this.publisher.publishDataTo(value, name);\n\t\t\t\t\t}\n\t\t\t\t\treturn defaultData.onSuccess(response.data, response.status, response.headers, response.config);\n\t\t\t\t};\n\t\t\t}(this)).catch(function (response) {\n\t\t\t\treturn defaultData.onFailure(response.data, response.status, response.headers, response.config);\n\t\t\t});\n\t\t};\n\n\t\tRequest.prototype.post = function (route, data) {\n\t\t\tif (data === null) {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tif (!data.config) {\n\t\t\t\tdata.config = {};\n\t\t\t}\n\t\t\tdata.config.method = 'POST';\n\t\t\treturn this.request(route, data);\n\t\t};\n\n\t\tRequest.prototype.get = function (route, data) {\n\t\t\tif (data === null) {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tif (!data.config) {\n\t\t\t\tdata.config = {};\n\t\t\t}\n\t\t\tdata.config.method = 'GET';\n\t\t\treturn this.request(route, data);\n\t\t};\n\n\t\tRequest.prototype.put = function (route, data) {\n\t\t\tif (data === null) {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tif (!data.config) {\n\t\t\t\tdata.config = {};\n\t\t\t}\n\t\t\tdata.config.method = 'PUT';\n\t\t\treturn this.request(route, data);\n\t\t};\n\n\t\tRequest.prototype[\"delete\"] = function (route, data) {\n\t\t\tif (data === null) {\n\t\t\t\tdata = {};\n\t\t\t}\n\t\t\tif (!data.config) {\n\t\t\t\tdata.config = {};\n\t\t\t}\n\t\t\tdata.config.method = 'DELETE';\n\t\t\treturn this.request(route, data);\n\t\t};\n\n\t\tRequest.prototype._shelveRequest = function (route, data) {\n\t\t\tvar request = {\n\t\t\t\troute: route,\n\t\t\t\tdata: data\n\t\t\t};\n\t\t\treturn this.shelvedRequests.push(request);\n\t\t};\n\n\t\tRequest.prototype._executeShelvedRequests = function () {\n\t\t\tvar r, ref, results, _i, _len;\n\t\t\tref = this.shelvedRequests;\n\t\t\tresults = [];\n\t\t\tfor (_i = 0, _len = ref.length; _i < _len; _i++) {\n\t\t\t\tr = ref[_i];\n\t\t\t\tresults.push(this.request(r.route, r.data));\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\t\treturn Request;\n\t}();\n\treturn new Request($http, Publisher);\n}]);","'use strict';\n\nangular.module('Tasks').factory('Status', [function () {\n  'use strict';\n\n  var Status;\n  Status = function () {\n    function Status() {\n      this._$status = {\n        addingList: false,\n        focusTaskInput: false\n      };\n    }\n\n    Status.prototype.getStatus = function () {\n      return this._$status;\n    };\n\n    return Status;\n  }();\n  return new Status();\n}]);","'use strict';\n\nangular.module('Tasks').service('VTodoService', ['DavClient', 'RandomStringService', '$timeout', function (DavClient, RandomStringService, $timeout) {\n\t'use strict';\n\n\tvar _this = this;\n\n\tthis.getAll = function (calendar, completed, parent) {\n\t\tif (completed === null) {\n\t\t\tcompleted = false;\n\t\t}\n\t\tif (parent === null) {\n\t\t\tparent = false;\n\t\t}\n\t\tvar xmlDoc = document.implementation.createDocument('', '', null);\n\t\tvar cCalQuery = xmlDoc.createElement('c:calendar-query');\n\t\tcCalQuery.setAttribute('xmlns:c', 'urn:ietf:params:xml:ns:caldav');\n\t\tcCalQuery.setAttribute('xmlns:d', 'DAV:');\n\t\tcCalQuery.setAttribute('xmlns:a', 'http://apple.com/ns/ical/');\n\t\tcCalQuery.setAttribute('xmlns:o', 'http://owncloud.org/ns');\n\t\txmlDoc.appendChild(cCalQuery);\n\n\t\tvar dProp = xmlDoc.createElement('d:prop');\n\t\tcCalQuery.appendChild(dProp);\n\n\t\tvar dGetEtag = xmlDoc.createElement('d:getetag');\n\t\tdProp.appendChild(dGetEtag);\n\n\t\tvar cCalendarData = xmlDoc.createElement('c:calendar-data');\n\t\tdProp.appendChild(cCalendarData);\n\n\t\tvar cFilter = xmlDoc.createElement('c:filter');\n\t\tcCalQuery.appendChild(cFilter);\n\n\t\tvar cCompFilterVCal = xmlDoc.createElement('c:comp-filter');\n\t\tcCompFilterVCal.setAttribute('name', 'VCALENDAR');\n\t\tcFilter.appendChild(cCompFilterVCal);\n\n\t\tvar cCompFilterVTodo = xmlDoc.createElement('c:comp-filter');\n\t\tcCompFilterVTodo.setAttribute('name', 'VTODO');\n\t\tcCompFilterVCal.appendChild(cCompFilterVTodo);\n\n\t\tvar cPropFilterCompleted = xmlDoc.createElement('c:prop-filter');\n\t\tcPropFilterCompleted.setAttribute('name', 'COMPLETED');\n\t\tcCompFilterVTodo.appendChild(cPropFilterCompleted);\n\n\t\tif (!completed) {\n\t\t\tvar cIsNotDefined = xmlDoc.createElement('c:is-not-defined');\n\t\t\tcPropFilterCompleted.appendChild(cIsNotDefined);\n\t\t}\n\n\t\tif (parent) {\n\t\t\tvar cPropFilterRelated = xmlDoc.createElement('c:prop-filter');\n\t\t\tcPropFilterRelated.setAttribute('name', 'RELATED-TO');\n\t\t\tcCompFilterVTodo.appendChild(cPropFilterRelated);\n\t\t\tvar cTextMatch = xmlDoc.createElement('c:text-match');\n\t\t\tvar cTextMatchValue = xmlDoc.createTextNode(parent.uid);\n\t\t\tcTextMatch.appendChild(cTextMatchValue);\n\t\t\tcPropFilterRelated.appendChild(cTextMatch);\n\t\t}\n\n\t\t// var cPropFilterStatus = xmlDoc.createElement('c:prop-filter');\n\t\t// cPropFilterStatus.setAttribute('name', 'STATUS');\n\t\t// cCompFilterVTodo.appendChild(cPropFilterStatus);\n\n\t\t// var cTextMatch = xmlDoc.createElement('c:text-match');\n\t\t// cTextMatch.setAttribute('negate-condition', 'yes');\n\t\t// var cTextMatchValue = xmlDoc.createTextNode('CANCELLED');\n\t\t// cTextMatch.appendChild(cTextMatchValue);\n\t\t// cPropFilterStatus.appendChild(cTextMatch);\n\n\t\t// var cTimeRange = xmlDoc.createElement('c:time-range');\n\t\t// cTimeRange.setAttribute('start', this._getTimeRangeStamp(start));\n\t\t// cTimeRange.setAttribute('end', this._getTimeRangeStamp(end));\n\t\t// cCompFilterVTodo.appendChild(cTimeRange);\n\n\t\tvar url = calendar.url;\n\t\tvar headers = {\n\t\t\t'Content-Type': 'application/xml; charset=utf-8',\n\t\t\t'Depth': 1,\n\t\t\t'requesttoken': OC.requestToken\n\t\t};\n\t\tvar body = cCalQuery.outerHTML;\n\n\t\treturn DavClient.request('REPORT', url, headers, body).then(function (response) {\n\t\t\tif (!DavClient.wasRequestSuccessful(response.status)) {\n\t\t\t\t//TODO - something went wrong\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar vTodos = [];\n\n\t\t\tfor (var i in response.body) {\n\t\t\t\tvar object = response.body[i];\n\t\t\t\tvar properties = object.propStat[0].properties;\n\n\t\t\t\tvar uri = object.href.substr(object.href.lastIndexOf('/') + 1);\n\n\t\t\t\tvar vTodo = {\n\t\t\t\t\tcalendar: calendar,\n\t\t\t\t\tproperties: properties,\n\t\t\t\t\turi: uri\n\t\t\t\t};\n\t\t\t\tvTodos.push(vTodo);\n\t\t\t}\n\n\t\t\treturn vTodos;\n\t\t});\n\t};\n\n\tthis.get = function (calendar, uri) {\n\t\tvar url = calendar.url + uri;\n\t\treturn DavClient.request('GET', url, { 'requesttoken': OC.requestToken }, '').then(function (response) {\n\t\t\tvar vTodo = {\n\t\t\t\tcalendar: calendar,\n\t\t\t\tproperties: {\n\t\t\t\t\t'{urn:ietf:params:xml:ns:caldav}calendar-data': response.body,\n\t\t\t\t\t'{DAV:}getetag': response.xhr.getResponseHeader('ETag') },\n\t\t\t\turi: uri\n\t\t\t};\n\t\t\treturn vTodo;\n\t\t});\n\t};\n\n\tthis.create = function (calendar, data, returnTodo) {\n\t\tif (typeof returnTodo === 'undefined') {\n\t\t\treturnTodo = true;\n\t\t}\n\n\t\tvar headers = {\n\t\t\t'Content-Type': 'text/calendar; charset=utf-8',\n\t\t\t'requesttoken': OC.requestToken\n\t\t};\n\t\tvar uri = this._generateRandomUri();\n\t\tvar url = calendar.url + uri;\n\n\t\treturn DavClient.request('PUT', url, headers, data).then(function (response) {\n\t\t\tif (!DavClient.wasRequestSuccessful(response.status)) {\n\t\t\t\tconsole.log(response);\n\t\t\t\treturn false;\n\t\t\t\t// TODO - something went wrong, do smth about it\n\t\t\t}\n\n\t\t\treturn returnTodo ? _this.get(calendar, uri) : true;\n\t\t});\n\t};\n\n\tthis.update = function (task) {\n\t\tvar url = task.calendar.url + task.uri;\n\t\tvar headers = {\n\t\t\t'Content-Type': 'text/calendar; charset=utf-8',\n\t\t\t'If-Match': task.etag,\n\t\t\t'requesttoken': OC.requestToken\n\t\t};\n\t\t$timeout.cancel(task.timers.update);\n\t\treturn DavClient.request('PUT', url, headers, task.data).then(function (response) {\n\t\t\ttask.etag = response.xhr.getResponseHeader('ETag');\n\t\t\treturn DavClient.wasRequestSuccessful(response.status);\n\t\t});\n\t};\n\n\tthis.delete = function (task) {\n\t\tvar url = task.calendar.url + task.uri;\n\t\tvar headers = {\n\t\t\t'If-Match': task.etag,\n\t\t\t'requesttoken': OC.requestToken\n\t\t};\n\n\t\treturn DavClient.request('DELETE', url, headers, '').then(function (response) {\n\t\t\treturn DavClient.wasRequestSuccessful(response.status);\n\t\t});\n\t};\n\n\tthis._generateRandomUri = function () {\n\t\tvar uri = 'Nextcloud-';\n\t\turi += RandomStringService.generate();\n\t\turi += RandomStringService.generate();\n\t\turi += '.ics';\n\n\t\treturn uri;\n\t};\n\n\t// this._getTimeRangeStamp = function(momentObject) {\n\t// \treturn momentObject.format('YYYYMMDD') + 'T' + momentObject.format('HHmmss') + 'Z';\n\t// };\n}]);","'use strict';\n\nangular.module('Tasks').factory('ListsBusinessLayer', ['ListsModel', 'Persistence', 'TasksBusinessLayer', 'CalendarService', function (ListsModel, Persistence, TasksBusinessLayer, CalendarService) {\n\t'use strict';\n\n\tvar ListsBusinessLayer;\n\tListsBusinessLayer = function () {\n\t\tfunction ListsBusinessLayer(_$listsmodel, _persistence, _$tasksbusinesslayer, _$calendarservice) {\n\t\t\tthis._$listsmodel = _$listsmodel;\n\t\t\tthis._persistence = _persistence;\n\t\t\tthis._$tasksbusinesslayer = _$tasksbusinesslayer;\n\t\t\tthis._$calendarservice = _$calendarservice;\n\t\t}\n\n\t\tListsBusinessLayer.prototype.init = function () {\n\t\t\treturn this._$calendarservice.getAll().then(function (calendars) {\n\t\t\t\tvar calendar, _i, _len, _results;\n\t\t\t\t_results = [];\n\t\t\t\tfor (_i = 0, _len = calendars.length; _i < _len; _i++) {\n\t\t\t\t\tcalendar = calendars[_i];\n\t\t\t\t\tListsModel.add(calendar);\n\t\t\t\t\t_results.push(TasksBusinessLayer.getAll(calendar));\n\t\t\t\t}\n\t\t\t\treturn _results;\n\t\t\t});\n\t\t};\n\n\t\tListsBusinessLayer.prototype.add = function (calendar, color) {\n\t\t\treturn this._$calendarservice.create(calendar, color, ['vtodo']).then(function (calendar) {\n\t\t\t\tListsModel.add(calendar);\n\t\t\t\treturn calendar;\n\t\t\t});\n\t\t};\n\n\t\tListsBusinessLayer.prototype[\"delete\"] = function (calendar) {\n\t\t\treturn this._$calendarservice[\"delete\"](calendar).then(function () {\n\t\t\t\treturn ListsModel[\"delete\"](calendar);\n\t\t\t});\n\t\t};\n\n\t\tListsBusinessLayer.prototype.rename = function (calendar) {\n\t\t\tthis._$calendarservice.update(calendar).then(function (calendar) {\n\t\t\t\tcalendar.dropPreviousState();\n\t\t\t});\n\t\t};\n\n\t\treturn ListsBusinessLayer;\n\t}();\n\treturn new ListsBusinessLayer(ListsModel, Persistence, TasksBusinessLayer, CalendarService);\n}]);","'use strict';\n\n(function () {\n\t'use strict';\n\n\tvar __bind = function __bind(fn, me) {\n\t\treturn function () {\n\t\t\treturn fn.apply(me, arguments);\n\t\t};\n\t};\n\n\tangular.module('Tasks').factory('SearchBusinessLayer', ['ListsModel', 'Persistence', 'TasksModel', '$rootScope', '$routeParams', '$location', function (ListsModel, Persistence, TasksModel, $rootScope, $routeParams, $location) {\n\t\tvar SearchBusinessLayer;\n\t\tSearchBusinessLayer = function () {\n\t\t\tfunction SearchBusinessLayer(_$listsmodel, _persistence, _$tasksmodel, _$rootScope, _$routeparams, _$location) {\n\t\t\t\tthis._$listsmodel = _$listsmodel;\n\t\t\t\tthis._persistence = _persistence;\n\t\t\t\tthis._$tasksmodel = _$tasksmodel;\n\t\t\t\tthis._$rootScope = _$rootScope;\n\t\t\t\tthis._$routeparams = _$routeparams;\n\t\t\t\tthis._$location = _$location;\n\t\t\t\tthis.getFilter = __bind(this.getFilter, this);\n\t\t\t\tthis.setFilter = __bind(this.setFilter, this);\n\t\t\t\tthis.attach = __bind(this.attach, this);\n\t\t\t\tthis.initialize();\n\t\t\t\tthis._$searchString = '';\n\t\t\t}\n\n\t\t\tSearchBusinessLayer.prototype.attach = function (search) {\n\t\t\t\tvar _this = this;\n\t\t\t\tsearch.setFilter('tasks', function (query) {\n\t\t\t\t\treturn _this._$rootScope.$apply(function () {\n\t\t\t\t\t\treturn _this.setFilter(query);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tsearch.setRenderer('task', this.renderTaskResult.bind(this));\n\t\t\t\treturn search.setHandler('task', this.handleTaskClick.bind(this));\n\t\t\t};\n\n\t\t\tSearchBusinessLayer.prototype.setFilter = function (query) {\n\t\t\t\tthis._$searchString = query;\n\t\t\t};\n\n\t\t\tSearchBusinessLayer.prototype.getFilter = function () {\n\t\t\t\treturn this._$searchString;\n\t\t\t};\n\n\t\t\tSearchBusinessLayer.prototype.initialize = function () {\n\t\t\t\tvar _this = this;\n\t\t\t\tthis.handleTaskClick = function ($row, result, event) {\n\t\t\t\t\treturn _this._$location.path('/lists/' + result.calendarid + '/tasks/' + result.id);\n\t\t\t\t};\n\t\t\t\tthis.renderTaskResult = function ($row, result) {\n\t\t\t\t\tvar $template;\n\t\t\t\t\tif (!_this._$tasksmodel.filterTasks(result, _this._$routeparams.listID) || !_this._$tasksmodel.isLoaded(result)) {\n\t\t\t\t\t\t$template = $('div.task-item.template');\n\t\t\t\t\t\t$template = $template.clone();\n\t\t\t\t\t\t$row = $('<tr class=\"result\"></tr>').append($template.removeClass('template'));\n\t\t\t\t\t\t$row.data('result', result);\n\t\t\t\t\t\t$row.find('span.title').text(result.name);\n\t\t\t\t\t\tif (result.starred) {\n\t\t\t\t\t\t\t$row.find('span.task-star').addClass('task-starred');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (result.completed) {\n\t\t\t\t\t\t\t$row.find('div.task-item').addClass('done');\n\t\t\t\t\t\t\t$row.find('span.task-checkbox').addClass('svg-checkmark');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (result.complete) {\n\t\t\t\t\t\t\t$row.find('div.percentdone').css({\n\t\t\t\t\t\t\t\t'width': result.complete + '%',\n\t\t\t\t\t\t\t\t'background-color': '' + _this._$listsmodel.getColor(result.calendarid)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (result.note) {\n\t\t\t\t\t\t\t$row.find('div.title-wrapper').addClass('attachment');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn $row;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn OC.Plugins.register('OCA.Search', this);\n\t\t\t};\n\n\t\t\treturn SearchBusinessLayer;\n\t\t}();\n\t\treturn new SearchBusinessLayer(ListsModel, Persistence, TasksModel, $rootScope, $routeParams, $location);\n\t}]);\n}).call(undefined);","'use strict';\n\nangular.module('Tasks').factory('SettingsBusinessLayer', ['Persistence', 'SettingsModel', function (Persistence, SettingsModel) {\n\t'use strict';\n\n\tvar SettingsBusinessLayer = function () {\n\t\tfunction SettingsBusinessLayer(_persistence, _$settingsmodel) {\n\t\t\tthis._persistence = _persistence;\n\t\t\tthis._$settingsmodel = _$settingsmodel;\n\t\t}\n\n\t\tSettingsBusinessLayer.prototype.updateModel = function () {\n\t\t\tvar success,\n\t\t\t    _this = this;\n\t\t\tsuccess = function success() {};\n\t\t\treturn this._persistence.getCollections(success, true);\n\t\t};\n\n\t\tSettingsBusinessLayer.prototype.setVisibility = function (collectionID, visibility) {\n\t\t\treturn this._persistence.setVisibility(collectionID, visibility);\n\t\t};\n\n\t\tSettingsBusinessLayer.prototype.toggle = function (type, setting) {\n\t\t\tthis._$settingsmodel.toggle(type, setting);\n\t\t\tvar value = this._$settingsmodel.getById(type)[setting];\n\t\t\treturn this._persistence.setting(type, setting, +value);\n\t\t};\n\n\t\tSettingsBusinessLayer.prototype.set = function (type, setting, value) {\n\t\t\treturn this._persistence.setting(type, setting, value);\n\t\t};\n\n\t\treturn SettingsBusinessLayer;\n\t}();\n\treturn new SettingsBusinessLayer(Persistence, SettingsModel);\n}]);","'use strict';\n\nangular.module('Tasks').factory('TasksBusinessLayer', ['TasksModel', 'Persistence', 'VTodoService', 'VTodo', '$timeout', function (TasksModel, Persistence, VTodoService, VTodo, $timeout) {\n\t'use strict';\n\n\tvar TasksBusinessLayer;\n\tTasksBusinessLayer = function () {\n\t\tfunction TasksBusinessLayer(_$tasksmodel, _persistence, _$vtodoservice, _$vtodo, $timeout) {\n\t\t\tthis._$tasksmodel = _$tasksmodel;\n\t\t\tthis._persistence = _persistence;\n\t\t\tthis._$vtodoservice = _$vtodoservice;\n\t\t}\n\n\t\tTasksBusinessLayer.prototype.getAll = function (calendar, completed, parent) {\n\t\t\treturn this._$vtodoservice.getAll(calendar, completed, parent).then(function (tasks) {\n\t\t\t\tvar task, _i, _len, _results;\n\t\t\t\t_results = [];\n\t\t\t\tfor (_i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\ttask = tasks[_i];\n\t\t\t\t\tvar vTodo = new VTodo(task.calendar, task.properties, task.uri);\n\t\t\t\t\t_results.push(TasksModel.ad(vTodo));\n\t\t\t\t}\n\t\t\t\treturn _results;\n\t\t\t});\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.add = function (task) {\n\t\t\treturn this._$vtodoservice.create(task.calendar, task.data).then(function (task) {\n\t\t\t\tvar vTodo = new VTodo(task.calendar, task.properties, task.uri);\n\t\t\t\tTasksModel.ad(vTodo);\n\t\t\t\treturn vTodo;\n\t\t\t});\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.getTask = function (calendar, uri) {\n\t\t\treturn this._$vtodoservice.get(calendar, uri).then(function (task) {\n\t\t\t\tTasksModel.ad(task);\n\t\t\t\treturn task;\n\t\t\t});\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.setPriority = function (task, priority) {\n\t\t\tif (task.calendar.writable) {\n\t\t\t\ttask.priority = priority;\n\t\t\t\tthis.doUpdate(task);\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.setPercentComplete = function (task, percentComplete) {\n\t\t\tif (task.calendar.writable) {\n\t\t\t\tif (percentComplete < 100) {\n\t\t\t\t\tthis.uncompleteParents(task.related);\n\t\t\t\t} else {\n\t\t\t\t\tthis.completeChildren(task);\n\t\t\t\t}\n\t\t\t\ttask.complete = percentComplete;\n\t\t\t\tthis.triggerUpdate(task);\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.triggerUpdate = function (task, duration) {\n\t\t\tif (!duration) {\n\t\t\t\tduration = 1000;\n\t\t\t}\n\t\t\tif (task.timers.update) {\n\t\t\t\t$timeout.cancel(task.timers.update);\n\t\t\t}\n\t\t\ttask.timers.update = $timeout(function (task) {\n\t\t\t\tVTodoService.update(task);\n\t\t\t}, duration, true, task);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.doUpdate = function (task) {\n\t\t\treturn this._$vtodoservice.update(task);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.completeChildren = function (task) {\n\t\t\tvar child, _i, _len;\n\t\t\tvar children = this._$tasksmodel.getChildren(task);\n\t\t\tvar _results = [];\n\t\t\tfor (_i = 0, _len = children.length; _i < _len; _i++) {\n\t\t\t\tchild = children[_i];\n\t\t\t\t_results.push(this.setPercentComplete(child, 100));\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.uncompleteParents = function (uid) {\n\t\t\tif (uid) {\n\t\t\t\tvar parent = this._$tasksmodel.getByUid(uid);\n\t\t\t\tif (parent.completed) {\n\t\t\t\t\treturn this.setPercentComplete(parent, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.setHideSubtasks = function (task, hide) {\n\t\t\ttask.hideSubtasks = hide;\n\t\t\tif (task.calendar.writable) {\n\t\t\t\tthis.doUpdate(task);\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.setHideCompletedSubtasks = function (task, hide) {\n\t\t\ttask.hideCompletedSubtasks = hide;\n\t\t\tif (task.calendar.writable) {\n\t\t\t\tthis.doUpdate(task);\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.deleteTask = function (task) {\n\t\t\tvar child, children, _i, _len;\n\t\t\tchildren = this._$tasksmodel.getChildren(task);\n\t\t\tfor (_i = 0, _len = children.length; _i < _len; _i++) {\n\t\t\t\tchild = children[_i];\n\t\t\t\tthis.deleteTask(child);\n\t\t\t}\n\t\t\treturn this._$vtodoservice[\"delete\"](task).then(function () {\n\t\t\t\treturn TasksModel[\"delete\"](task);\n\t\t\t});\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.momentToICALTime = function (moment, asDate) {\n\t\t\tif (asDate) {\n\t\t\t\treturn ICAL.Time.fromDateString(moment.format('YYYY-MM-DD'));\n\t\t\t} else {\n\t\t\t\treturn ICAL.Time.fromDateTimeString(moment.format('YYYY-MM-DDTHH:mm:ss'));\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.initDueDate = function (task) {\n\t\t\tvar start = moment(task.start, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\tvar due = moment(task.due, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\tif (!due.isValid()) {\n\t\t\t\tvar reference = start.isAfter() ? start : moment();\n\t\t\t\tif (task.allDay) {\n\t\t\t\t\treference.startOf('day').add(1, 'd');\n\t\t\t\t} else {\n\t\t\t\t\treference.startOf('hour').add(1, 'h');\n\t\t\t\t}\n\t\t\t\treturn this.setDue(task, reference, 'all');\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.setDue = function (task, date, type) {\n\t\t\tif (type === null) {\n\t\t\t\ttype = 'day';\n\t\t\t}\n\t\t\tvar allDay = task.allDay;\n\t\t\tvar start = moment(task.start, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\tvar olddue = moment(task.due, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\tvar due = olddue.clone();\n\t\t\tif (type === 'day') {\n\t\t\t\tif (moment(due).isValid()) {\n\t\t\t\t\tdue.year(date.year()).month(date.month()).date(date.date());\n\t\t\t\t} else {\n\t\t\t\t\tdue = date.add(12, 'h');\n\t\t\t\t}\n\t\t\t} else if (type === 'time') {\n\t\t\t\tif (moment(due).isValid()) {\n\t\t\t\t\tdue.hour(date.hour()).minute(date.minute());\n\t\t\t\t} else {\n\t\t\t\t\tdue = date;\n\t\t\t\t}\n\t\t\t} else if (type === 'all') {\n\t\t\t\tdue = date;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (due.isBefore(start) || due.isSame(start)) {\n\t\t\t\tstart.subtract(olddue.diff(due), 'ms');\n\t\t\t\ttask.start = this.momentToICALTime(start, allDay);\n\t\t\t}\n\t\t\ttask.due = this.momentToICALTime(due, allDay);\n\t\t\t// this.checkReminderDate(task);\n\t\t\tthis.doUpdate(task);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.deleteDueDate = function (task) {\n\t\t\t// var reminder = task.reminder;\n\t\t\t//  if (reminder !== null && reminder.type === 'DURATION' && reminder.duration.params.related === 'END') {\n\t\t\t// this.deleteReminderDate(task);\n\t\t\t//  }\n\t\t\ttask.due = null;\n\t\t\tthis.doUpdate(task);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.initStartDate = function (task) {\n\t\t\tvar start = moment(task.start, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\tvar due = moment(task.due, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\tif (!start.isValid()) {\n\t\t\t\tvar reference = moment().add(1, 'h');\n\t\t\t\tif (due.isBefore(reference)) {\n\t\t\t\t\treference = due.subtract(1, 'm');\n\t\t\t\t}\n\t\t\t\treference.startOf(task.allDay ? 'day' : 'hour');\n\t\t\t\treturn this.setStart(task, reference, 'all');\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.setStart = function (task, date, type) {\n\t\t\tif (type === null) {\n\t\t\t\ttype = 'day';\n\t\t\t}\n\t\t\tvar allDay = task.allDay;\n\t\t\tvar due = moment(task.due, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\tvar oldstart = moment(task.start, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\tvar start = oldstart.clone();\n\t\t\tif (type === 'day') {\n\t\t\t\tif (moment(start).isValid()) {\n\t\t\t\t\tstart.year(date.year()).month(date.month()).date(date.date());\n\t\t\t\t} else {\n\t\t\t\t\tstart = date.add(12, 'h');\n\t\t\t\t}\n\t\t\t} else if (type === 'time') {\n\t\t\t\tif (moment(start).isValid()) {\n\t\t\t\t\tstart.hour(date.hour()).minute(date.minute());\n\t\t\t\t} else {\n\t\t\t\t\tstart = date;\n\t\t\t\t}\n\t\t\t} else if (type === 'all') {\n\t\t\t\tstart = date;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (start.isAfter(due) || start.isSame(due)) {\n\t\t\t\tdue.add(start.diff(oldstart), 'ms');\n\t\t\t\ttask.due = this.momentToICALTime(due, allDay);\n\t\t\t}\n\t\t\ttask.start = this.momentToICALTime(start, allDay);\n\t\t\t// this.checkReminderDate(taskID);\n\t\t\tthis.doUpdate(task);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.deleteStartDate = function (task) {\n\t\t\t// var reminder = task.reminder;\n\t\t\t// if (reminder !== null && reminder.type === 'DURATION' && reminder.duration.params.related === 'START') {\n\t\t\t// this.deleteReminderDate(task);\n\t\t\t// }\n\t\t\ttask.start = null;\n\t\t\tthis.doUpdate(task);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.setAllDay = function (task, allDay) {\n\t\t\ttask.allDay = allDay;\n\t\t\tif (allDay) {\n\t\t\t\tvar due = moment(task.due, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\t\tvar start = moment(task.start, \"YYYY-MM-DDTHH:mm:ss\");\n\t\t\t\tif (start.isAfter(due) || start.isSame(due)) {\n\t\t\t\t\tstart = moment(due).subtract(1, 'day');\n\t\t\t\t\ttask.start = this.momentToICALTime(start, allDay);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.doUpdate(task);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.initReminder = function (taskID) {\n\t\t\tvar p, task;\n\t\t\tif (!this.checkReminderDate(taskID)) {\n\t\t\t\ttask = this._$tasksmodel.getById(taskID);\n\t\t\t\ttask.reminder = {\n\t\t\t\t\ttype: 'DURATION',\n\t\t\t\t\taction: 'DISPLAY',\n\t\t\t\t\tduration: {\n\t\t\t\t\t\ttoken: 'week',\n\t\t\t\t\t\tweek: 0,\n\t\t\t\t\t\tday: 0,\n\t\t\t\t\t\thour: 0,\n\t\t\t\t\t\tminute: 0,\n\t\t\t\t\t\tsecond: 0,\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tinvert: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (moment(task.start, \"YYYYMMDDTHHmmss\").isValid()) {\n\t\t\t\t\tp = task.reminder.duration.params;\n\t\t\t\t\tp.related = 'START';\n\t\t\t\t\tp.id = '10';\n\t\t\t\t} else if (moment(task.due, \"YYYYMMDDTHHmmss\").isValid()) {\n\t\t\t\t\tp = task.reminder.duration.params;\n\t\t\t\t\tp.related = 'END';\n\t\t\t\t\tp.id = '11';\n\t\t\t\t} else {\n\t\t\t\t\ttask.reminder.type = 'DATE-TIME';\n\t\t\t\t\ttask.reminder.date = moment().startOf('hour').add(1, 'h').format('YYYYMMDDTHHmmss');\n\t\t\t\t}\n\t\t\t\treturn this.setReminder(taskID);\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.setReminderDate = function (taskID, date, type) {\n\t\t\tvar newreminder, reminder, reminderdate;\n\t\t\tif (type === null) {\n\t\t\t\ttype = 'day';\n\t\t\t}\n\t\t\treminder = this._$tasksmodel.getById(taskID).reminder;\n\t\t\tnewreminder = {\n\t\t\t\ttype: 'DATE-TIME',\n\t\t\t\taction: 'DISPLAY',\n\t\t\t\tduration: null\n\t\t\t};\n\t\t\tif (type === 'day') {\n\t\t\t\tif (this.checkReminderDate(taskID) || reminder === null) {\n\t\t\t\t\treminderdate = moment(reminder.date, \"YYYYMMDDTHHmmss\");\n\t\t\t\t\tnewreminder.action = reminder.action;\n\t\t\t\t\tif (reminderdate.isValid() && reminder.type === 'DATE-TIME') {\n\t\t\t\t\t\treminderdate.year(date.year()).month(date.month()).date(date.date());\n\t\t\t\t\t} else {\n\t\t\t\t\t\treminderdate = date.add(12, 'h');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treminderdate = date.add(12, 'h');\n\t\t\t\t}\n\t\t\t} else if (type === 'time') {\n\t\t\t\tif (this.checkReminderDate(taskID) || reminder === null) {\n\t\t\t\t\treminderdate = moment(reminder.date, \"YYYYMMDDTHHmmss\");\n\t\t\t\t\tnewreminder.action = reminder.action;\n\t\t\t\t\tif (reminderdate.isValid() && reminder.type === 'DATE-TIME') {\n\t\t\t\t\t\treminderdate.hour(date.hour()).minute(date.minute());\n\t\t\t\t\t} else {\n\t\t\t\t\t\treminderdate = date;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treminderdate = date;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnewreminder.date = reminderdate.format('YYYYMMDDTHHmmss');\n\t\t\tthis._$tasksmodel.setReminder(taskID, newreminder);\n\t\t\treturn this._persistence.setReminder(taskID, newreminder);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.setReminder = function (taskID) {\n\t\t\tvar reminder;\n\t\t\tif (this.checkReminderDate(taskID)) {\n\t\t\t\treminder = this._$tasksmodel.getById(taskID).reminder;\n\t\t\t\treturn this._persistence.setReminder(taskID, reminder);\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.checkReminderDate = function (taskID) {\n\t\t\tvar d, date, duration, rel, related, reminder, seg, task, token;\n\t\t\ttask = this._$tasksmodel.getById(taskID);\n\t\t\treminder = task.reminder;\n\t\t\tif (reminder !== null && reminder.type === 'DURATION') {\n\t\t\t\tif (!reminder.duration) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else if (reminder.duration.params.related === 'START') {\n\t\t\t\t\ttoken = 'start';\n\t\t\t\t} else if (reminder.duration.params.related === 'END') {\n\t\t\t\t\ttoken = 'due';\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tdate = moment(task[token], \"YYYYMMDDTHHmmss\");\n\t\t\t\tduration = reminder.duration;\n\t\t\t\td = {\n\t\t\t\t\tw: duration.week,\n\t\t\t\t\td: duration.day,\n\t\t\t\t\th: duration.hour,\n\t\t\t\t\tm: duration.minute,\n\t\t\t\t\ts: duration.second\n\t\t\t\t};\n\t\t\t\tif (duration.params.invert) {\n\t\t\t\t\tdate = date.subtract(d);\n\t\t\t\t} else {\n\t\t\t\t\tdate = date.add(d);\n\t\t\t\t}\n\t\t\t\ttask.reminder.date = date.format('YYYYMMDDTHHmmss');\n\t\t\t} else if (reminder !== null && reminder.type === 'DATE-TIME') {\n\t\t\t\tduration = reminder.duration;\n\t\t\t\tdate = moment(reminder.date, \"YYYYMMDDTHHmmss\");\n\t\t\t\tif (!date.isValid()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (duration) {\n\t\t\t\t\tif (duration.params.related === 'START') {\n\t\t\t\t\t\trelated = moment(task.start, \"YYYYMMDDTHHmmss\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\trelated = moment(task.due, \"YYYYMMDDTHHmmss\");\n\t\t\t\t\t}\n\t\t\t\t\tseg = this.secondsToSegments(date.diff(related, 'seconds'));\n\t\t\t\t\tduration.params.invert = seg.invert;\n\t\t\t\t\tduration.token = 'week';\n\t\t\t\t\tduration.week = seg.week;\n\t\t\t\t\tduration.day = seg.day;\n\t\t\t\t\tduration.hour = seg.hour;\n\t\t\t\t\tduration.minute = seg.minute;\n\t\t\t\t\tduration.second = seg.second;\n\t\t\t\t} else {\n\t\t\t\t\tif (task.start) {\n\t\t\t\t\t\trelated = moment(task.start, \"YYYYMMDDTHHmmss\");\n\t\t\t\t\t\trel = 'START';\n\t\t\t\t\t\td = 0;\n\t\t\t\t\t} else if (task.due) {\n\t\t\t\t\t\trelated = moment(task.due, \"YYYYMMDDTHHmmss\");\n\t\t\t\t\t\trel = 'END';\n\t\t\t\t\t\td = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tseg = this.secondsToSegments(date.diff(related, 'seconds'));\n\t\t\t\t\treminder.duration = {\n\t\t\t\t\t\ttoken: 'week',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\trelated: rel,\n\t\t\t\t\t\t\tinvert: seg.invert,\n\t\t\t\t\t\t\tid: +seg.invert + '' + d\n\t\t\t\t\t\t},\n\t\t\t\t\t\tweek: seg.week,\n\t\t\t\t\t\tday: seg.day,\n\t\t\t\t\t\thour: seg.hour,\n\t\t\t\t\t\tminute: seg.minute,\n\t\t\t\t\t\tsecond: seg.second\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.secondsToSegments = function (s) {\n\t\t\tvar d, h, i, m, w;\n\t\t\tif (s < 0) {\n\t\t\t\ts *= -1;\n\t\t\t\ti = true;\n\t\t\t} else {\n\t\t\t\ti = false;\n\t\t\t}\n\t\t\tw = Math.floor(s / 604800);\n\t\t\ts -= w * 604800;\n\t\t\td = Math.floor(s / 86400);\n\t\t\ts -= d * 86400;\n\t\t\th = Math.floor(s / 3600);\n\t\t\ts -= h * 3600;\n\t\t\tm = Math.floor(s / 60);\n\t\t\ts -= m * 60;\n\t\t\treturn {\n\t\t\t\tweek: w,\n\t\t\t\tday: d,\n\t\t\t\thour: h,\n\t\t\t\tminute: m,\n\t\t\t\tsecond: s,\n\t\t\t\tinvert: i\n\t\t\t};\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.deleteReminderDate = function (taskID) {\n\t\t\tthis._$tasksmodel.setReminder(taskID, null);\n\t\t\treturn this._persistence.setReminder(taskID, false);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.changeCalendar = function (task, newCalendar) {\n\t\t\tif (task.calendar !== newCalendar && newCalendar.writable) {\n\t\t\t\tvar newTask = angular.copy(task);\n\t\t\t\tnewTask.calendar = newCalendar;\n\t\t\t\tif (!TasksModel.hasNoParent(newTask)) {\n\t\t\t\t\tvar parent = TasksModel.getByUid(newTask.related);\n\t\t\t\t\tif (parent.calendar.uri !== newTask.calendar.uri) {\n\t\t\t\t\t\tnewTask.related = null;\n\t\t\t\t\t\tTasksBusinessLayer.prototype.setPercentComplete(newTask, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn VTodoService.create(newCalendar, newTask.data).then(function (newVTodo) {\n\t\t\t\t\tvar vTodo = new VTodo(newVTodo.calendar, newVTodo.properties, newVTodo.uri);\n\t\t\t\t\tTasksModel.ad(vTodo);\n\t\t\t\t\treturn VTodoService[\"delete\"](task).then(function () {\n\t\t\t\t\t\tTasksModel[\"delete\"](task);\n\t\t\t\t\t\tvar queries = [];\n\t\t\t\t\t\tvar children = TasksModel.getChildren(newTask);\n\t\t\t\t\t\tvar _i, _len, child;\n\t\t\t\t\t\tfor (_i = 0, _len = children.length; _i < _len; _i++) {\n\t\t\t\t\t\t\tchild = children[_i];\n\t\t\t\t\t\t\tif (child.calendar.uri !== newTask.calendar.uri) {\n\t\t\t\t\t\t\t\tqueries.push(TasksBusinessLayer.prototype.changeCalendar(child, newTask.calendar));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Promise.all(queries);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn Promise.resolve(true);\n\t\t\t}\n\t\t};\n\n\t\t// called from outside\n\t\tTasksBusinessLayer.prototype.changeCollection = function (taskID, collectionID) {\n\t\t\tvar task = this._$tasksmodel.getById(taskID);\n\t\t\tswitch (collectionID) {\n\t\t\t\tcase 'starred':\n\t\t\t\t\ttask.priority = 9;\n\t\t\t\t\treturn this.doUpdate(task);\n\t\t\t\tcase 'completed':\n\t\t\t\t\treturn this.setPercentComplete(task, 100);\n\t\t\t\tcase 'uncompleted':\n\t\t\t\t\tif (task.completed) {\n\t\t\t\t\t\treturn this.setPercentComplete(task, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'today':\n\t\t\t\t\treturn this.setDue(task, moment().startOf('day').add(12, 'h'), 'all');\n\t\t\t\tcase 'week':\n\t\t\t\tcase 'all':\n\t\t\t\t\treturn false;\n\t\t\t\tdefault:\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.changeParent = function (task, parent) {\n\t\t\tif (parent.calendar.writable) {\n\t\t\t\ttask.related = parent.uid;\n\t\t\t\tparent.hideSubtasks = 0;\n\t\t\t\tif (parent.completed && !task.completed) {\n\t\t\t\t\tthis.setPercentComplete(parent, 0);\n\t\t\t\t} else {\n\t\t\t\t\tthis.doUpdate(parent);\n\t\t\t\t}\n\t\t\t\tif (parent.calendar.uri !== task.calendar.uri) {\n\t\t\t\t\tthis.changeCalendar(task, parent.calendar);\n\t\t\t\t} else {\n\t\t\t\t\tthis.doUpdate(task);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.makeRootTask = function (task, newCalendar, collectionID) {\n\t\t\tif (newCalendar.writable) {\n\t\t\t\tvar requests = [];\n\t\t\t\ttask.related = null;\n\t\t\t\tif (collectionID !== \"completed\" && task.completed) {\n\t\t\t\t\ttask.complete = 0;\n\t\t\t\t}\n\t\t\t\trequests.push(this.changeCollection(task.uri, collectionID));\n\t\t\t\tif (task.calendar !== newCalendar) {\n\t\t\t\t\trequests.push(this.changeCalendar(task, newCalendar));\n\t\t\t\t} else {\n\t\t\t\t\trequests.push(this.doUpdate(task));\n\t\t\t\t}\n\t\t\t\treturn requests;\n\t\t\t}\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.addComment = function (comment, onSuccess, onFailure) {\n\t\t\tvar success,\n\t\t\t    _this = this;\n\t\t\tif (!onSuccess) {\n\t\t\t\tonSuccess = function onSuccess() {};\n\t\t\t}\n\t\t\tif (!onFailure) {\n\t\t\t\tonFailure = function onFailure() {};\n\t\t\t}\n\t\t\tthis._$tasksmodel.addComment(comment);\n\t\t\tsuccess = function success(response) {\n\t\t\t\tif (response.status === 'error') {\n\t\t\t\t\treturn onFailure();\n\t\t\t\t} else {\n\t\t\t\t\treturn onSuccess(response.data);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn this._persistence.addComment(comment, success);\n\t\t};\n\n\t\tTasksBusinessLayer.prototype.deleteComment = function (taskID, commentID) {\n\t\t\tthis._$tasksmodel.deleteComment(taskID, commentID);\n\t\t\treturn this._persistence.deleteComment(taskID, commentID);\n\t\t};\n\n\t\treturn TasksBusinessLayer;\n\t}();\n\treturn new TasksBusinessLayer(TasksModel, Persistence, VTodoService, VTodo, $timeout);\n}]);","'use strict';\n\nangular.module('Tasks').factory('Calendar', ['$rootScope', '$filter', '$window', function ($rootScope, $filter, $window) {\n\t'use strict';\n\n\tfunction Calendar(url, props, uri) {\n\t\tvar _this = this;\n\n\t\tprops.color = props['{http://apple.com/ns/ical/}calendar-color'];\n\t\tif (typeof props.color !== 'undefined') {\n\t\t\tif (props.color.length === 9) {\n\t\t\t\tprops.color = props.color.substr(0, 7);\n\t\t\t}\n\t\t} else {\n\t\t\tprops.color = '#1d2d44';\n\t\t}\n\n\t\tangular.extend(this, {\n\t\t\t_propertiesBackup: {},\n\t\t\t_properties: {\n\t\t\t\turl: url,\n\t\t\t\turi: uri,\n\t\t\t\tenabled: props['{http://owncloud.org/ns}calendar-enabled'] === '1',\n\t\t\t\tdisplayname: props['{DAV:}displayname'] || t('tasks', 'Unnamed'),\n\t\t\t\tcolor: props.color,\n\t\t\t\torder: parseInt(props['{http://apple.com/ns/ical/}calendar-order']) || 0,\n\t\t\t\tcomponents: {\n\t\t\t\t\tvevent: false,\n\t\t\t\t\tvjournal: false,\n\t\t\t\t\tvtodo: false\n\t\t\t\t},\n\t\t\t\twritable: props.canWrite,\n\t\t\t\tshareable: props.canWrite,\n\t\t\t\tsharedWith: {\n\t\t\t\t\tusers: [],\n\t\t\t\t\tgroups: []\n\t\t\t\t},\n\t\t\t\towner: '',\n\t\t\t\tloadedCompleted: false\n\t\t\t},\n\t\t\t_updatedProperties: []\n\t\t});\n\t\tthis._propertiesBackup = angular.copy(this._properties);\n\n\t\t// angular.extend(this, {\n\t\t// \ttmpId: null,\n\t\t// \tfcEventSource: {\n\t\t// \t\tevents: function (start, end, timezone, callback) {\n\t\t// \t\t\t// console.log('querying events ...');\n\t\t// \t\t\t// TimezoneService.get(timezone).then(function(tz) {\n\t\t// \t\t\t// \t_this.list.loading = true;\n\t\t// \t\t\t// \t$rootScope.$broadcast('reloadCalendarList');\n\n\t\t// \t\t\t// \tVEventService.getAll(_this, start, end).then(function(events) {\n\t\t// \t\t\t// \t\tvar vevents = [];\n\t\t// \t\t\t// \t\tfor (var i = 0; i < events.length; i++) {\n\t\t// \t\t\t// \t\t\tvevents = vevents.concat(events[i].getFcEvent(start, end, tz));\n\t\t// \t\t\t// \t\t}\n\n\t\t// \t\t\t// \t\tcallback(vevents);\n\n\t\t// \t\t\t// \t\t_this.list.loading = false;\n\t\t// \t\t\t// \t\t$rootScope.$broadcast('reloadCalendarList');\n\t\t// \t\t\t// \t});\n\t\t// \t\t\t// });\n\t\t// \t\t},\n\t\t// \t\teditable: this._properties.writable,\n\t\t// \t\tcalendar: this\n\t\t// \t},\n\t\t// \tlist: {\n\t\t// \t\tedit: false,\n\t\t// \t\tloading: this.enabled,\n\t\t// \t\tlocked: false,\n\t\t// \t\teditingShares: false\n\t\t// \t}\n\t\t// });\n\n\t\tvar components = props['{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set'];\n\t\tfor (var i = 0; i < components.length; i++) {\n\t\t\tvar name = components[i].attributes.getNamedItem('name').textContent.toLowerCase();\n\t\t\tif (this._properties.components.hasOwnProperty(name)) {\n\t\t\t\tthis._properties.components[name] = true;\n\t\t\t}\n\t\t}\n\n\t\tvar shares = props['{http://owncloud.org/ns}invite'];\n\t\tif (typeof shares !== 'undefined') {\n\t\t\tfor (var j = 0; j < shares.length; j++) {\n\t\t\t\tvar href = shares[j].getElementsByTagNameNS('DAV:', 'href');\n\t\t\t\tif (href.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\thref = href[0].textContent;\n\n\t\t\t\tvar access = shares[j].getElementsByTagNameNS('http://owncloud.org/ns', 'access');\n\t\t\t\tif (access.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\taccess = access[0];\n\n\t\t\t\tvar readWrite = access.getElementsByTagNameNS('http://owncloud.org/ns', 'read-write');\n\t\t\t\treadWrite = readWrite.length !== 0;\n\n\t\t\t\tif (href.startsWith('principal:principals/users/')) {\n\t\t\t\t\tthis._properties.sharedWith.users.push({\n\t\t\t\t\t\tid: href.substr(27),\n\t\t\t\t\t\tdisplayname: href.substr(27),\n\t\t\t\t\t\twritable: readWrite\n\t\t\t\t\t});\n\t\t\t\t} else if (href.startsWith('principal:principals/groups/')) {\n\t\t\t\t\tthis._properties.sharedWith.groups.push({\n\t\t\t\t\t\tid: href.substr(28),\n\t\t\t\t\t\tdisplayname: href.substr(28),\n\t\t\t\t\t\twritable: readWrite\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar owner = props['{DAV:}owner'];\n\t\tif (typeof owner !== 'undefined' && owner.length !== 0) {\n\t\t\towner = owner[0].textContent.slice(0, -1);\n\t\t\tif (owner.startsWith('/remote.php/dav/principals/users/')) {\n\t\t\t\tthis._properties.owner = owner.substr(33);\n\t\t\t}\n\t\t}\n\n\t\t// this.tmpId = RandomStringService.generate();\n\t}\n\n\tCalendar.prototype = {\n\t\tget url() {\n\t\t\treturn this._properties.url;\n\t\t},\n\t\tget caldav() {\n\t\t\treturn $window.location.origin + this.url;\n\t\t},\n\t\tget exportUrl() {\n\t\t\tvar url = this.url;\n\t\t\t// cut off last slash to have a fancy name for the ics\n\t\t\tif (url.slice(url.length - 1) === '/') {\n\t\t\t\turl = url.slice(0, url.length - 1);\n\t\t\t}\n\t\t\turl += '?export';\n\t\t\treturn url;\n\t\t},\n\t\tget enabled() {\n\t\t\treturn this._properties.enabled;\n\t\t},\n\t\tget uri() {\n\t\t\treturn this._properties.uri;\n\t\t},\n\t\tget components() {\n\t\t\treturn this._properties.components;\n\t\t},\n\t\tset enabled(enabled) {\n\t\t\tthis._properties.enabled = enabled;\n\t\t\tthis._setUpdated('enabled');\n\t\t},\n\t\tget displayname() {\n\t\t\treturn this._properties.displayname;\n\t\t},\n\t\tset displayname(displayname) {\n\t\t\tthis._properties.displayname = displayname;\n\t\t\tthis._setUpdated('displayname');\n\t\t},\n\t\tget color() {\n\t\t\treturn this._properties.color;\n\t\t},\n\t\tset color(color) {\n\t\t\tthis._properties.color = color;\n\t\t\tthis._setUpdated('color');\n\t\t},\n\t\tget sharedWith() {\n\t\t\treturn this._properties.sharedWith;\n\t\t},\n\t\tset sharedWith(sharedWith) {\n\t\t\tthis._properties.sharedWith = sharedWith;\n\t\t},\n\t\tget textColor() {\n\t\t\tvar color = this.color;\n\t\t\tvar fallbackColor = '#fff';\n\t\t\tvar c;\n\t\t\tswitch (color.length) {\n\t\t\t\tcase 4:\n\t\t\t\t\tc = color.match(/^#([0-9a-f]{3})$/i)[1];\n\t\t\t\t\tif (c) {\n\t\t\t\t\t\treturn this._generateTextColor(parseInt(c.charAt(0), 16) * 0x11, parseInt(c.charAt(1), 16) * 0x11, parseInt(c.charAt(2), 16) * 0x11);\n\t\t\t\t\t}\n\t\t\t\t\treturn fallbackColor;\n\n\t\t\t\tcase 7:\n\t\t\t\tcase 9:\n\t\t\t\t\tvar regex = new RegExp('^#([0-9a-f]{' + (color.length - 1) + '})$', 'i');\n\t\t\t\t\tc = color.match(regex)[1];\n\t\t\t\t\tif (c) {\n\t\t\t\t\t\treturn this._generateTextColor(parseInt(c.substr(0, 2), 16), parseInt(c.substr(2, 2), 16), parseInt(c.substr(4, 2), 16));\n\t\t\t\t\t}\n\t\t\t\t\treturn fallbackColor;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn fallbackColor;\n\t\t\t}\n\t\t},\n\t\tget order() {\n\t\t\treturn this._properties.order;\n\t\t},\n\t\tset order(order) {\n\t\t\tthis._properties.order = order;\n\t\t\tthis._setUpdated('order');\n\t\t},\n\t\tget writable() {\n\t\t\treturn this._properties.writable;\n\t\t},\n\t\tget shareable() {\n\t\t\treturn this._properties.shareable;\n\t\t},\n\t\tget owner() {\n\t\t\treturn this._properties.owner;\n\t\t},\n\t\tget loadedCompleted() {\n\t\t\treturn this._properties.loadedCompleted;\n\t\t},\n\t\tset loadedCompleted(loadedCompleted) {\n\t\t\tthis._properties.loadedCompleted = loadedCompleted;\n\t\t},\n\t\t_setUpdated: function _setUpdated(propName) {\n\t\t\tif (this._updatedProperties.indexOf(propName) === -1) {\n\t\t\t\tthis._updatedProperties.push(propName);\n\t\t\t}\n\t\t},\n\t\tget updatedProperties() {\n\t\t\treturn this._updatedProperties;\n\t\t},\n\t\tresetUpdatedProperties: function resetUpdatedProperties() {\n\t\t\tthis._updatedProperties = [];\n\t\t},\n\t\tprepareUpdate: function prepareUpdate() {\n\t\t\tthis._propertiesBackup = angular.copy(this._properties);\n\t\t},\n\t\tresetToPreviousState: function resetToPreviousState() {\n\t\t\tthis._properties = angular.copy(this._propertiesBackup);\n\t\t\tthis._propertiesBackup = {};\n\t\t},\n\t\tdropPreviousState: function dropPreviousState() {\n\t\t\tthis._propertiesBackup = {};\n\t\t},\n\t\ttoggleSharesEditor: function toggleSharesEditor() {\n\t\t\tthis.list.editingShares = !this.list.editingShares;\n\t\t},\n\t\t_generateTextColor: function _generateTextColor(r, g, b) {\n\t\t\tvar brightness = (r * 299 + g * 587 + b * 114) / 1000;\n\t\t\treturn brightness > 130 ? '#000000' : '#FAFAFA';\n\t\t}\n\t};\n\n\treturn Calendar;\n}]);","'use strict';\n\n(function () {\n\t'use strict';\n\n\tvar __hasProp = {}.hasOwnProperty,\n\t    __extends = function __extends(child, parent) {\n\t\tfor (var key in parent) {\n\t\t\tif (__hasProp.call(parent, key)) {\n\t\t\t\tchild[key] = parent[key];\n\t\t\t}\n\t\t}\n\t\tfunction Ctor() {\n\t\t\tthis.constructor = child;\n\t\t}\n\t\tCtor.prototype = parent.prototype;\n\t\tchild.prototype = new Ctor();\n\t\tchild.__super__ = parent.prototype;\n\t\treturn child;\n\t},\n\t    __indexOf = [].indexOf || function (item) {\n\t\tfor (var i = 0, l = this.length; i < l; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\tangular.module('Tasks').factory('CollectionsModel', ['TasksModel', '_Model', function (TasksModel, _Model) {\n\t\tvar CollectionsModel = function (_super) {\n\n\t\t\tfunction CollectionsModel(_$tasksmodel) {\n\t\t\t\tthis._$tasksmodel = _$tasksmodel;\n\t\t\t\tthis._nameCache = {};\n\t\t\t\tCollectionsModel.__super__.constructor.call(this);\n\t\t\t}\n\n\t\t\t__extends(CollectionsModel, _super);\n\n\t\t\tCollectionsModel.prototype.add = function (data, clearCache) {\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\tthis._nameCache[data.displayname] = data;\n\t\t\t\tif (angular.isDefined(data.id)) {\n\t\t\t\t\treturn CollectionsModel.__super__.add.call(this, data, clearCache);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tCollectionsModel.prototype.getCount = function (collectionID, filter) {\n\t\t\t\tvar count, task, tasks, _i, _len;\n\t\t\t\tif (filter === null) {\n\t\t\t\t\tfilter = '';\n\t\t\t\t}\n\t\t\t\tcount = 0;\n\t\t\t\ttasks = this._$tasksmodel.filteredTasks(filter);\n\t\t\t\tfor (_i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\ttask = tasks[_i];\n\t\t\t\t\tcount += this._$tasksmodel.filterTasks(task, collectionID) && !task.related;\n\t\t\t\t}\n\t\t\t\treturn count;\n\t\t\t};\n\n\t\t\treturn CollectionsModel;\n\t\t}(_Model);\n\t\treturn new CollectionsModel(TasksModel);\n\t}]);\n}).call(undefined);","'use strict';\n\n(function () {\n\t'use strict';\n\n\tvar __hasProp = {}.hasOwnProperty,\n\t    __extends = function __extends(child, parent) {\n\t\tfor (var key in parent) {\n\t\t\tif (__hasProp.call(parent, key)) {\n\t\t\t\tchild[key] = parent[key];\n\t\t\t}\n\t\t}\n\t\tfunction Ctor() {\n\t\t\tthis.constructor = child;\n\t\t}\n\t\tCtor.prototype = parent.prototype;\n\t\tchild.prototype = new Ctor();\n\t\tchild.__super__ = parent.prototype;\n\t\treturn child;\n\t},\n\t    __indexOf = [].indexOf || function (item) {\n\t\tfor (var i = 0, l = this.length; i < l; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\tangular.module('Tasks').factory('ListsModel', ['TasksModel', '_Model', function (TasksModel, _Model) {\n\t\tvar ListsModel = function (_super) {\n\n\t\t\tfunction ListsModel(_$tasksmodel) {\n\t\t\t\tthis._$tasksmodel = _$tasksmodel;\n\t\t\t\tthis._tmpUriCache = {};\n\t\t\t\tthis._data = [];\n\t\t\t\tthis._dataMap = {};\n\t\t\t\tthis._filterCache = {};\n\t\t\t}\n\n\t\t\t__extends(ListsModel, _super);\n\n\t\t\tListsModel.prototype.add = function (calendar, clearCache) {\n\t\t\t\tvar updateByUri;\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\tupdateByUri = angular.isDefined(calendar.uri) && angular.isDefined(this.getByUri(calendar.uri));\n\t\t\t\tif (updateByUri) {\n\t\t\t\t\treturn this.update(calendar, clearCache);\n\t\t\t\t} else {\n\t\t\t\t\tif (angular.isDefined(calendar.uri)) {\n\t\t\t\t\t\tif (clearCache) {\n\t\t\t\t\t\t\tthis._invalidateCache();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!angular.isDefined(this._dataMap[calendar.uri])) {\n\t\t\t\t\t\t\tthis._data.push(calendar);\n\t\t\t\t\t\t\tthis._dataMap[calendar.uri] = calendar;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tListsModel.prototype.getByUri = function (uri) {\n\t\t\t\treturn this._dataMap[uri];\n\t\t\t};\n\n\t\t\tListsModel.prototype.update = function (list, clearCache) {\n\t\t\t\tvar tmplist;\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\ttmplist = this._tmpIdCache[list.tmpID];\n\t\t\t\tif (angular.isDefined(list.id) && angular.isDefined(tmplist) && angular.isUndefined(tmplist.id)) {\n\t\t\t\t\ttmplist.id = list.id;\n\t\t\t\t\tthis._dataMap[list.id] = tmplist;\n\t\t\t\t}\n\t\t\t\tlist[\"void\"] = false;\n\t\t\t\treturn ListsModel.__super__.update.call(this, list, clearCache);\n\t\t\t};\n\n\t\t\tListsModel.prototype[\"delete\"] = function (calendar, clearCache) {\n\t\t\t\tvar counter, data, entry, _i, _len, _ref;\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\t_ref = this._data;\n\t\t\t\tfor (counter = _i = 0, _len = _ref.length; _i < _len; counter = ++_i) {\n\t\t\t\t\tentry = _ref[counter];\n\t\t\t\t\tif (entry === calendar) {\n\t\t\t\t\t\tthis._data.splice(counter, 1);\n\t\t\t\t\t\tdata = this._dataMap[calendar.uri];\n\t\t\t\t\t\tdelete this._dataMap[calendar.uri];\n\t\t\t\t\t\tif (clearCache) {\n\t\t\t\t\t\t\tthis._invalidateCache();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tListsModel.prototype.getStandardList = function () {\n\t\t\t\tvar calendars;\n\t\t\t\tif (this.size()) {\n\t\t\t\t\tcalendars = this.getAll();\n\t\t\t\t\treturn calendars[0];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tListsModel.prototype.isNameAlreadyTaken = function (displayname, uri) {\n\t\t\t\tvar calendar, calendars, ret, _i, _len;\n\t\t\t\tcalendars = this.getAll();\n\t\t\t\tret = false;\n\t\t\t\tfor (_i = 0, _len = calendars.length; _i < _len; _i++) {\n\t\t\t\t\tcalendar = calendars[_i];\n\t\t\t\t\tif (calendar.displayname === displayname && calendar.uri !== uri) {\n\t\t\t\t\t\tret = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t};\n\n\t\t\tListsModel.prototype.getCount = function (calendarID, collectionID, filter) {\n\t\t\t\tvar count, task, tasks, _i, _len;\n\t\t\t\tif (filter === null) {\n\t\t\t\t\tfilter = '';\n\t\t\t\t}\n\t\t\t\tcount = 0;\n\t\t\t\ttasks = this._$tasksmodel.filteredTasks(filter);\n\t\t\t\tfor (_i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\ttask = tasks[_i];\n\t\t\t\t\tcount += this._$tasksmodel.filterTasks(task, collectionID) && task.calendar.uri === calendarID && !task.related;\n\t\t\t\t}\n\t\t\t\t//  if (collectionID === 'completed' && filter === '') {\n\t\t\t\t// count += this.notLoaded(calendarID);\n\t\t\t\t//  }\n\t\t\t\treturn count;\n\t\t\t};\n\n\t\t\tListsModel.prototype.loadedCompleted = function (calendarID) {\n\t\t\t\tif (angular.isUndefined(this.getById(calendarID))) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn this.getById(calendarID).loadedCompleted;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tListsModel.prototype.setLoadedCompleted = function (calendarID) {\n\t\t\t\tthis.getById(calendarID).loadedCompleted = true;\n\t\t\t};\n\n\t\t\tListsModel.prototype.getColor = function (calendarID) {\n\t\t\t\tif (angular.isUndefined(this.getById(calendarID))) {\n\t\t\t\t\treturn '#CCCCCC';\n\t\t\t\t} else {\n\t\t\t\t\treturn this.getById(calendarID).calendarcolor;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tListsModel.prototype.getName = function (calendarID) {\n\t\t\t\tif (angular.isUndefined(this.getById(calendarID))) {\n\t\t\t\t\treturn '';\n\t\t\t\t} else {\n\t\t\t\t\treturn this.getById(calendarID).displayname;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn ListsModel;\n\t\t}(_Model);\n\t\treturn new ListsModel(TasksModel);\n\t}]);\n}).call(undefined);","'use strict';\n\n(function () {\n\t'use strict';\n\n\tvar __hasProp = {}.hasOwnProperty,\n\t    __extends = function __extends(child, parent) {\n\t\tfor (var key in parent) {\n\t\t\tif (__hasProp.call(parent, key)) {\n\t\t\t\tchild[key] = parent[key];\n\t\t\t}\n\t\t}\n\t\tfunction Ctor() {\n\t\t\tthis.constructor = child;\n\t\t}\n\t\tCtor.prototype = parent.prototype;\n\t\tchild.prototype = new Ctor();\n\t\tchild.__super__ = parent.prototype;\n\t\treturn child;\n\t},\n\t    __indexOf = [].indexOf || function (item) {\n\t\tfor (var i = 0, l = this.length; i < l; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\tangular.module('Tasks').factory('SettingsModel', ['_Model', function (_Model) {\n\t\tvar SettingsModel = function (_super) {\n\n\t\t\tfunction SettingsModel() {\n\t\t\t\tthis._nameCache = {};\n\t\t\t\tSettingsModel.__super__.constructor.call(this);\n\t\t\t}\n\n\t\t\t__extends(SettingsModel, _super);\n\n\t\t\tSettingsModel.prototype.add = function (data, clearCache) {\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\tthis._nameCache[data.displayname] = data;\n\t\t\t\tif (angular.isDefined(data.id)) {\n\t\t\t\t\treturn SettingsModel.__super__.add.call(this, data, clearCache);\n\t\t\t\t} else {\n\t\t\t\t\treturn this._data.push(data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tSettingsModel.prototype.toggle = function (type, setting) {\n\t\t\t\tvar set;\n\t\t\t\tset = this.getById(type);\n\t\t\t\tthis.getById(type)[setting] = !set[setting];\n\t\t\t};\n\t\t\treturn SettingsModel;\n\t\t}(_Model);\n\t\treturn new SettingsModel();\n\t}]);\n}).call(undefined);","'use strict';\n\n(function () {\n\t'use strict';\n\n\tvar __hasProp = {}.hasOwnProperty,\n\t    __extends = function __extends(child, parent) {\n\t\tfor (var key in parent) {\n\t\t\tif (__hasProp.call(parent, key)) {\n\t\t\t\tchild[key] = parent[key];\n\t\t\t}\n\t\t}\n\t\tfunction Ctor() {\n\t\t\tthis.constructor = child;\n\t\t}\n\t\tCtor.prototype = parent.prototype;\n\t\tchild.prototype = new Ctor();\n\t\tchild.__super__ = parent.prototype;\n\t\treturn child;\n\t},\n\t    __indexOf = [].indexOf || function (item) {\n\t\tfor (var i = 0, l = this.length; i < l; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\tangular.module('Tasks').factory('TasksModel', ['_Model', function (_Model) {\n\t\tvar TasksModel = function (_super) {\n\n\t\t\tfunction TasksModel() {\n\t\t\t\tthis._tmpIdCache = {};\n\t\t\t\tTasksModel.__super__.constructor.call(this);\n\t\t\t}\n\n\t\t\t__extends(TasksModel, _super);\n\n\t\t\tTasksModel.prototype.ad = function (task, clearCache) {\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\tvar updateByUri = angular.isDefined(task.uri) && angular.isDefined(this.getByUri(task.uri));\n\t\t\t\tif (updateByUri) {\n\t\t\t\t\treturn this.update(task, clearCache);\n\t\t\t\t} else {\n\t\t\t\t\tif (angular.isDefined(task.uri)) {\n\t\t\t\t\t\tif (clearCache) {\n\t\t\t\t\t\t\tthis._invalidateCache();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!angular.isDefined(this._dataMap[task.uri])) {\n\t\t\t\t\t\t\tthis._data.push(task);\n\t\t\t\t\t\t\tthis._dataMap[task.uri] = task;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tTasksModel.prototype.getByUri = function (uri) {\n\t\t\t\treturn this._dataMap[uri];\n\t\t\t};\n\n\t\t\tTasksModel.prototype.update = function (task, clearCache) {\n\n\t\t\t\tvar entry, key, value, _results;\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\tif (clearCache) {\n\t\t\t\t\tthis._invalidateCache();\n\t\t\t\t}\n\t\t\t\tentry = this.getByUri(task.uri);\n\t\t\t\tentry.components = task.components;\n\t\t\t\tentry.components.toString();\n\t\t\t\treturn entry;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.removeById = function (taskID) {\n\t\t\t\treturn TasksModel.__super__.removeById.call(this, taskID);\n\t\t\t};\n\n\t\t\tTasksModel.prototype[\"delete\"] = function (task, clearCache) {\n\t\t\t\tvar counter, data, entry, _i, _len, _ref;\n\t\t\t\tif (clearCache === null) {\n\t\t\t\t\tclearCache = true;\n\t\t\t\t}\n\t\t\t\t_ref = this._data;\n\t\t\t\tfor (counter = _i = 0, _len = _ref.length; _i < _len; counter = ++_i) {\n\t\t\t\t\tentry = _ref[counter];\n\t\t\t\t\tif (entry === task) {\n\t\t\t\t\t\tthis._data.splice(counter, 1);\n\t\t\t\t\t\tdata = this._dataMap[task.uri];\n\t\t\t\t\t\tdelete this._dataMap[task.uri];\n\t\t\t\t\t\tif (clearCache) {\n\t\t\t\t\t\t\tthis._invalidateCache();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tTasksModel.prototype.removeByList = function (listID) {\n\t\t\t\tvar id, task, taskIDs, tasks, _results;\n\t\t\t\ttasks = this.getAll();\n\t\t\t\ttaskIDs = [];\n\t\t\t\tfor (var _i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\ttask = tasks[_i];\n\t\t\t\t\tif (task.calendarid === listID) {\n\t\t\t\t\t\ttaskIDs.push(task.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_results = [];\n\t\t\t\tfor (var _j = 0, _len1 = taskIDs.length; _j < _len1; _j++) {\n\t\t\t\t\tid = taskIDs[_j];\n\t\t\t\t\t_results.push(this.removeById(id));\n\t\t\t\t}\n\t\t\t\treturn _results;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.taskAtDay = function (task, date) {\n\t\t\t\tvar diff, due, duediff, start, startdiff;\n\t\t\t\tstart = moment(task.start, \"YYYYMMDDTHHmmss\");\n\t\t\t\tdue = moment(task.due, \"YYYYMMDDTHHmmss\");\n\t\t\t\tif (start.isValid() && !due.isValid()) {\n\t\t\t\t\tdiff = start.diff(moment().startOf('day'), 'days', true);\n\t\t\t\t\tif (!date && diff < date + 1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (diff < date + 1 && diff >= date) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (due.isValid() && !start.isValid()) {\n\t\t\t\t\tdiff = due.diff(moment().startOf('day'), 'days', true);\n\t\t\t\t\tif (!date && diff < date + 1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (diff < date + 1 && diff >= date) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (start.isValid() && due.isValid()) {\n\t\t\t\t\tstartdiff = start.diff(moment().startOf('day'), 'days', true);\n\t\t\t\t\tduediff = due.diff(moment().startOf('day'), 'days', true);\n\t\t\t\t\tif (!date && (startdiff < date + 1 || duediff < date + 1)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (startdiff < date + 1 && startdiff >= date && duediff >= date) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (duediff < date + 1 && duediff >= date && startdiff >= date) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.isLoaded = function (task) {\n\t\t\t\tif (this.getById(task.id)) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tTasksModel.prototype.hasSubtasks = function (uid) {\n\t\t\t\tvar tasks = this.getAll();\n\t\t\t\tfor (var _i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\tvar task = tasks[_i];\n\t\t\t\t\tif (task.related === uid) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.hasCompletedSubtasks = function (uid) {\n\t\t\t\tvar tasks = this.getAll();\n\t\t\t\tfor (var _i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\tvar task = tasks[_i];\n\t\t\t\t\tif (task.related === uid && task.completed) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.hasNoParent = function (task) {\n\t\t\t\tif (!task.related) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tvar tasks = this.getAll();\n\t\t\t\t\tfor (var _i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\t\tvar t = tasks[_i];\n\t\t\t\t\t\tif (task.related === t.uid && task !== t) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tTasksModel.prototype.getIdByUid = function (uid) {\n\t\t\t\tvar tasks = this.getAll();\n\t\t\t\tfor (var _i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\tvar task = tasks[_i];\n\t\t\t\t\tif (task.uid === uid) {\n\t\t\t\t\t\treturn task.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.getByUid = function (uid) {\n\t\t\t\tvar tasks = this.getAll();\n\t\t\t\tfor (var _i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\tvar task = tasks[_i];\n\t\t\t\t\tif (task.uid === uid) {\n\t\t\t\t\t\treturn task;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.getChildren = function (task) {\n\t\t\t\tvar children, t, tasks;\n\t\t\t\ttasks = this.getAll();\n\t\t\t\tchildren = [];\n\t\t\t\tfor (var _i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\tt = tasks[_i];\n\t\t\t\t\tif (t.related === task.uid && t !== task) {\n\t\t\t\t\t\tchildren.push(t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn children;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.getDescendantIDs = function (task) {\n\t\t\t\tvar child, children, descendantIDs;\n\t\t\t\tchildren = this.getChildren(task);\n\t\t\t\tdescendantIDs = [];\n\t\t\t\tfor (var _i = 0, _len = children.length; _i < _len; _i++) {\n\t\t\t\t\tchild = children[_i];\n\t\t\t\t\tdescendantIDs = descendantIDs.concat(child.uri);\n\t\t\t\t\tdescendantIDs = descendantIDs.concat(this.getDescendantIDs(child));\n\t\t\t\t}\n\t\t\t\treturn descendantIDs;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.filterTasks = function (task, filter) {\n\t\t\t\tswitch (filter) {\n\t\t\t\t\tcase 'completed':\n\t\t\t\t\t\treturn task.completed === true;\n\t\t\t\t\tcase 'all':\n\t\t\t\t\t\treturn task.completed === false;\n\t\t\t\t\tcase 'current':\n\t\t\t\t\t\treturn task.completed === false && this.current(task.start, task.due);\n\t\t\t\t\tcase 'starred':\n\t\t\t\t\t\treturn task.completed === false && task.priority > 5;\n\t\t\t\t\tcase 'today':\n\t\t\t\t\t\treturn task.completed === false && (this.today(task.start) || this.today(task.due));\n\t\t\t\t\tcase 'week':\n\t\t\t\t\t\treturn task.completed === false && (this.week(task.start) || this.week(task.due));\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn '' + task.calendar.uri === '' + filter;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tTasksModel.prototype.filteredTasks = function (needle) {\n\t\t\t\tvar ancestors, parentID, ret, task, tasks;\n\t\t\t\tret = [];\n\t\t\t\ttasks = this.getAll();\n\t\t\t\tif (!needle) {\n\t\t\t\t\tret = tasks;\n\t\t\t\t} else {\n\t\t\t\t\tfor (var _i = 0, _len = tasks.length; _i < _len; _i++) {\n\t\t\t\t\t\ttask = tasks[_i];\n\t\t\t\t\t\tif (this.filterTasksByString(task, needle)) {\n\t\t\t\t\t\t\tif (this.objectExists(task, ret)) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tret.push(task);\n\t\t\t\t\t\t\tparentID = this.getIdByUid(task.related);\n\t\t\t\t\t\t\tancestors = this.getAncestor(parentID, ret);\n\t\t\t\t\t\t\tif (ancestors) {\n\t\t\t\t\t\t\t\tret = ret.concat(ancestors);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.objectExists = function (task, ret) {\n\t\t\t\tfor (var _i = 0, _len = ret.length; _i < _len; _i++) {\n\t\t\t\t\tvar re = ret[_i];\n\t\t\t\t\tif (re.id === task.id) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.filterTasksByString = function (task, filter) {\n\t\t\t\tvar key, keys, value;\n\t\t\t\tkeys = ['name', 'note', 'location', 'categories', 'comments'];\n\t\t\t\tfilter = filter.toLowerCase();\n\t\t\t\tfor (key in task) {\n\t\t\t\t\tvalue = task[key];\n\t\t\t\t\tif (__indexOf.call(keys, key) >= 0) {\n\t\t\t\t\t\tif (key === 'comments') {\n\t\t\t\t\t\t\tif (this.searchComments(task.comments, filter)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (key === 'categories') {\n\t\t\t\t\t\t\tif (this.searchCategories(task.categories, filter)) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (value.toLowerCase().indexOf(filter) !== -1) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.searchComments = function (comments, filter) {\n\t\t\t\tfor (var _i = 0, _len = comments.length; _i < _len; _i++) {\n\t\t\t\t\tvar comment = comments[_i];\n\t\t\t\t\tif (comment.comment.toLowerCase().indexOf(filter) !== -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.searchCategories = function (categories, filter) {\n\t\t\t\tfor (var _i = 0, _len = categories.length; _i < _len; _i++) {\n\t\t\t\t\tvar category = categories[_i];\n\t\t\t\t\tif (category.toLowerCase().indexOf(filter) !== -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.setReminder = function (taskID, reminder) {\n\t\t\t\treturn this.update({\n\t\t\t\t\tid: taskID,\n\t\t\t\t\treminder: reminder\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tTasksModel.prototype.overdue = function (due) {\n\t\t\t\treturn moment(due, \"YYYYMMDDTHHmmss\").isValid() && moment(due, \"YYYYMMDDTHHmmss\").diff(moment()) < 0;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.due = function (due) {\n\t\t\t\treturn moment(due, 'YYYYMMDDTHHmmss').isValid();\n\t\t\t};\n\n\t\t\tTasksModel.prototype.today = function (due) {\n\t\t\t\treturn moment(due, \"YYYYMMDDTHHmmss\").isValid() && moment(due, \"YYYYMMDDTHHmmss\").diff(moment().startOf('day'), 'days', true) < 1;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.week = function (due) {\n\t\t\t\treturn moment(due, \"YYYYMMDDTHHmmss\").isValid() && moment(due, \"YYYYMMDDTHHmmss\").diff(moment().startOf('day'), 'days', true) < 7;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.current = function (start, due) {\n\t\t\t\treturn !moment(start, \"YYYYMMDDTHHmmss\").isValid() || moment(start, \"YYYYMMDDTHHmmss\").diff(moment(), 'days', true) < 0 || moment(due, \"YYYYMMDDTHHmmss\").diff(moment(), 'days', true) < 0;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.addComment = function (comment) {\n\t\t\t\tvar task;\n\t\t\t\ttask = this.getById(comment.taskID);\n\t\t\t\tif (task.comments) {\n\t\t\t\t\ttask.comments.push(comment);\n\t\t\t\t} else {\n\t\t\t\t\ttask.comments = [comment];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tTasksModel.prototype.updateComment = function (comment) {\n\t\t\t\tvar com, i, task, _i, _len, _ref, _results;\n\t\t\t\ttask = this.getById(comment.taskID);\n\t\t\t\ti = 0;\n\t\t\t\t_ref = task.comments;\n\t\t\t\t_results = [];\n\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\tcom = _ref[_i];\n\t\t\t\t\tif (com.tmpID === comment.tmpID) {\n\t\t\t\t\t\ttask.comments[i] = comment;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t_results.push(i++);\n\t\t\t\t}\n\t\t\t\treturn _results;\n\t\t\t};\n\n\t\t\tTasksModel.prototype.deleteComment = function (taskID, commentID) {\n\t\t\t\tvar comment, i, task, _i, _len, _ref, _results;\n\t\t\t\ttask = this.getById(taskID);\n\t\t\t\ti = 0;\n\t\t\t\t_ref = task.comments;\n\t\t\t\t_results = [];\n\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\tcomment = _ref[_i];\n\t\t\t\t\tif (comment.id === commentID) {\n\t\t\t\t\t\ttask.comments.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t_results.push(i++);\n\t\t\t\t}\n\t\t\t\treturn _results;\n\t\t\t};\n\n\t\t\treturn TasksModel;\n\t\t}(_Model);\n\t\treturn new TasksModel();\n\t}]);\n}).call(undefined);","'use strict';\n\nangular.module('Tasks').factory('VTodo', ['$filter', 'ICalFactory', 'RandomStringService', function ($filter, icalfactory, RandomStringService) {\n\t'use strict';\n\n\tfunction VTodo(calendar, props, uri) {\n\t\tvar _this = this;\n\n\t\tangular.extend(this, {\n\t\t\tcalendar: calendar,\n\t\t\tdata: props['{urn:ietf:params:xml:ns:caldav}calendar-data'],\n\t\t\turi: uri,\n\t\t\tetag: props['{DAV:}getetag'] || null,\n\t\t\ttimers: [],\n\t\t\tloaded: false\n\t\t});\n\n\t\tthis.jCal = ICAL.parse(this.data);\n\t\tthis.components = new ICAL.Component(this.jCal);\n\n\t\tif (this.components.jCal.length === 0) {\n\t\t\tthrow \"invalid calendar\";\n\t\t}\n\n\t\tthis.loadComments();\n\t}\n\n\tVTodo.prototype = {\n\t\tget summary() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn vtodos[0].getFirstPropertyValue('summary');\n\t\t},\n\t\tset summary(summary) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvtodos[0].updatePropertyWithValue('summary', summary);\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget priority() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvar priority = vtodos[0].getFirstPropertyValue('priority');\n\t\t\treturn (10 - priority) % 10;\n\t\t},\n\t\tset priority(priority) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvtodos[0].updatePropertyWithValue('priority', (10 - priority) % 10);\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget complete() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn vtodos[0].getFirstPropertyValue('percent-complete') || 0;\n\t\t},\n\t\tset complete(complete) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvtodos[0].updatePropertyWithValue('percent-complete', complete);\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t\tif (complete < 100) {\n\t\t\t\tthis.completed = null;\n\t\t\t\tif (complete === 0) {\n\t\t\t\t\tthis.status = 'NEEDS-ACTION';\n\t\t\t\t} else {\n\t\t\t\t\tthis.status = 'IN-PROCESS';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.completed = ICAL.Time.now();\n\t\t\t\tthis.status = 'COMPLETED';\n\t\t\t}\n\t\t},\n\t\tget completed() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvar comp = vtodos[0].getFirstPropertyValue('completed');\n\t\t\tif (comp) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tset completed(completed) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tif (completed) {\n\t\t\t\tvtodos[0].updatePropertyWithValue('completed', completed);\n\t\t\t} else {\n\t\t\t\tvtodos[0].removeProperty('completed');\n\t\t\t}\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget completed_date() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvar comp = vtodos[0].getFirstPropertyValue('completed');\n\t\t\tif (comp) {\n\t\t\t\treturn comp.toJSDate();\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tget status() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn vtodos[0].getFirstPropertyValue('status');\n\t\t},\n\t\tset status(status) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvtodos[0].updatePropertyWithValue('status', status);\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget note() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn vtodos[0].getFirstPropertyValue('description') || '';\n\t\t},\n\t\tset note(note) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvtodos[0].updatePropertyWithValue('description', note);\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget uid() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn vtodos[0].getFirstPropertyValue('uid') || '';\n\t\t},\n\t\tget related() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn vtodos[0].getFirstPropertyValue('related-to') || null;\n\t\t},\n\t\tset related(related) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tif (related) {\n\t\t\t\tvtodos[0].updatePropertyWithValue('related-to', related);\n\t\t\t} else {\n\t\t\t\tvtodos[0].removeProperty('related-to');\n\t\t\t}\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget hideSubtasks() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn +vtodos[0].getFirstPropertyValue('x-oc-hidesubtasks') || 0;\n\t\t},\n\t\tset hideSubtasks(hide) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvtodos[0].updatePropertyWithValue('x-oc-hidesubtasks', +hide);\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget hideCompletedSubtasks() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn +vtodos[0].getFirstPropertyValue('x-oc-hidecompletedsubtasks') || 0;\n\t\t},\n\t\tset hideCompletedSubtasks(hide) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvtodos[0].updatePropertyWithValue('x-oc-hidecompletedsubtasks', +hide);\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget reminder() {\n\t\t\treturn null;\n\t\t},\n\t\tget categories() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvar categories = vtodos[0].getFirstProperty('categories');\n\t\t\tif (categories) {\n\t\t\t\treturn categories.getValues();\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\t\tset categories(cats) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvar categories = vtodos[0].getFirstProperty('categories');\n\t\t\tif (cats.length > 0) {\n\t\t\t\tif (categories) {\n\t\t\t\t\tcategories.setValues(cats);\n\t\t\t\t} else {\n\t\t\t\t\tvar prop = new ICAL.Property('categories');\n\t\t\t\t\tprop.setValues(cats);\n\t\t\t\t\tcategories = vtodos[0].addProperty(prop);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvtodos[0].removeProperty('categories');\n\t\t\t}\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget start() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn vtodos[0].getFirstPropertyValue('dtstart');\n\t\t},\n\t\tset start(start) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tif (start) {\n\t\t\t\tvtodos[0].updatePropertyWithValue('dtstart', start);\n\t\t\t} else {\n\t\t\t\tvtodos[0].removeProperty('dtstart');\n\t\t\t}\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget due() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\treturn vtodos[0].getFirstPropertyValue('due');\n\t\t},\n\t\tset due(due) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tif (due) {\n\t\t\t\tvtodos[0].updatePropertyWithValue('due', due);\n\t\t\t} else {\n\t\t\t\tvtodos[0].removeProperty('due');\n\t\t\t}\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget allDay() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvar start = vtodos[0].getFirstPropertyValue('dtstart');\n\t\t\tvar due = vtodos[0].getFirstPropertyValue('due');\n\t\t\tvar d = due ? due : start;\n\t\t\treturn d !== null && d.isDate;\n\t\t},\n\t\tset allDay(allDay) {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvar start = vtodos[0].getFirstPropertyValue('dtstart');\n\t\t\tif (start) {\n\t\t\t\tstart.isDate = allDay;\n\t\t\t\tvtodos[0].updatePropertyWithValue('dtstart', start);\n\t\t\t}\n\t\t\tvar due = vtodos[0].getFirstPropertyValue('due');\n\t\t\tif (due) {\n\t\t\t\tdue.isDate = allDay;\n\t\t\t\tvtodos[0].updatePropertyWithValue('due', due);\n\t\t\t}\n\t\t\tthis.updateLastModified();\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tget loadedCompleted() {\n\t\t\treturn this.loaded;\n\t\t},\n\t\tset loadedCompleted(loadedCompleted) {\n\t\t\tthis.loaded = loadedCompleted;\n\t\t},\n\t\tget comments() {\n\t\t\treturn this._comments;\n\t\t},\n\t\tset comments(comments) {\n\t\t\tthis._comments = comments;\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvtodos[0].removeAllProperties('comment');\n\t\t\tfor (var i = 0; i < comments.length; i++) {\n\t\t\t\tvtodos[0].addPropertyWithValue('comment', JSON.stringify(comments[i]));\n\t\t\t}\n\t\t\tthis.data = this.components.toString();\n\t\t},\n\t\tupdateLastModified: function updateLastModified() {\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvtodos[0].updatePropertyWithValue('last-modified', ICAL.Time.now());\n\t\t\tvtodos[0].updatePropertyWithValue('dtstamp', ICAL.Time.now());\n\t\t},\n\t\tloadComments: function loadComments() {\n\t\t\tthis._comments = [];\n\t\t\tvar vtodos = this.components.getAllSubcomponents('vtodo');\n\t\t\tvar commentRaw = vtodos[0].getAllProperties('comment');\n\t\t\tif (commentRaw.length > 0) {\n\t\t\t\tfor (var i = 0; i < commentRaw.length; i++) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar commentObject = JSON.parse(commentRaw[i].getValues()[0]);\n\t\t\t\t\t\tthis._comments.push(commentObject);\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tlog: function log(val) {\n\t\t\tconsole.log(val);\n\t\t}\n\t};\n\n\tVTodo.create = function (task) {\n\t\tvar comp = icalfactory.new();\n\n\t\tvar vtodo = new ICAL.Component('vtodo');\n\t\tcomp.addSubcomponent(vtodo);\n\t\tvtodo.updatePropertyWithValue('created', ICAL.Time.now());\n\t\tvtodo.updatePropertyWithValue('dtstamp', ICAL.Time.now());\n\t\tvtodo.updatePropertyWithValue('last-modified', ICAL.Time.now());\n\t\tvtodo.updatePropertyWithValue('uid', RandomStringService.generate());\n\t\tvtodo.updatePropertyWithValue('summary', task.summary);\n\t\tvtodo.updatePropertyWithValue('priority', task.priority);\n\t\tvtodo.updatePropertyWithValue('percent-complete', task.complete);\n\t\tvtodo.updatePropertyWithValue('x-oc-hidesubtasks', 0);\n\t\tif (task.related) {\n\t\t\tvtodo.updatePropertyWithValue('related-to', task.related);\n\t\t}\n\t\tif (task.note) {\n\t\t\tvtodo.updatePropertyWithValue('description', task.note);\n\t\t}\n\t\tif (task.due) {\n\t\t\tvtodo.updatePropertyWithValue('due', task.due);\n\t\t}\n\t\tif (task.start) {\n\t\t\tvtodo.updatePropertyWithValue('dtstart', task.start);\n\t\t}\n\n\t\treturn new VTodo(task.calendar, {\n\t\t\t'{urn:ietf:params:xml:ns:caldav}calendar-data': comp.toString(),\n\t\t\t'{DAV:}getetag': null\n\t\t}, null);\n\t};\n\n\treturn VTodo;\n}]);"]}